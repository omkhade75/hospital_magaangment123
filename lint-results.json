[{"filePath":"D:\\starhospital-main\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\postcss.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\App.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ProtectedRoute' is defined but never used.","line":7,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MayaChatbot' is defined but never used.","line":39,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":39,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Toaster } from \"@/components/ui/toaster\";\nimport { Toaster as Sonner } from \"@/components/ui/sonner\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport { AuthProvider } from \"./contexts/AuthContext\";\nimport ProtectedRoute from \"./components/auth/ProtectedRoute\";\nimport PatientProtectedRoute from \"./components/auth/PatientProtectedRoute\";\nimport StaffProtectedRoute from \"./components/auth/StaffProtectedRoute\";\n\n// Pages\nimport PortalSelect from \"./pages/PortalSelect\";\nimport Index from \"./pages/Index\";\nimport Patients from \"./pages/Patients\";\nimport Doctors from \"./pages/Doctors\";\nimport Appointments from \"./pages/Appointments\";\nimport Departments from \"./pages/Departments\";\nimport Beds from \"./pages/Beds\";\nimport Callbacks from \"./pages/Callbacks\";\nimport Reports from \"./pages/Reports\";\nimport NotFound from \"./pages/NotFound\";\nimport Settings from \"./pages/Settings\";\nimport ComingSoon from \"./pages/ComingSoon\";\n\n// Patient pages\nimport PatientLogin from \"./pages/patient/PatientLogin\";\nimport PatientRegister from \"./pages/patient/PatientRegister\";\nimport PatientDashboard from \"./pages/patient/PatientDashboard\";\n\n// Staff pages\nimport StaffLogin from \"./pages/staff/StaffLogin\";\nimport StaffRegister from \"./pages/staff/StaffRegister\";\nimport StaffPending from \"./pages/staff/StaffPending\";\nimport StaffApprovals from \"./pages/staff/StaffApprovals\";\n\n// Admin pages\nimport AdminLogin from \"./pages/admin/AdminLogin\";\n\nimport MayaChatbot from \"./components/chatbot/MayaChatbot\";\n\n// Staff Dashboards\nimport DoctorDashboard from \"./pages/staff/DoctorDashboard\";\nimport ReceptionDashboard from \"./pages/staff/ReceptionDashboard\";\nimport NurseDashboard from \"./pages/staff/NurseDashboard\";\nimport NurseRounds from \"./pages/staff/NurseRounds\";\nimport CashierDashboard from \"./pages/staff/CashierDashboard\";\nimport AdminAITools from \"./pages/admin/AdminAITools\";\nimport AdminInfo from \"./pages/admin/AdminInfo\";\nimport Salaries from \"./pages/staff/Salaries\";\n\nconst queryClient = new QueryClient();\n\nconst App = () => (\n  <QueryClientProvider client={queryClient}>\n    <AuthProvider>\n      <TooltipProvider>\n        <Toaster />\n        <Sonner />\n        <BrowserRouter>\n          <Routes>\n            {/* Portal Selection */}\n            <Route path=\"/\" element={<PortalSelect />} />\n\n            {/* Patient Routes */}\n            <Route path=\"/patient/login\" element={<PatientLogin />} />\n            <Route path=\"/patient/register\" element={<PatientRegister />} />\n            <Route\n              path=\"/patient/dashboard\"\n              element={\n                <PatientProtectedRoute>\n                  <PatientDashboard />\n                </PatientProtectedRoute>\n              }\n            />\n\n            {/* Admin Routes */}\n            <Route path=\"/admin/login\" element={<AdminLogin />} />\n\n            {/* Staff Routes */}\n            <Route path=\"/staff/login\" element={<StaffLogin />} />\n            <Route path=\"/staff/register\" element={<StaffRegister />} />\n            <Route path=\"/staff/pending\" element={<StaffPending />} />\n\n            {/* Staff Dashboard (Protected) */}\n            <Route\n              path=\"/dashboard\"\n              element={\n                <StaffProtectedRoute>\n                  <Index />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/staff/dashboard/doctor\"\n              element={\n                <StaffProtectedRoute>\n                  <DoctorDashboard />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/staff/dashboard/reception\"\n              element={\n                <StaffProtectedRoute>\n                  <ReceptionDashboard />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/staff/dashboard/nurse\"\n              element={\n                <StaffProtectedRoute>\n                  <NurseDashboard />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/staff/dashboard/cashier\"\n              element={\n                <StaffProtectedRoute>\n                  <CashierDashboard />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/ai-tools\"\n              element={\n                <StaffProtectedRoute requiredRole=\"admin\">\n                  <AdminAITools />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/cashier/calculations\"\n              element={\n                <StaffProtectedRoute>\n                  <CashierDashboard />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/admin/info\"\n              element={\n                <StaffProtectedRoute requiredRole=\"admin\">\n                  <AdminInfo />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/nurse/rounds\"\n              element={\n                <StaffProtectedRoute>\n                  <NurseRounds />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/patients\"\n              element={\n                <StaffProtectedRoute>\n                  <Patients />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/salaries\"\n              element={\n                <StaffProtectedRoute requiredRole=\"admin\">\n                  <Salaries />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/doctors\"\n              element={\n                <StaffProtectedRoute>\n                  <Doctors />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/appointments\"\n              element={\n                <StaffProtectedRoute>\n                  <Appointments />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/departments\"\n              element={\n                <StaffProtectedRoute>\n                  <Departments />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/beds\"\n              element={\n                <StaffProtectedRoute>\n                  <Beds />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/callbacks\"\n              element={\n                <StaffProtectedRoute>\n                  <Callbacks />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/reports\"\n              element={\n                <StaffProtectedRoute>\n                  <Reports />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/staff/approvals\"\n              element={\n                <StaffProtectedRoute requiredRole=\"admin\">\n                  <StaffApprovals />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/staff-approvals\"\n              element={\n                <StaffProtectedRoute requiredRole=\"admin\">\n                  <StaffApprovals />\n                </StaffProtectedRoute>\n              }\n            />\n            <Route\n              path=\"/settings\"\n              element={\n                <StaffProtectedRoute>\n                  <Settings />\n                </StaffProtectedRoute>\n              }\n            />\n\n            {/* Legacy routes redirect */}\n            <Route path=\"/login\" element={<PortalSelect />} />\n            <Route path=\"/register\" element={<PortalSelect />} />\n\n            {/* Catch-all */}\n            <Route path=\"/social-coming-soon\" element={<ComingSoon />} />\n            <Route path=\"*\" element={<NotFound />} />\n          </Routes>\n        </BrowserRouter>\n      </TooltipProvider>\n    </AuthProvider>\n  </QueryClientProvider>\n);\n\nexport default App;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\NavLink.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\auth\\PatientProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\auth\\ProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\auth\\StaffProtectedRoute.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\chatbot\\MayaChatbot.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Loader2' is defined but never used.","line":2,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":52},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[655,658],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[655,658],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":16,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[683,686],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[683,686],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'sessionId' is assigned a value but never used.","line":36,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":19},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'speak'. Either include it or remove the dependency array.","line":66,"column":6,"nodeType":"ArrayExpression","endLine":66,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [speak]","fix":{"range":[2387,2389],"text":"[speak]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":70,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":70,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2499,2502],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2499,2502],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3121,3124],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3121,3124],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":95,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":95,"endColumn":20,"suggestions":[{"fix":{"range":[3137,3154],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'toast'. Either include it or remove the dependency array.","line":102,"column":6,"nodeType":"ArrayExpression","endLine":102,"endColumn":8,"suggestions":[{"desc":"Update the dependencies array to be: [toast]","fix":{"range":[3244,3246],"text":"[toast]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":225,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":225,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7645,7648],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7645,7648],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/rules-of-hooks","severity":2,"message":"React Hook \"useState\" is called conditionally. React Hooks must be called in the exact same order in every component render.","line":241,"column":43,"nodeType":"Identifier","endLine":241,"endColumn":51},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":241,"column":91,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":241,"endColumn":94,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8069,8072],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8069,8072],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":314,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":314,"endColumn":15},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":358,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":358,"endColumn":20,"suggestions":[{"fix":{"range":[13769,13790],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":14,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useRef, useEffect } from \"react\";\nimport { MessageCircle, X, Send, Bot, User, Loader2, Mic, Volume2, Phone, PhoneCall } from \"lucide-react\";\nimport Vapi from \"@vapi-ai/web\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { cn } from \"@/lib/utils\";\nimport { useToast } from \"@/components/ui/use-toast\";\n\n// TypeScript declarations for Speech APIs\ndeclare global {\n  interface Window {\n    webkitSpeechRecognition: any;\n    SpeechRecognition: any;\n  }\n}\n\ninterface Message {\n  role: \"user\" | \"assistant\";\n  content: string;\n}\n\nconst MAX_MESSAGE_LENGTH = 1000;\n\nconst MayaChatbot = () => {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState<Message[]>([\n    { role: \"assistant\", content: \"Hi! I'm Maya, your dedicated health assistant. How can I help you today? You can ask me about appointments, reports, or check doctor availability.\" }\n  ]);\n  const [input, setInput] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [sessionId] = useState(() => `session-${crypto.randomUUID()}`);\n  const scrollRef = useRef<HTMLDivElement>(null);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const [language, setLanguage] = useState<\"en\" | \"hi\" | \"mr\">(\"en\");\n\n  // Listen for Maya Notifications from other components\n  useEffect(() => {\n    const handleMayaNotification = (e: Event) => {\n      const detail = (e as CustomEvent).detail;\n      setIsOpen(true);\n\n      const newMessage: Message = { role: \"assistant\", content: detail.message };\n      setMessages((prev) => [...prev, newMessage]);\n\n      if (detail.message) {\n        // Tiny delay to ensure speech starts after open\n        setTimeout(() => speak(detail.message), 500);\n      }\n    };\n\n    window.addEventListener('maya-notification', handleMayaNotification);\n    return () => window.removeEventListener('maya-notification', handleMayaNotification);\n  }, []);\n\n  // Vapi Integration\n  const [isCallActive, setIsCallActive] = useState(false);\n  const vapiRef = useRef<any>(null);\n\n  useEffect(() => {\n    const vapi = new Vapi(import.meta.env.VITE_VAPI_PUBLIC_KEY || \"demo-key\");\n    vapiRef.current = vapi;\n\n    vapi.on(\"call-start\", () => {\n      setIsCallActive(true);\n      setIsSpeaking(false); // Stop browser TTS if running\n      window.speechSynthesis.cancel();\n      toast({\n        title: \"Call Started\",\n        description: \"Connected to Maya Voice Assistant.\",\n      });\n    });\n\n    vapi.on(\"call-end\", () => {\n      setIsCallActive(false);\n      toast({\n        title: \"Call Ended\",\n        description: \"Voice session finished.\",\n      });\n    });\n\n    vapi.on(\"error\", (e: any) => {\n      console.error(e);\n      setIsCallActive(false);\n    });\n\n    return () => {\n      vapi.stop();\n    };\n  }, []);\n\n  const toggleVapiCall = () => {\n    if (isCallActive) {\n      vapiRef.current.stop();\n    } else {\n      const assistantId = import.meta.env.VITE_VAPI_ASSISTANT_ID;\n      const publicKey = import.meta.env.VITE_VAPI_PUBLIC_KEY;\n\n      if (!publicKey || publicKey === \"your_vapi_public_key_here\") {\n        toast({\n          title: \"Configuration Required\",\n          description: \"Please add your VITE_VAPI_PUBLIC_KEY to the .env file.\",\n          variant: \"destructive\"\n        });\n        return;\n      }\n\n      // Multilingual System Prompt\n      const systemPrompt = `You are Maya, the intelligent AI receptionist for Star Hospital (Medicare).\n      Context: You are talking to a patient via the hospital website.\n      \n      IMPORTANT: You must detect the language the user is speaking (English, Hindi, or Marathi) and respond IN THAT SAME LANGUAGE.\n      - If the user speaks Hindi, reply in Hindi.\n      - If the user speaks Marathi, reply in Marathi.\n      - If the user speaks English, reply in English.\n      Do not just translate, but adopt the persona appropriate for that language. Start in English but switch IMMEDIATELY if they speak Hindi or Marathi.\n\n      Role:\n      - Assist with booking appointments (ask for doctor name and preferred time).\n      - Answer inquiries about hospital services, reports, and visiting hours.\n      - Be warm, empathetic, and professional.\n      \n      Hospital Info:\n      - Name: Star Hospital\n      - Emergency Contact: 102\n      - Main Line: ${import.meta.env.VITE_HOSPITAL_PHONE_NUMBER || \"+91-123-456-7890\"}\n      \n      Important: Keep responses concise and helpful. Do not mention you are an AI unnecessarily, just help the user.`;\n\n      if (assistantId && assistantId !== \"your_vapi_assistant_id_here\") {\n        // Start with ID and Override Prompt for languages\n        vapiRef.current.start(assistantId, {\n          model: {\n            messages: [\n              {\n                role: \"system\",\n                content: systemPrompt\n              }\n            ]\n          }\n        });\n      } else {\n        // Transient Assistant (Fallback if no ID)\n        vapiRef.current.start({\n          name: \"Maya Web\",\n          firstMessage: \"Hello, I am Maya from Star Hospital. How can I help you regarding your health today?\",\n          transcriber: {\n            provider: \"deepgram\",\n            model: \"nova-2\",\n            language: \"multi\"\n          },\n          voice: {\n            provider: \"11labs\",\n            voiceId: \"sarah\"\n          },\n          model: {\n            provider: \"openai\",\n            model: \"gpt-4o-mini\",\n            messages: [\n              {\n                role: \"system\",\n                content: systemPrompt\n              }\n            ]\n          }\n        });\n      }\n    }\n  };\n\n  // Don't render chatbot if user is not authenticated\n  if (!user) {\n    return null;\n  }\n\n  const speak = (text: string) => {\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel(); // Cancel any current speech\n      const utterance = new SpeechSynthesisUtterance(text);\n      const voices = window.speechSynthesis.getVoices();\n\n      let voice = null;\n      if (language === 'hi') {\n        voice = voices.find(v => v.lang.includes('hi') || v.name.includes('Hindi'));\n      } else if (language === 'mr') {\n        voice = voices.find(v => v.lang.includes('mr') || v.name.includes('Marathi'));\n      } else {\n        voice = voices.find(v => v.name.includes('Female') || v.name.includes('Samantha') || v.name.includes('Google US English'));\n      }\n\n      if (voice) utterance.voice = voice;\n      // If specific language voice not found, it will use default, which is acceptable fallback\n\n      utterance.onstart = () => setIsSpeaking(true);\n      utterance.onend = () => setIsSpeaking(false);\n      window.speechSynthesis.speak(utterance);\n    } else {\n      toast({\n        title: \"Text-to-Speech not supported\",\n        description: \"Your browser doesn't support voice output.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const startListening = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n\n    if (SpeechRecognition) {\n      const recognition = new SpeechRecognition();\n      recognition.onstart = () => setIsListening(true);\n      recognition.onend = () => setIsListening(false);\n      recognition.onresult = (event: any) => {\n        const transcript = event.results[0][0].transcript;\n        setInput(transcript);\n      };\n      recognition.start();\n    } else {\n      toast({\n        title: \"Speech Recognition not supported\",\n        description: \"Your browser doesn't support voice input.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n\n\n  const [bookingState, setBookingState] = useState<{ step: 'none' | 'doctor_name'; data?: any }>({ step: 'none' });\n\n  const getResponse = (input: string, lang: \"en\" | \"hi\" | \"mr\") => {\n    const lowerInput = input.toLowerCase();\n\n    // DICTIONARY FOR RESPONSES\n    const responses = {\n      en: {\n        greeting: \"Hello! I'm Maya, your Medicare assistant. How can I help you regarding your health or our hospital services today?\",\n        appointment: \"I can help you book an appointment. Which doctor would you like to consult?\",\n        doctor: \"We have world-class specialists. Please tell me the name of the doctor you are looking for.\",\n        report: \"Your medical reports are secure with us. You can access and download them from the 'Reports' tab. Do you want me to find a specific report?\",\n        billing: \"You can track all your payments and insurance claims in the 'Billing' section.\",\n        emergency: \"ðŸš¨ EMERGENCY ALERT: If this is a life-threatening emergency, please call 102 or our Hotline at +91-123-456-7890 IMMEDIATELY.\",\n        default: \"I'm listening. Could you please provide more details so I can assist you better?\"\n      },\n      hi: {\n        greeting: \"à¤¨à¤®à¤¸à¥à¤¤à¥‡! à¤®à¥ˆà¤‚ à¤®à¤¾à¤¯à¤¾ à¤¹à¥‚à¤, à¤†à¤ªà¤•à¥€ à¤®à¥‡à¤¡à¤¿à¤•à¥‡à¤¯à¤° à¤¸à¤¹à¤¾à¤¯à¤•à¥¤ à¤†à¤œ à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤¯à¤¾ à¤…à¤¸à¥à¤ªà¤¤à¤¾à¤² à¤¸à¥‡à¤µà¤¾à¤“à¤‚ à¤•à¥‡ à¤¸à¤‚à¤¬à¤‚à¤§ à¤®à¥‡à¤‚ à¤•à¥ˆà¤¸à¥‡ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¥€ à¤¹à¥‚à¤?\",\n        appointment: \"à¤®à¥ˆà¤‚ à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ à¤¬à¥à¤• à¤•à¤°à¤¨à¥‡ à¤®à¥‡à¤‚ à¤†à¤ªà¤•à¥€ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¥€ à¤¹à¥‚à¤à¥¤ à¤†à¤ª à¤•à¤¿à¤¸ à¤¡à¥‰à¤•à¥à¤Ÿà¤° à¤¸à¥‡ à¤ªà¤°à¤¾à¤®à¤°à¥à¤¶ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¥‡à¤‚à¤—à¥‡?\",\n        doctor: \"à¤¹à¤®à¤¾à¤°à¥‡ à¤ªà¤¾à¤¸ à¤µà¤¿à¤¶à¥à¤µ à¤¸à¥à¤¤à¤°à¥€à¤¯ à¤µà¤¿à¤¶à¥‡à¤·à¤œà¥à¤ž à¤¹à¥ˆà¤‚à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤®à¥à¤à¥‡ à¤‰à¤¸ à¤¡à¥‰à¤•à¥à¤Ÿà¤° à¤•à¤¾ à¤¨à¤¾à¤® à¤¬à¤¤à¤¾à¤à¤‚ à¤œà¤¿à¤¸à¥‡ à¤†à¤ª à¤¢à¥‚à¤‚à¤¢ à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚à¥¤\",\n        report: \"à¤†à¤ªà¤•à¥€ à¤®à¥‡à¤¡à¤¿à¤•à¤² à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤¹à¤®à¤¾à¤°à¥‡ à¤ªà¤¾à¤¸ à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤¹à¥ˆà¤‚à¥¤\",\n        billing: \"à¤†à¤ª 'à¤¬à¤¿à¤²à¤¿à¤‚à¤—' à¤…à¤¨à¥à¤­à¤¾à¤— à¤®à¥‡à¤‚ à¤…à¤ªà¤¨à¥‡ à¤¸à¤­à¥€ à¤­à¥à¤—à¤¤à¤¾à¤¨ à¤Ÿà¥à¤°à¥ˆà¤• à¤•à¤° à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤\",\n        emergency: \"ðŸš¨ à¤†à¤ªà¤¾à¤¤à¤•à¤¾à¤²à¥€à¤¨ à¤šà¥‡à¤¤à¤¾à¤µà¤¨à¥€: à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¤à¥à¤°à¤‚à¤¤ 102 à¤ªà¤° à¤•à¥‰à¤² à¤•à¤°à¥‡à¤‚à¥¤\",\n        default: \"à¤®à¥ˆà¤‚ à¤¸à¥à¤¨ à¤°à¤¹à¥€ à¤¹à¥‚à¤à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤§à¤¿à¤• à¤µà¤¿à¤µà¤°à¤£ à¤¦à¥‡à¤‚à¥¤\"\n      },\n      mr: {\n        greeting: \"à¤¨à¤®à¤¸à¥à¤•à¤¾à¤°! à¤®à¥€ à¤®à¤¾à¤¯à¤¾ à¤†à¤¹à¥‡. à¤®à¥€ à¤¤à¥à¤®à¥à¤¹à¤¾à¤²à¤¾ à¤•à¤¶à¥€ à¤®à¤¦à¤¤ à¤•à¤°à¥‚ à¤¶à¤•à¤¤à¥‡?\",\n        appointment: \"à¤®à¥€ à¤¤à¥à¤®à¥à¤¹à¤¾à¤²à¤¾ à¤…à¤ªà¥‰à¤‡à¤‚à¤Ÿà¤®à¥‡à¤‚à¤Ÿ à¤¬à¥à¤• à¤•à¤°à¤£à¥à¤¯à¤¾à¤¤ à¤®à¤¦à¤¤ à¤•à¤°à¥‚ à¤¶à¤•à¤¤à¥‡. à¤¤à¥à¤®à¥à¤¹à¤¾à¤²à¤¾ à¤•à¥‹à¤£à¤¤à¥à¤¯à¤¾ à¤¡à¥‰à¤•à¥à¤Ÿà¤°à¤¾à¤‚à¤šà¤¾ à¤¸à¤²à¥à¤²à¤¾ à¤˜à¥à¤¯à¤¾à¤¯à¤šà¤¾ à¤†à¤¹à¥‡?\",\n        doctor: \"à¤†à¤®à¤šà¥à¤¯à¤¾à¤•à¤¡à¥‡ à¤œà¤¾à¤—à¤¤à¤¿à¤• à¤¦à¤°à¥à¤œà¤¾à¤šà¥‡ à¤¤à¤œà¥à¤ž à¤†à¤¹à¥‡à¤¤. à¤•à¥ƒà¤ªà¤¯à¤¾ à¤®à¤²à¤¾ à¤¤à¥à¤¯à¤¾ à¤¡à¥‰à¤•à¥à¤Ÿà¤°à¤¾à¤‚à¤šà¥‡ à¤¨à¤¾à¤µ à¤¸à¤¾à¤‚à¤—à¤¾ à¤œà¥à¤¯à¤¾à¤‚à¤¨à¤¾ à¤¤à¥à¤®à¥à¤¹à¥€ à¤¶à¥‹à¤§à¤¤ à¤†à¤¹à¤¾à¤¤.\",\n        report: \"à¤¤à¥à¤®à¤šà¥‡ à¤µà¥ˆà¤¦à¥à¤¯à¤•à¥€à¤¯ à¤…à¤¹à¤µà¤¾à¤² à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤†à¤¹à¥‡à¤¤.\",\n        billing: \"à¤¤à¥à¤®à¥à¤¹à¥€ 'à¤¬à¤¿à¤²à¤¿à¤‚à¤—' à¤µà¤¿à¤­à¤¾à¤—à¤¾à¤¤ à¤¤à¥à¤®à¤šà¥‡ à¤ªà¥‡à¤®à¥‡à¤‚à¤Ÿ à¤ªà¤¾à¤¹à¥‚ à¤¶à¤•à¤¤à¤¾.\",\n        emergency: \"ðŸš¨ à¤¤à¤¾à¤¤à¤¡à¥€à¤šà¥€ à¤¸à¥‚à¤šà¤¨à¤¾: à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¤à¥à¤µà¤°à¤¿à¤¤ à¥§à¥¦à¥¨ à¤µà¤° à¤•à¥‰à¤² à¤•à¤°à¤¾.\",\n        default: \"à¤®à¥€ à¤à¤•à¤¤ à¤†à¤¹à¥‡. à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤§à¤¿à¤• à¤¤à¤ªà¤¶à¥€à¤² à¤¦à¥à¤¯à¤¾.\"\n      }\n    };\n\n    const r = responses[lang];\n\n    if (lowerInput.match(/\\b(hi|hello|hey|namaste|namaskar|greetings)\\b/)) return r.greeting;\n    if (lowerInput.includes(\"appointment\") || lowerInput.includes(\"book\") || lowerInput.includes(\"schedule\")) return \"APPOINTMENT_TRIGGER\";\n    if (lowerInput.includes(\"doctor\") || lowerInput.includes(\"specialist\")) return r.doctor;\n    if (lowerInput.includes(\"report\") || lowerInput.includes(\"result\")) return r.report;\n    if (lowerInput.includes(\"bill\") || lowerInput.includes(\"payment\")) return r.billing;\n    if (lowerInput.includes(\"emergency\") || lowerInput.includes(\"urgent\")) return r.emergency;\n\n    return r.default;\n  };\n\n  const processDoctorSearch = async (doctorName: string) => {\n    try {\n      const { data: doctors, error } = await supabase\n        .from('doctors')\n        .select('*')\n        .ilike('name', `%${doctorName}%`);\n\n      if (error || !doctors || doctors.length === 0) {\n        return { found: false, message: \"I couldn't find a doctor by that name. Please check the spelling or try another name.\" };\n      }\n\n      const doctor = doctors[0]; // Take the first match\n\n      if (doctor.available) {\n        // Simulate confirming appointment\n        // In a real app, we would ask for date/time and insert into 'appointments' table\n        const confirmationMsg = `Great news! Dr. ${doctor.name} is available. Your appointment has been confirmed for the next available slot.`;\n        return { found: true, message: confirmationMsg };\n      } else {\n        // Suggest next slot (Mock logic)\n        const nextSlot = \"tomorrow at 10:00 AM\"; // Mock\n        const busyMsg = `Sorry, Dr. ${doctor.name} is currently unavailable/on leave. The next available slot is ${nextSlot}. Would you like to book that?`;\n        return { found: true, message: busyMsg };\n      }\n\n    } catch (e) {\n      return { found: false, message: \"I'm having trouble connecting to the schedule database right now.\" };\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!input.trim() || isLoading) return;\n\n    const trimmedInput = input.trim().slice(0, MAX_MESSAGE_LENGTH);\n    const userMessage: Message = { role: \"user\", content: trimmedInput };\n\n    setMessages((prev) => [...prev, userMessage]);\n    setInput(\"\");\n    setIsLoading(true);\n\n    // AI/Logic Processing\n    try {\n      let responseText = \"\";\n\n      // Check if we are in a booking flow\n      if (bookingState.step === 'doctor_name') {\n        const result = await processDoctorSearch(trimmedInput);\n        responseText = result.message;\n        setBookingState({ step: 'none' }); // Reset after attempt\n      } else {\n        // Standard Response Check\n        const initialResponse = getResponse(trimmedInput, language);\n\n        if (initialResponse === \"APPOINTMENT_TRIGGER\") {\n          responseText = language === 'en' ? \"Sure, I can help. Which doctor would you like to see?\" :\n            (language === 'hi' ? \"à¤œà¤¼à¤°à¥‚à¤°, à¤®à¥ˆà¤‚ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¥€ à¤¹à¥‚à¤à¥¤ à¤†à¤ª à¤•à¤¿à¤¸ à¤¡à¥‰à¤•à¥à¤Ÿà¤° à¤•à¥‹ à¤¦à¤¿à¤–à¤¾à¤¨à¤¾ à¤šà¤¾à¤¹à¥‡à¤‚à¤—à¥‡?\" : \"à¤¹à¥‹ à¤¨à¤•à¥à¤•à¥€à¤š. à¤¤à¥à¤®à¥à¤¹à¤¾à¤²à¤¾ à¤•à¥‹à¤£à¤¤à¥à¤¯à¤¾ à¤¡à¥‰à¤•à¥à¤Ÿà¤°à¤¾à¤‚à¤•à¤¡à¥‡ à¤œà¤¾à¤¯à¤šà¥‡ à¤†à¤¹à¥‡?\");\n          setBookingState({ step: 'doctor_name' });\n        } else {\n          responseText = initialResponse;\n        }\n      }\n\n      setTimeout(() => {\n        setMessages((prev) => [...prev, { role: \"assistant\", content: responseText }]);\n        setIsLoading(false);\n        speak(responseText);\n      }, 800);\n\n    } catch (error) {\n      console.error(error);\n      setIsLoading(false);\n    }\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  return (\n    <>\n      {/* Chat Toggle Button */}\n      <Button\n        onClick={() => setIsOpen(!isOpen)}\n        className={cn(\n          \"fixed bottom-6 right-6 z-50 h-16 w-16 rounded-full shadow-xl transition-all duration-300 hover:scale-110 border-4 border-white dark:border-gray-800\",\n          isOpen ? \"bg-red-500 hover:bg-red-600 rotate-90\" : \"bg-gradient-to-tr from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 animate-pulse\"\n        )}\n      >\n        {isOpen ? <X className=\"w-8 h-8 text-white\" /> : (\n          <div className=\"relative\">\n            <Bot className=\"w-8 h-8 text-white\" />\n            <span className=\"absolute top-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white\"></span>\n          </div>\n        )}\n      </Button>\n\n      {/* Chat Window */}\n      <div\n        className={cn(\n          \"fixed bottom-28 right-6 z-50 w-[380px] bg-card rounded-3xl shadow-2xl border border-border/50 overflow-hidden transition-all duration-500 origin-bottom-right backdrop-blur-xl\",\n          isOpen ? \"opacity-100 scale-100 translate-y-0\" : \"opacity-0 scale-95 translate-y-10 pointer-events-none\"\n        )}\n      >\n        {/* Header */}\n        <div className=\"bg-gradient-to-r from-pink-500 to-purple-600 px-6 py-4 flex items-center gap-4\">\n          <div className=\"w-12 h-12 rounded-full bg-white/20 flex items-center justify-center border-2 border-white/30 backdrop-blur-md shadow-inner relative overflow-hidden group\">\n            {/* Simple CSS animated face */}\n            <div className=\"w-full h-full flex items-center justify-center relative\">\n              <div className=\"w-2 h-2 bg-white rounded-full absolute left-3 top-4 animate-blink\"></div>\n              <div className=\"w-2 h-2 bg-white rounded-full absolute right-3 top-4 animate-blink\"></div>\n              <div className=\"w-4 h-2 border-b-2 border-white rounded-full absolute bottom-3\"></div>\n            </div>\n          </div>\n          <div>\n            <h3 className=\"font-heading font-bold text-white text-lg\">MAYA AI</h3>\n            <p className=\"text-xs text-white/80\">Always here to help</p>\n          </div>\n          <div className=\"ml-auto flex items-center gap-2\">\n            <select\n              className=\"bg-white/20 text-white text-xs rounded border-none p-1 focus:ring-0 cursor-pointer\"\n              value={language}\n              onChange={(e) => setLanguage(e.target.value as \"en\" | \"hi\" | \"mr\")}\n            >\n              <option value=\"en\" className=\"text-black\">English</option>\n              <option value=\"hi\" className=\"text-black\">à¤¹à¤¿à¤‚à¤¦à¥€</option>\n              <option value=\"mr\" className=\"text-black\">à¤®à¤°à¤¾à¤ à¥€</option>\n            </select>\n            <Button size=\"icon\" variant=\"ghost\" className=\"h-8 w-8 text-white hover:bg-white/20 rounded-full\" onClick={() => window.speechSynthesis.cancel()}>\n              <Volume2 className={cn(\"w-4 h-4\", isSpeaking && \"animate-pulse text-yellow-300\")} />\n            </Button>\n          </div>\n        </div>\n\n        {/* Messages */}\n        <ScrollArea className=\"h-[400px] p-4 bg-muted/30\" ref={scrollRef}>\n          <div className=\"space-y-4\">\n            {messages.map((message, index) => (\n              <div\n                key={index}\n                className={cn(\n                  \"flex gap-3\",\n                  message.role === \"user\" ? \"justify-end\" : \"justify-start\"\n                )}\n              >\n                {message.role === \"assistant\" && (\n                  <div className=\"w-8 h-8 rounded-full bg-gradient-to-tr from-pink-500 to-purple-600 flex items-center justify-center flex-shrink-0 mt-1 shadow-md\">\n                    <Bot className=\"w-4 h-4 text-white\" />\n                  </div>\n                )}\n                <div\n                  className={cn(\n                    \"max-w-[80%] rounded-2xl px-4 py-3 text-sm shadow-sm\",\n                    message.role === \"user\"\n                      ? \"bg-primary text-primary-foreground rounded-br-none\"\n                      : \"bg-white dark:bg-gray-800 text-foreground rounded-bl-none border border-border/50\"\n                  )}\n                >\n                  {message.content}\n                </div>\n                {message.role === \"user\" && (\n                  <div className=\"w-8 h-8 rounded-full bg-secondary flex items-center justify-center flex-shrink-0 mt-1\">\n                    <User className=\"w-4 h-4 text-secondary-foreground\" />\n                  </div>\n                )}\n              </div>\n            ))}\n            {isLoading && (\n              <div className=\"flex gap-3 justify-start\">\n                <div className=\"w-8 h-8 rounded-full bg-gradient-to-tr from-pink-500 to-purple-600 flex items-center justify-center flex-shrink-0 shadow-md\">\n                  <Bot className=\"w-4 h-4 text-white\" />\n                </div>\n                <div className=\"bg-white dark:bg-gray-800 rounded-2xl rounded-bl-none px-4 py-3 border border-border/50 shadow-sm\">\n                  <div className=\"flex gap-1\">\n                    <span className=\"w-2 h-2 bg-pink-500 rounded-full animate-bounce delay-0\"></span>\n                    <span className=\"w-2 h-2 bg-purple-500 rounded-full animate-bounce delay-150\"></span>\n                    <span className=\"w-2 h-2 bg-indigo-500 rounded-full animate-bounce delay-300\"></span>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </ScrollArea>\n\n\n        {/* Suggestions */}\n        <div className=\"px-4 py-2 bg-background flex gap-2 overflow-x-auto no-scrollbar scroll-smooth\">\n          {[\n            \"Book Appointment\",\n            \"View Reports\",\n            \"Insurance Info\",\n            \"Visiting Hours\",\n            \"Emergency Contact\"\n          ].map((suggestion) => (\n            <Button\n              key={suggestion}\n              variant=\"secondary\"\n              size=\"sm\"\n              className=\"whitespace-nowrap rounded-full text-xs h-7 bg-muted hover:bg-primary/10 hover:text-primary transition-colors border border-border/50\"\n              onClick={() => setInput(suggestion)}\n            >\n              {suggestion}\n            </Button>\n          ))}\n        </div>\n\n        {/* Whatsapp & Input */}\n        <div className=\"p-4 bg-background border-t border-border pt-2\">\n          {import.meta.env.VITE_VAPI_PHONE_NUMBER_ID && import.meta.env.VITE_HOSPITAL_PHONE_NUMBER && (\n            <div className=\"mb-3 p-2 bg-blue-50 border border-blue-100 rounded-lg flex items-center gap-3 text-xs text-blue-800\">\n              <Phone className=\"w-4 h-4 text-blue-600\" />\n              <div>\n                <p className=\"font-semibold\">Call us directly:</p>\n                <p>{import.meta.env.VITE_HOSPITAL_PHONE_NUMBER}</p>\n              </div>\n            </div>\n          )}\n\n          {messages.length > 2 && (\n            <a\n              href=\"https://wa.me/3135409338\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n              className=\"flex items-center justify-center gap-2 w-full mb-3 py-2 text-xs font-medium text-emerald-600 bg-emerald-50 hover:bg-emerald-100 rounded-lg transition-colors border border-emerald-200\"\n            >\n              <Phone className=\"w-3 h-3\" />\n              Chat with us on WhatsApp\n            </a>\n          )}\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={startListening}\n              className={cn(\"shrink-0 rounded-full\", isListening && \"border-red-500 text-red-500 animate-pulse\")}\n              title=\"Voice Typing\"\n            >\n              <Mic className=\"w-4 h-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              size=\"icon\"\n              onClick={toggleVapiCall}\n              className={cn(\"shrink-0 rounded-full transition-all duration-300\", isCallActive ? \"bg-red-500 text-white hover:bg-red-600 animate-pulse\" : \"border-green-500 text-green-600 hover:bg-green-50\")}\n              title=\"Start Voice Call\"\n            >\n              {isCallActive ? <PhoneCall className=\"w-4 h-4\" /> : <Phone className=\"w-4 h-4\" />}\n            </Button>\n            <Input\n              value={input}\n              onChange={(e) => setInput(e.target.value.slice(0, MAX_MESSAGE_LENGTH))}\n              onKeyDown={handleKeyPress}\n              placeholder=\"Type your message...\"\n              disabled={isLoading}\n              className=\"flex-1 rounded-full px-4\"\n              maxLength={MAX_MESSAGE_LENGTH}\n            />\n            <Button onClick={sendMessage} disabled={isLoading || !input.trim()} size=\"icon\" className=\"shrink-0 rounded-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700\">\n              <Send className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default MayaChatbot;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\dashboard\\AICalculator.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":12,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[614,617],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[614,617],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":28,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1162,1165],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1162,1165],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":40,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1532,1535],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1532,1535],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1805,1808],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1805,1808],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":26,"suggestions":[{"fix":{"range":[1825,1868],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Loader2, Calculator, Search } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\n\r\nconst AICalculator = () => {\r\n    const [patientName, setPatientName] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [result, setResult] = useState<{ total: number; count: number; transactions: any[] } | null>(null);\r\n\r\n    const handleCalculate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!patientName.trim()) {\r\n            toast.error(\"Please enter a patient name\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setResult(null);\r\n\r\n        try {\r\n            // Find patient transactions\r\n            // Note: In a real app we might match by ID, but requirement says \"whose name is asked\"\r\n            const { data, error } = await supabase\r\n                .from('transactions' as any)\r\n                .select('*')\r\n                .ilike('patient_name', `%${patientName}%`);\r\n\r\n            if (error) throw error;\r\n\r\n            if (!data || data.length === 0) {\r\n                toast.info(\"No transactions found for this patient.\");\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            const total = (data as any[]).reduce((sum, t) => sum + Number(t.amount), 0);\r\n            setResult({\r\n                total,\r\n                count: data.length,\r\n                transactions: data\r\n            });\r\n            toast.success(\"Calculation complete!\");\r\n\r\n        } catch (error: any) {\r\n            console.error(\"Calculation error:\", error);\r\n            toast.error(\"Failed to calculate amount\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Card className=\"w-full max-w-2xl mx-auto\">\r\n            <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                    <Calculator className=\"h-6 w-6 text-primary\" />\r\n                    AI Transaction Calculator\r\n                </CardTitle>\r\n                <CardDescription>\r\n                    Enter a patient's name to calculate their total transaction amount instantly.\r\n                </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <form onSubmit={handleCalculate} className=\"flex gap-4 mb-6\">\r\n                    <Input\r\n                        placeholder=\"Patient Name (e.g. John Doe)\"\r\n                        value={patientName}\r\n                        onChange={(e) => setPatientName(e.target.value)}\r\n                        className=\"flex-1\"\r\n                    />\r\n                    <Button type=\"submit\" disabled={loading}>\r\n                        {loading ? <Loader2 className=\"h-4 w-4 animate-spin mr-2\" /> : <Search className=\"h-4 w-4 mr-2\" />}\r\n                        Calculate\r\n                    </Button>\r\n                </form>\r\n\r\n                {result && (\r\n                    <div className=\"bg-muted p-4 rounded-lg space-y-4 animate-in fade-in slide-in-from-bottom-2\">\r\n                        <div className=\"flex justify-between items-center border-b pb-4\">\r\n                            <div>\r\n                                <p className=\"text-sm text-muted-foreground\">Total Transactions Found</p>\r\n                                <p className=\"text-2xl font-bold\">{result.count}</p>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                                <p className=\"text-sm text-muted-foreground\">Total Amount Due</p>\r\n                                <p className=\"text-3xl font-bold text-green-600\">${result.total.toFixed(2)}</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <p className=\"font-semibold mb-2 text-sm\">Transaction History</p>\r\n                            <div className=\"space-y-2 max-h-40 overflow-y-auto pr-2\">\r\n                                {result.transactions.map((t) => (\r\n                                    <div key={t.id} className=\"flex justify-between text-sm p-2 bg-background rounded border\">\r\n                                        <span>{t.description || 'Generic Transaction'}</span>\r\n                                        <div className=\"flex gap-4\">\r\n                                            <span className=\"text-muted-foreground\">{new Date(t.created_at).toLocaleDateString()}</span>\r\n                                            <span className=\"font-medium\">${Number(t.amount).toFixed(2)}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default AICalculator;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\dashboard\\AppointmentsList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'User' is defined but never used.","line":1,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Clock, User, Stethoscope } from \"lucide-react\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { cn } from \"@/lib/utils\";\n\nconst appointments = [\n  {\n    id: 1,\n    patient: \"John Smith\",\n    doctor: \"Dr. Sarah Wilson\",\n    time: \"09:00 AM\",\n    type: \"General Checkup\",\n    status: \"confirmed\",\n  },\n  {\n    id: 2,\n    patient: \"Emily Davis\",\n    doctor: \"Dr. Michael Chen\",\n    time: \"10:30 AM\",\n    type: \"Cardiology\",\n    status: \"pending\",\n  },\n  {\n    id: 3,\n    patient: \"Robert Johnson\",\n    doctor: \"Dr. Lisa Anderson\",\n    time: \"11:00 AM\",\n    type: \"Orthopedics\",\n    status: \"confirmed\",\n  },\n  {\n    id: 4,\n    patient: \"Maria Garcia\",\n    doctor: \"Dr. James Miller\",\n    time: \"02:00 PM\",\n    type: \"Neurology\",\n    status: \"in-progress\",\n  },\n  {\n    id: 5,\n    patient: \"David Brown\",\n    doctor: \"Dr. Sarah Wilson\",\n    time: \"03:30 PM\",\n    type: \"General Checkup\",\n    status: \"confirmed\",\n  },\n];\n\nconst statusStyles = {\n  confirmed: \"bg-success/10 text-success border-success/20\",\n  pending: \"bg-warning/10 text-warning border-warning/20\",\n  \"in-progress\": \"bg-info/10 text-info border-info/20\",\n  cancelled: \"bg-destructive/10 text-destructive border-destructive/20\",\n};\n\nconst AppointmentsList = () => {\n  return (\n    <div className=\"bg-card rounded-xl card-shadow border border-border/50 animate-fade-in\">\n      <div className=\"p-6 border-b border-border\">\n        <h3 className=\"text-lg font-heading font-semibold text-foreground\">\n          Today's Appointments\n        </h3>\n        <p className=\"text-sm text-muted-foreground mt-1\">\n          {appointments.length} appointments scheduled\n        </p>\n      </div>\n      <div className=\"divide-y divide-border\">\n        {appointments.map((apt) => (\n          <div\n            key={apt.id}\n            className=\"p-4 hover:bg-muted/50 transition-colors duration-200\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <Avatar className=\"w-10 h-10\">\n                  <AvatarFallback className=\"bg-secondary text-secondary-foreground text-sm font-medium\">\n                    {apt.patient\n                      .split(\" \")\n                      .map((n) => n[0])\n                      .join(\"\")}\n                  </AvatarFallback>\n                </Avatar>\n                <div>\n                  <p className=\"font-medium text-foreground\">{apt.patient}</p>\n                  <div className=\"flex items-center gap-2 mt-1\">\n                    <Stethoscope className=\"w-3 h-3 text-muted-foreground\" />\n                    <span className=\"text-sm text-muted-foreground\">\n                      {apt.doctor}\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"flex items-center gap-1 text-sm text-foreground\">\n                  <Clock className=\"w-3 h-3\" />\n                  {apt.time}\n                </div>\n                <Badge\n                  variant=\"outline\"\n                  className={cn(\"mt-1 capitalize\", statusStyles[apt.status as keyof typeof statusStyles])}\n                >\n                  {apt.status}\n                </Badge>\n              </div>\n            </div>\n            <div className=\"mt-2\">\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {apt.type}\n              </Badge>\n            </div>\n          </div>\n        ))}\n      </div>\n      <div className=\"p-4 border-t border-border\">\n        <button className=\"w-full text-center text-sm font-medium text-primary hover:text-primary/80 transition-colors\">\n          View All Appointments â†’\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default AppointmentsList;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\dashboard\\DepartmentStatus.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\dashboard\\QuickActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\dashboard\\RecentPatients.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\dashboard\\StatCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\forms\\InsuranceClaimForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Textarea' is defined but never used.","line":11,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardFooter' is defined but never used.","line":28,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":56},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":84,"column":21,"nodeType":"MemberExpression","messageId":"unexpected","endLine":84,"endColumn":33,"suggestions":[{"fix":{"range":[2878,2949],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":26,"suggestions":[{"fix":{"range":[3531,3552],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Shield, Upload, CheckCircle } from \"lucide-react\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n    FormDescription,\r\n} from \"@/components/ui/form\";\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { useToast } from \"@/components/ui/use-toast\";\r\n\r\nconst claimSchema = z.object({\r\n    provider: z.string().min(1, \"Please select an insurance provider\"),\r\n    policy_number: z.string().min(5, \"Policy number is required\"),\r\n    patient_name: z.string().min(2, \"Patient name is required\"),\r\n    diagnosis: z.string().min(5, \"Diagnosis is required\"),\r\n    claim_amount: z.coerce.number().min(1, \"Amount is required\"),\r\n    notes: z.string().optional(),\r\n});\r\n\r\ntype ClaimFormData = z.infer<typeof claimSchema>;\r\n\r\nconst validProviders = [\r\n    \"Star Health\",\r\n    \"HDFC Ergo\",\r\n    \"ICICI Lombard\",\r\n    \"Max Bupa\",\r\n    \"Care Health\",\r\n    \"Niva Bupa\"\r\n];\r\n\r\nconst InsuranceClaimForm = () => {\r\n    const { toast } = useToast();\r\n    const [isSuccess, setIsSuccess] = useState(false);\r\n\r\n    const form = useForm<ClaimFormData>({\r\n        resolver: zodResolver(claimSchema),\r\n        defaultValues: {\r\n            provider: \"\",\r\n            policy_number: \"\",\r\n            patient_name: \"\",\r\n            diagnosis: \"\",\r\n            claim_amount: 0,\r\n            notes: \"\",\r\n        },\r\n    });\r\n\r\n    const submitClaim = useMutation({\r\n        mutationFn: async (data: ClaimFormData) => {\r\n            // In a real app, this would upload files and insert into 'insurance_claims' table\r\n            // For now, we simulate the request\r\n            const { error } = await supabase.from('insurance_claims').insert({\r\n                provider: data.provider,\r\n                policy_number: data.policy_number,\r\n                patient_name: data.patient_name,\r\n                diagnosis: data.diagnosis,\r\n                amount: data.claim_amount,\r\n                status: 'pending',\r\n                notes: data.notes\r\n            });\r\n\r\n            if (error) {\r\n                // If table doesn't exist, we fallback to a mock success for the demo\r\n                if (error.code === '42P01') { // undefined_table\r\n                    console.warn(\"Table insurance_claims does not exist, mocking success\");\r\n                    await new Promise(resolve => setTimeout(resolve, 1000));\r\n                    return;\r\n                }\r\n                throw error;\r\n            }\r\n        },\r\n        onSuccess: () => {\r\n            setIsSuccess(true);\r\n            toast({\r\n                title: \"Claim Submitted Successfully\",\r\n                description: \"Your insurance claim has been received and is under review.\",\r\n                className: \"bg-green-50 border-green-200\",\r\n            });\r\n            form.reset();\r\n        },\r\n        onError: (error: Error) => {\r\n            console.error(error);\r\n            toast({\r\n                title: \"Submission Pending\",\r\n                description: \"We've received your data locally. (Backend table might be missing)\",\r\n                variant: \"default\"\r\n            });\r\n            // Allow success state for demo purposes even if backend fails\r\n            setIsSuccess(true);\r\n        },\r\n    });\r\n\r\n    const onSubmit = (data: ClaimFormData) => {\r\n        submitClaim.mutate(data);\r\n    };\r\n\r\n    if (isSuccess) {\r\n        return (\r\n            <Card className=\"border-green-200 bg-green-50/50\">\r\n                <CardContent className=\"pt-6 flex flex-col items-center justify-center text-center space-y-4\">\r\n                    <div className=\"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center\">\r\n                        <CheckCircle className=\"w-8 h-8 text-green-600\" />\r\n                    </div>\r\n                    <div>\r\n                        <h3 className=\"text-xl font-bold text-green-800\">Claim Applied Successfully!</h3>\r\n                        <p className=\"text-green-700 max-w-xs mx-auto\">\r\n                            Check your email for the claim reference number. Our team will verify your documents within 24-48 hours.\r\n                        </p>\r\n                    </div>\r\n                    <Button\r\n                        variant=\"outline\"\r\n                        className=\"border-green-200 text-green-700 hover:bg-green-100 hover:text-green-800\"\r\n                        onClick={() => setIsSuccess(false)}\r\n                    >\r\n                        Submit Another Claim\r\n                    </Button>\r\n                </CardContent>\r\n            </Card>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Card>\r\n            <CardHeader>\r\n                <CardTitle className=\"flex items-center gap-2\">\r\n                    <Shield className=\"h-5 w-5 text-primary\" />\r\n                    Apply for Cashless Insurance\r\n                </CardTitle>\r\n                <CardDescription>\r\n                    Submit your insurance details for cashless treatment approval.\r\n                </CardDescription>\r\n            </CardHeader>\r\n            <CardContent>\r\n                <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"provider\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Insurance Provider *</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select Provider\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            {validProviders.map((p) => (\r\n                                                <SelectItem key={p} value={p}>{p}</SelectItem>\r\n                                            ))}\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"policy_number\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Policy Number *</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"e.g. POL-123456789\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"patient_name\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Patient Name *</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"Patient Full Name\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        </div>\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"diagnosis\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Diagnosis / Reason for Admission *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"e.g. Viral Fever, Surgery...\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"claim_amount\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Estimated Claim Amount (â‚¹) *</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input type=\"number\" placeholder=\"50000\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormDescription className=\"text-xs text-muted-foreground\">\r\n                                        Enter the estimated cost of treatment.\r\n                                    </FormDescription>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Upload Insurance Card / ID Proof</Label>\r\n                            <div className=\"border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center bg-muted/20 hover:bg-muted/40 transition-colors cursor-pointer text-muted-foreground\">\r\n                                <Upload className=\"w-8 h-8 mb-2\" />\r\n                                <span className=\"text-sm\">Click to upload (Simulation)</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Button type=\"submit\" className=\"w-full\" disabled={submitClaim.isPending}>\r\n                            {submitClaim.isPending ? \"Submitting...\" : \"Submit Claim Request\"}\r\n                        </Button>\r\n                    </form>\r\n                </Form>\r\n            </CardContent>\r\n        </Card>\r\n    );\r\n};\r\n\r\nexport default InsuranceClaimForm;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\landing\\DoctorCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\landing\\HowToUseSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\landing\\LoginPromptModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DialogHeader' is defined but never used.","line":3,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Button' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ShieldCheck' is defined but never used.","line":5,"column":45,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'cn' is defined but never used.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Users, Stethoscope, X, ArrowRight, ShieldCheck } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface LoginPromptModalProps {\n  delaySeconds?: number;\n}\n\nconst LoginPromptModal = ({ delaySeconds = 10 }: LoginPromptModalProps) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [hasBeenShown, setHasBeenShown] = useState(false);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Check if already shown in this session\n    const alreadyShown = sessionStorage.getItem('loginPromptShown');\n    if (alreadyShown) {\n      setHasBeenShown(true);\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      if (!hasBeenShown) {\n        setIsOpen(true);\n        setHasBeenShown(true);\n        sessionStorage.setItem('loginPromptShown', 'true');\n      }\n    }, delaySeconds * 1000);\n\n    return () => clearTimeout(timer);\n  }, [delaySeconds, hasBeenShown]);\n\n  const handleOptionClick = (path: string) => {\n    setIsOpen(false);\n    navigate(path);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogContent className=\"sm:max-w-[500px] border-none shadow-2xl bg-white/95 dark:bg-gray-900/95 backdrop-blur-md p-0 overflow-hidden rounded-2xl\">\n        {/* Close Button Override */}\n        <button\n          onClick={() => setIsOpen(false)}\n          className=\"absolute right-4 top-4 z-50 p-2 bg-black/5 dark:bg-white/10 rounded-full hover:bg-black/10 dark:hover:bg-white/20 transition-colors\"\n        >\n          <X className=\"h-4 w-4 text-muted-foreground\" />\n        </button>\n\n        <div className=\"flex flex-col\">\n          {/* Header Section */}\n          <div className=\"bg-gradient-to-br from-blue-600/10 to-purple-600/10 p-8 text-center pb-6\">\n            <div className=\"w-16 h-16 mx-auto bg-white rounded-2xl shadow-lg flex items-center justify-center mb-4 transition-transform hover:scale-105 duration-300\">\n              <img src=\"/logo.png\" alt=\"Medicare Logo\" className=\"w-10 h-10 object-contain\" />\n            </div>\n            <DialogTitle className=\"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 to-teal-600 dark:from-emerald-400 dark:to-teal-400 mb-2\">\n              Welcome to Medicare\n            </DialogTitle>\n            <DialogDescription className=\"text-muted-foreground max-w-sm mx-auto\">\n              Access personalized care, view reports, or manage hospital operations securely.\n            </DialogDescription>\n          </div>\n\n          {/* Selection Grid */}\n          <div className=\"p-6 grid grid-cols-2 gap-4\">\n            {/* Patient Card */}\n            <div\n              onClick={() => handleOptionClick('/patient/login')}\n              className=\"group cursor-pointer relative p-5 rounded-2xl border border-border/50 bg-card hover:bg-blue-50/50 dark:hover:bg-blue-900/20 hover:border-blue-200 dark:hover:border-blue-700 transition-all duration-300 hover:shadow-md\"\n            >\n              <div className=\"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform\">\n                <Users className=\"h-6 w-6\" />\n              </div>\n              <h3 className=\"font-semibold text-foreground mb-1\">Patient Portal</h3>\n              <p className=\"text-xs text-muted-foreground leading-snug mb-3\">\n                Book appointments & view medical records\n              </p>\n              <div className=\"flex items-center text-xs font-medium text-blue-600 dark:text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0 duration-300\">\n                Sign In <ArrowRight className=\"h-3 w-3 ml-1\" />\n              </div>\n            </div>\n\n            {/* Staff Card */}\n            <div\n              onClick={() => handleOptionClick('/staff/login')}\n              className=\"group cursor-pointer relative p-5 rounded-2xl border border-border/50 bg-card hover:bg-emerald-50/50 dark:hover:bg-emerald-900/20 hover:border-emerald-200 dark:hover:border-emerald-700 transition-all duration-300 hover:shadow-md\"\n            >\n              <div className=\"w-12 h-12 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform\">\n                <Stethoscope className=\"h-6 w-6\" />\n              </div>\n              <h3 className=\"font-semibold text-foreground mb-1\">Staff Portal</h3>\n              <p className=\"text-xs text-muted-foreground leading-snug mb-3\">\n                For doctors, nurses & hospital staff\n              </p>\n              <div className=\"flex items-center text-xs font-medium text-emerald-600 dark:text-emerald-400 opacity-0 group-hover:opacity-100 transition-opacity -translate-x-2 group-hover:translate-x-0 duration-300\">\n                Staff Login <ArrowRight className=\"h-3 w-3 ml-1\" />\n              </div>\n            </div>\n          </div>\n\n          {/* Footer Link */}\n          <div className=\"pb-6 text-center\">\n            <p className=\"text-sm text-muted-foreground\">\n              New patient?{\" \"}\n              <Link\n                to=\"/patient/register\"\n                onClick={() => setIsOpen(false)}\n                className=\"text-primary font-medium hover:underline hover:text-primary/80 transition-colors\"\n              >\n                Create an account\n              </Link>\n            </p>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default LoginPromptModal;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\landing\\NewsCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\layout\\DashboardLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\layout\\Header.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1438,1441],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1438,1441],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Search, ChevronDown, Menu } from \"lucide-react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Sheet, SheetContent, SheetTrigger } from \"@/components/ui/sheet\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { toast } from \"sonner\";\nimport NotificationDropdown from \"./NotificationDropdown\";\nimport Sidebar from \"./Sidebar\";\nimport { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface HeaderProps {\n  title: string;\n  subtitle?: string;\n}\n\nconst Header = ({ title, subtitle }: HeaderProps) => {\n  const { user, signOut } = useAuth();\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n\n  const { data: userRole } = useQuery({\n    queryKey: ['user-role-header', user?.id],\n    queryFn: async () => {\n      if (!user) return null;\n\n      const roles = ['admin', 'doctor', 'nurse', 'receptionist', 'cashier'];\n\n      for (const role of roles) {\n        const { data } = await supabase.rpc('has_role', {\n          _user_id: user.id,\n          _role: role as any\n        });\n        if (data) return role;\n      }\n      return 'patient';\n    },\n    enabled: !!user\n  });\n\n  const getRoleBadgeColor = (role: string) => {\n    switch (role) {\n      case 'admin': return 'bg-purple-100 text-purple-800 hover:bg-purple-200';\n      case 'doctor': return 'bg-blue-100 text-blue-800 hover:bg-blue-200';\n      case 'nurse': return 'bg-pink-100 text-pink-800 hover:bg-pink-200';\n      case 'cashier': return 'bg-emerald-100 text-emerald-800 hover:bg-emerald-200';\n      case 'receptionist': return 'bg-orange-100 text-orange-800 hover:bg-orange-200';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const handleLogout = async () => {\n    await signOut();\n    toast.success(\"Signed out successfully\");\n  };\n\n  const getInitials = () => {\n    if (!user?.email) return \"U\";\n    return user.email.charAt(0).toUpperCase();\n  };\n\n  const getDisplayName = () => {\n    const fullName = user?.user_metadata?.full_name;\n    if (fullName) return fullName;\n    if (user?.email) return user.email.split(\"@\")[0];\n    return \"User\";\n  };\n\n  return (\n    <header className=\"h-16 bg-card border-b border-border flex items-center justify-between px-4 lg:px-6\">\n      <div className=\"flex items-center gap-4\">\n        {/* Mobile Sidebar Toggle */}\n        <Sheet open={isSidebarOpen} onOpenChange={setIsSidebarOpen}>\n          <SheetTrigger asChild>\n            <Button variant=\"ghost\" size=\"icon\" className=\"lg:hidden\">\n              <Menu className=\"h-6 w-6\" />\n            </Button>\n          </SheetTrigger>\n          <SheetContent side=\"left\" className=\"p-0 border-r-0 w-64\">\n            <Sidebar className=\"h-full border-r-0\" onLinkClick={() => setIsSidebarOpen(false)} />\n          </SheetContent>\n        </Sheet>\n\n        {/* Title */}\n        <div>\n          <h1 className=\"text-xl font-heading font-semibold text-foreground\">\n            {title}\n          </h1>\n          {subtitle && (\n            <p className=\"text-sm text-muted-foreground hidden sm:block\">{subtitle}</p>\n          )}\n        </div>\n      </div>\n\n      {/* Right section */}\n      <div className=\"flex items-center gap-2 lg:gap-4\">\n        {/* Search */}\n        <div className=\"relative w-full max-w-[200px] hidden md:block\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search...\"\n            className=\"pl-10 bg-secondary border-0 h-9\"\n          />\n        </div>\n\n        {/* Notifications */}\n        <NotificationDropdown />\n\n        {/* User menu */}\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button variant=\"ghost\" className=\"flex items-center gap-2 px-2\">\n              <div className=\"text-right hidden md:block mr-2\">\n                <p className=\"text-sm font-medium leading-none\">{getDisplayName()}</p>\n                {userRole && (\n                  <Badge className={`mt-1 text-[10px] h-4 px-1.5 ${getRoleBadgeColor(userRole)}`}>\n                    {userRole.toUpperCase()}\n                  </Badge>\n                )}\n              </div>\n              <Avatar className=\"w-8 h-8\">\n                <AvatarImage src=\"\" />\n                <AvatarFallback className=\"bg-primary text-primary-foreground text-sm\">\n                  {getInitials()}\n                </AvatarFallback>\n              </Avatar>\n              <ChevronDown className=\"w-4 h-4 text-muted-foreground\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\" className=\"w-48\">\n            <DropdownMenuLabel className=\"font-normal\">\n              <div className=\"flex flex-col space-y-1\">\n                <p className=\"text-sm font-medium leading-none\">{getDisplayName()}</p>\n                <p className=\"text-xs leading-none text-muted-foreground\">\n                  {user?.email}\n                </p>\n                {userRole && (\n                  <Badge className={`w-fit mt-1 ${getRoleBadgeColor(userRole)}`}>{userRole}</Badge>\n                )}\n              </div>\n            </DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem onClick={() => window.location.href = '/settings'}>Profile</DropdownMenuItem>\n            <DropdownMenuItem onClick={() => window.location.href = '/settings'}>Settings</DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem className=\"text-destructive\" onClick={handleLogout}>\n              Logout\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\layout\\NotificationDropdown.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'DropdownMenuItem' is defined but never used.","line":6,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Bell, Check, CheckCheck, Trash2, Info, AlertTriangle, CheckCircle, XCircle } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { \n  useNotifications, \n  useUnreadNotificationsCount, \n  useMarkNotificationRead,\n  useMarkAllNotificationsRead,\n  useDeleteNotification,\n  Notification \n} from \"@/hooks/useNotifications\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\n\nconst getNotificationIcon = (type: string) => {\n  switch (type) {\n    case \"success\":\n      return <CheckCircle className=\"w-4 h-4 text-success\" />;\n    case \"warning\":\n      return <AlertTriangle className=\"w-4 h-4 text-warning\" />;\n    case \"error\":\n      return <XCircle className=\"w-4 h-4 text-destructive\" />;\n    default:\n      return <Info className=\"w-4 h-4 text-info\" />;\n  }\n};\n\nconst NotificationItem = ({ notification }: { notification: Notification }) => {\n  const markAsRead = useMarkNotificationRead();\n  const deleteNotification = useDeleteNotification();\n\n  return (\n    <div\n      className={cn(\n        \"p-3 border-b border-border last:border-0 hover:bg-muted/50 transition-colors\",\n        !notification.is_read && \"bg-primary/5\"\n      )}\n    >\n      <div className=\"flex items-start gap-3\">\n        <div className=\"mt-0.5\">{getNotificationIcon(notification.type)}</div>\n        <div className=\"flex-1 min-w-0\">\n          <p className={cn(\"text-sm font-medium\", !notification.is_read && \"font-semibold\")}>\n            {notification.title}\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-0.5 line-clamp-2\">\n            {notification.message}\n          </p>\n          <p className=\"text-xs text-muted-foreground mt-1\">\n            {formatDistanceToNow(new Date(notification.created_at), { addSuffix: true })}\n          </p>\n        </div>\n        <div className=\"flex gap-1\">\n          {!notification.is_read && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-6 w-6\"\n              onClick={(e) => {\n                e.stopPropagation();\n                markAsRead.mutate(notification.id);\n              }}\n            >\n              <Check className=\"w-3 h-3\" />\n            </Button>\n          )}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-6 w-6 text-destructive hover:text-destructive\"\n            onClick={(e) => {\n              e.stopPropagation();\n              deleteNotification.mutate(notification.id);\n            }}\n          >\n            <Trash2 className=\"w-3 h-3\" />\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst NotificationDropdown = () => {\n  const { data: notifications, isLoading } = useNotifications();\n  const { data: unreadCount } = useUnreadNotificationsCount();\n  const markAllAsRead = useMarkAllNotificationsRead();\n\n  return (\n    <DropdownMenu>\n      <DropdownMenuTrigger asChild>\n        <Button variant=\"ghost\" size=\"icon\" className=\"relative\">\n          <Bell className=\"w-5 h-5 text-muted-foreground\" />\n          {(unreadCount ?? 0) > 0 && (\n            <span className=\"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-destructive text-destructive-foreground text-xs font-medium rounded-full flex items-center justify-center\">\n              {unreadCount > 99 ? \"99+\" : unreadCount}\n            </span>\n          )}\n        </Button>\n      </DropdownMenuTrigger>\n      <DropdownMenuContent align=\"end\" className=\"w-80\">\n        <DropdownMenuLabel className=\"flex items-center justify-between\">\n          <span>Notifications</span>\n          {(unreadCount ?? 0) > 0 && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 text-xs\"\n              onClick={() => markAllAsRead.mutate()}\n            >\n              <CheckCheck className=\"w-3 h-3 mr-1\" />\n              Mark all read\n            </Button>\n          )}\n        </DropdownMenuLabel>\n        <DropdownMenuSeparator />\n        <ScrollArea className=\"h-[300px]\">\n          {isLoading ? (\n            <div className=\"p-4 text-center text-sm text-muted-foreground\">\n              Loading notifications...\n            </div>\n          ) : notifications && notifications.length > 0 ? (\n            notifications.map((notification) => (\n              <NotificationItem key={notification.id} notification={notification} />\n            ))\n          ) : (\n            <div className=\"p-4 text-center text-sm text-muted-foreground\">\n              No notifications yet\n            </div>\n          )}\n        </ScrollArea>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n};\n\nexport default NotificationDropdown;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\layout\\Sidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":72,"column":29,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":72,"endColumn":32,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1846,1849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1846,1849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Link, useLocation, useNavigate } from \"react-router-dom\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport {\n  LayoutDashboard,\n  Users,\n  Stethoscope,\n  CalendarDays,\n  Building2,\n  BedDouble,\n  ClipboardList,\n  Settings,\n  LogOut,\n  Activity,\n  UserCheck,\n  PhoneIncoming,\n  ClipboardCheck,\n  Banknote,\n  Info\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface SidebarProps {\n  className?: string;\n  onLinkClick?: () => void;\n}\n\nconst Sidebar = ({ className, onLinkClick }: SidebarProps) => {\n  const location = useLocation();\n  const navigate = useNavigate();\n  const { user, signOut } = useAuth();\n\n  // Check if user is admin\n  const { data: isAdmin = false } = useQuery({\n    queryKey: ['is-admin', user?.id],\n    queryFn: async () => {\n      if (!user) return false;\n      const { data, error } = await supabase.rpc('has_role', {\n        _user_id: user.id,\n        _role: 'admin'\n      });\n      if (error) return false;\n      return data;\n    },\n    enabled: !!user,\n  });\n\n  // Check if user is nurse\n  const { data: isNurse = false } = useQuery({\n    queryKey: ['is-nurse', user?.id],\n    queryFn: async () => {\n      if (!user) return false;\n      const { data, error } = await supabase.rpc('has_role', {\n        _user_id: user.id,\n        _role: 'nurse'\n      });\n      if (error) return false;\n      return data;\n    },\n    enabled: !!user,\n  });\n\n  // Check if user is cashier\n  const { data: isCashier = false } = useQuery({\n    queryKey: ['is-cashier', user?.id],\n    queryFn: async () => {\n      if (!user) return false;\n      const { data, error } = await supabase.rpc('has_role', {\n        _user_id: user.id,\n        _role: 'cashier' as any\n      });\n      if (error) return false;\n      return data;\n    },\n    enabled: !!user,\n  });\n\n  // Check if user is receptionist\n  const { data: isReceptionist = false } = useQuery({\n    queryKey: ['is-receptionist', user?.id],\n    queryFn: async () => {\n      if (!user) return false;\n      const { data, error } = await supabase.rpc('has_role', {\n        _user_id: user.id,\n        _role: 'receptionist'\n      });\n      if (error) return false;\n      return data;\n    },\n    enabled: !!user,\n  });\n\n  // Get pending approvals count for badge\n  const { data: pendingCount = 0 } = useQuery({\n    queryKey: ['pending-approvals-count'],\n    queryFn: async () => {\n      const { count, error } = await supabase\n        .from('staff_approval_requests')\n        .select('*', { count: 'exact', head: true })\n        .eq('status', 'pending');\n      if (error) return 0;\n      return count || 0;\n    },\n    enabled: isAdmin,\n  });\n\n  // Get pending callbacks count\n  const { data: callbacksCount = 0 } = useQuery({\n    queryKey: ['pending-callbacks-count'],\n    queryFn: async () => {\n      const { count, error } = await supabase\n        .from('callback_requests')\n        .select('*', { count: 'exact', head: true })\n        .eq('status', 'pending');\n      if (error) return 0;\n      return count || 0;\n    },\n  });\n\n  const handleSignOut = async () => {\n    await signOut();\n    navigate('/');\n    onLinkClick?.();\n  };\n\n  let navItems = [\n    { icon: LayoutDashboard, label: \"Dashboard\", path: \"/dashboard\" },\n    { icon: Users, label: \"Patients\", path: \"/patients\" },\n    { icon: Stethoscope, label: \"Doctors\", path: \"/doctors\" },\n    { icon: CalendarDays, label: \"Appointments\", path: \"/appointments\" },\n    { icon: Building2, label: \"Departments\", path: \"/departments\" },\n    { icon: BedDouble, label: \"Bed Management\", path: \"/beds\" },\n    ...((isAdmin || isReceptionist || isCashier) ? [{ icon: PhoneIncoming, label: \"Callbacks\", path: \"/callbacks\", badge: callbacksCount }] : []),\n    { icon: ClipboardList, label: \"Reports\", path: \"/reports\" },\n    ...(isAdmin ? [\n      { icon: UserCheck, label: \"Staff Approvals\", path: \"/staff/approvals\", badge: pendingCount },\n      { icon: Activity, label: \"AI Tools\", path: \"/admin/ai-tools\" },\n      { icon: Banknote, label: \"Manage Salaries\", path: \"/salaries\" },\n      { icon: Info, label: \"System Info\", path: \"/admin/info\" }\n    ] : []),\n  ];\n\n  // Specific menu for Nurses\n  if (isNurse && !isAdmin) {\n    navItems = [\n      { icon: LayoutDashboard, label: \"Dashboard\", path: \"/dashboard\" },\n      { icon: Users, label: \"Patients\", path: \"/patients\" },\n      { icon: Stethoscope, label: \"Doctors\", path: \"/doctors\" },\n      { icon: BedDouble, label: \"Bed Management\", path: \"/beds\" },\n      { icon: ClipboardList, label: \"Reports\", path: \"/reports\" },\n      { icon: ClipboardCheck, label: \"Rounds & Advice\", path: \"/nurse/rounds\" },\n    ];\n  }\n\n  // Specific menu for Cashiers\n  if (isCashier && !isAdmin) {\n    navItems = [\n      { icon: LayoutDashboard, label: \"Dashboard\", path: \"/staff/dashboard/cashier\" },\n      { icon: PhoneIncoming, label: \"Callbacks\", path: \"/callbacks\", badge: callbacksCount },\n      { icon: Users, label: \"Patients\", path: \"/patients\" },\n      { icon: Stethoscope, label: \"Doctors\", path: \"/doctors\" },\n    ];\n  }\n\n  return (\n    <aside className={cn(\"h-full w-64 bg-sidebar flex flex-col\", className)}>\n      {/* Logo */}\n      <div className=\"flex items-center gap-3 px-6 py-6 border-b border-sidebar-border shrink-0\">\n        <img src=\"/logo.png\" alt=\"MediCare Logo\" className=\"w-10 h-10 object-contain rounded-xl\" />\n        <div>\n          <h1 className=\"text-lg font-heading font-bold text-sidebar-foreground\">\n            MediCare\n          </h1>\n          <p className=\"text-xs text-sidebar-foreground/60\">Hospital Management</p>\n        </div>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 px-3 py-6 space-y-1 overflow-y-auto\">\n        {navItems.map((item) => {\n          const isActive = location.pathname === item.path;\n          return (\n            <Link\n              key={item.path}\n              to={item.path}\n              onClick={onLinkClick}\n              className={cn(\n                \"flex items-center justify-between px-4 py-3 rounded-lg text-sm font-medium transition-all duration-200\",\n                isActive\n                  ? \"bg-sidebar-primary text-sidebar-primary-foreground shadow-md\"\n                  : \"text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground\"\n              )}\n            >\n              <div className=\"flex items-center gap-3\">\n                <item.icon className=\"w-5 h-5\" />\n                {item.label}\n              </div>\n              {'badge' in item && item.badge > 0 && (\n                <Badge variant=\"destructive\" className=\"text-xs px-1.5 py-0.5 min-w-[20px] h-5\">\n                  {item.badge}\n                </Badge>\n              )}\n            </Link>\n          );\n        })}\n      </nav>\n\n      {/* Bottom section */}\n      <div className=\"px-3 py-4 border-t border-sidebar-border space-y-1 shrink-0\">\n        <Link\n          to=\"/settings\"\n          onClick={onLinkClick}\n          className=\"flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-sidebar-foreground/70 hover:bg-sidebar-accent hover:text-sidebar-foreground transition-all duration-200\"\n        >\n          <Settings className=\"w-5 h-5\" />\n          Settings\n        </Link>\n        <button\n          onClick={handleSignOut}\n          className=\"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium text-sidebar-foreground/70 hover:bg-destructive/20 hover:text-destructive transition-all duration-200\"\n        >\n          <LogOut className=\"w-5 h-5\" />\n          Logout\n        </button>\n      </div>\n    </aside>\n  );\n};\n\nexport default Sidebar;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\modals\\AddAppointmentModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":108,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":108,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { format } from \"date-fns\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { CalendarIcon } from \"lucide-react\";\nimport { useCreateAppointment } from \"@/hooks/useAppointments\";\nimport { usePatients } from \"@/hooks/usePatients\";\nimport { useDoctors } from \"@/hooks/useDoctors\";\nimport { cn } from \"@/lib/utils\";\nimport { useToast } from \"@/components/ui/use-toast\";\n\nconst appointmentSchema = z.object({\n  patient_id: z.string().min(1, \"Please select a patient\"),\n  doctor_id: z.string().min(1, \"Please select a doctor\"),\n  appointment_date: z.date(),\n  appointment_time: z.string().min(1, \"Please enter time\"),\n  duration: z.coerce.number().min(15).max(240).default(30),\n  type: z.string().min(1, \"Please select appointment type\"),\n  notes: z.string().optional(),\n});\n\ntype AppointmentFormData = z.infer<typeof appointmentSchema>;\n\ninterface AddAppointmentModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  selectedDate?: Date;\n}\n\nconst AddAppointmentModal = ({ open, onOpenChange, selectedDate }: AddAppointmentModalProps) => {\n  const createAppointment = useCreateAppointment();\n  const { data: patients } = usePatients();\n  const { data: doctors } = useDoctors();\n\n  const form = useForm<AppointmentFormData>({\n    resolver: zodResolver(appointmentSchema),\n    defaultValues: {\n      patient_id: \"\",\n      doctor_id: \"\",\n      appointment_date: selectedDate || new Date(),\n      appointment_time: \"09:00\",\n      duration: 30,\n      type: \"\",\n      notes: \"\",\n    },\n  });\n\n  const { toast } = useToast();\n\n  const onSubmit = async (data: AppointmentFormData) => {\n    try {\n      // Simulate MAYA AI Checking\n      toast({\n        title: \"MAYA AI Assistant\",\n        description: \"Checking doctor availability and slot status...\",\n        duration: 2000,\n      });\n\n      await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate AI processing time\n\n      await createAppointment.mutateAsync({\n        patient_id: data.patient_id,\n        doctor_id: data.doctor_id,\n        appointment_date: format(data.appointment_date, \"yyyy-MM-dd\"),\n        appointment_time: data.appointment_time,\n        duration: data.duration,\n        type: data.type,\n        notes: data.notes || undefined,\n      });\n\n      // Success Notification from MAYA\n      const doctorName = doctors?.find(d => d.id === data.doctor_id)?.name || \"the doctor\";\n      toast({\n        title: \"Appointment Confirmed! âœ…\",\n        description: `MAYA: I've booked your appointment with ${doctorName} at ${data.appointment_time} on ${format(data.appointment_date, \"MMM dd\")}.`,\n        className: \"bg-green-50 border-green-200 dark:bg-green-900/20 dark:border-green-800\",\n        duration: 5000,\n      });\n\n      form.reset();\n      onOpenChange(false);\n    } catch (error) {\n      toast({\n        title: \"Booking Failed\",\n        description: \"MAYA: I couldn't confirm this slot. Please try another time.\",\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const availableDoctors = doctors?.filter(d => d.available) || [];\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-lg\">\n        <DialogHeader>\n          <DialogTitle className=\"font-heading\">Schedule Appointment</DialogTitle>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"patient_id\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Patient *</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select patient\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {patients?.map((patient) => (\n                        <SelectItem key={patient.id} value={patient.id}>\n                          {patient.name} ({patient.patient_id})\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"doctor_id\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Doctor *</FormLabel>\n                  <Select onValueChange={field.onChange} defaultValue={field.value}>\n                    <FormControl>\n                      <SelectTrigger>\n                        <SelectValue placeholder=\"Select doctor\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      {availableDoctors.map((doctor) => (\n                        <SelectItem key={doctor.id} value={doctor.id}>\n                          {doctor.name} - {doctor.specialty}\n                        </SelectItem>\n                      ))}\n                    </SelectContent>\n                  </Select>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"appointment_date\"\n                render={({ field }) => (\n                  <FormItem className=\"flex flex-col\">\n                    <FormLabel>Date *</FormLabel>\n                    <Popover>\n                      <PopoverTrigger asChild>\n                        <FormControl>\n                          <Button\n                            variant=\"outline\"\n                            className={cn(\n                              \"pl-3 text-left font-normal\",\n                              !field.value && \"text-muted-foreground\"\n                            )}\n                          >\n                            {field.value ? format(field.value, \"PPP\") : \"Pick a date\"}\n                            <CalendarIcon className=\"ml-auto h-4 w-4 opacity-50\" />\n                          </Button>\n                        </FormControl>\n                      </PopoverTrigger>\n                      <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                        <Calendar\n                          mode=\"single\"\n                          selected={field.value}\n                          onSelect={field.onChange}\n                          disabled={(date) => date < new Date()}\n                        />\n                      </PopoverContent>\n                    </Popover>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"appointment_time\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Time *</FormLabel>\n                    <FormControl>\n                      <Input type=\"time\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"type\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Appointment Type *</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select type\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"General Checkup\">General Checkup</SelectItem>\n                        <SelectItem value=\"Follow-up\">Follow-up</SelectItem>\n                        <SelectItem value=\"Consultation\">Consultation</SelectItem>\n                        <SelectItem value=\"Emergency\">Emergency</SelectItem>\n                        <SelectItem value=\"Surgery\">Surgery</SelectItem>\n                        <SelectItem value=\"Lab Test\">Lab Test</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"duration\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Duration (min)</FormLabel>\n                    <FormControl>\n                      <Input type=\"number\" min={15} max={240} {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"notes\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Notes</FormLabel>\n                  <FormControl>\n                    <Textarea placeholder=\"Additional notes...\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={createAppointment.isPending}>\n                {createAppointment.isPending ? \"Scheduling...\" : \"Schedule Appointment\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddAppointmentModal;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\modals\\AddDoctorModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\modals\\AddPatientModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n  FormMessage,\n} from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useCreatePatient } from \"@/hooks/usePatients\";\nimport { useDepartments } from \"@/hooks/useDepartments\";\nimport { useDoctors } from \"@/hooks/useDoctors\";\n\nconst patientSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  age: z.coerce.number().min(0).max(150),\n  gender: z.string().min(1, \"Please select gender\"),\n  phone: z.string().optional(),\n  email: z.string().email().optional().or(z.literal(\"\")),\n  address: z.string().optional(),\n  condition: z.string().optional(),\n  status: z.string().optional(),\n  department_id: z.string().optional(),\n  doctor_id: z.string().optional(),\n});\n\ntype PatientFormData = z.infer<typeof patientSchema>;\n\ninterface AddPatientModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n}\n\nconst AddPatientModal = ({ open, onOpenChange }: AddPatientModalProps) => {\n  const createPatient = useCreatePatient();\n  const { data: departments } = useDepartments();\n  const { data: doctors } = useDoctors();\n  \n  const form = useForm<PatientFormData>({\n    resolver: zodResolver(patientSchema),\n    defaultValues: {\n      name: \"\",\n      age: 0,\n      gender: \"\",\n      phone: \"\",\n      email: \"\",\n      address: \"\",\n      condition: \"\",\n      status: \"outpatient\",\n    },\n  });\n\n  const onSubmit = async (data: PatientFormData) => {\n    await createPatient.mutateAsync({\n      name: data.name,\n      age: data.age,\n      gender: data.gender,\n      phone: data.phone || undefined,\n      email: data.email || undefined,\n      address: data.address || undefined,\n      condition: data.condition || undefined,\n      status: data.status || undefined,\n      department_id: data.department_id || undefined,\n      doctor_id: data.doctor_id || undefined,\n    });\n    form.reset();\n    onOpenChange(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"font-heading\">Add New Patient</DialogTitle>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Full Name *</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"John Smith\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <div className=\"grid grid-cols-2 gap-2\">\n                <FormField\n                  control={form.control}\n                  name=\"age\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Age *</FormLabel>\n                      <FormControl>\n                        <Input type=\"number\" placeholder=\"30\" {...field} />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"gender\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Gender *</FormLabel>\n                      <Select onValueChange={field.onChange} defaultValue={field.value}>\n                        <FormControl>\n                          <SelectTrigger>\n                            <SelectValue placeholder=\"Select\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"Male\">Male</SelectItem>\n                          <SelectItem value=\"Female\">Female</SelectItem>\n                          <SelectItem value=\"Other\">Other</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"phone\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Phone</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"+1 234-567-8900\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"email\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Email</FormLabel>\n                    <FormControl>\n                      <Input type=\"email\" placeholder=\"john@email.com\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <FormField\n              control={form.control}\n              name=\"address\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Address</FormLabel>\n                  <FormControl>\n                    <Textarea placeholder=\"123 Main St, City, State\" {...field} />\n                  </FormControl>\n                  <FormMessage />\n                </FormItem>\n              )}\n            />\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"department_id\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Department</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select department\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {departments?.map((dept) => (\n                          <SelectItem key={dept.id} value={dept.id}>\n                            {dept.name}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"doctor_id\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Assigned Doctor</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select doctor\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {doctors?.map((doc) => (\n                          <SelectItem key={doc.id} value={doc.id}>\n                            {doc.name} - {doc.specialty}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <FormField\n                control={form.control}\n                name=\"condition\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Condition/Diagnosis</FormLabel>\n                    <FormControl>\n                      <Input placeholder=\"e.g., Hypertension\" {...field} />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n              <FormField\n                control={form.control}\n                name=\"status\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Status</FormLabel>\n                    <Select onValueChange={field.onChange} defaultValue={field.value}>\n                      <FormControl>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select status\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"outpatient\">Outpatient</SelectItem>\n                        <SelectItem value=\"admitted\">Admitted</SelectItem>\n                        <SelectItem value=\"critical\">Critical</SelectItem>\n                        <SelectItem value=\"discharged\">Discharged</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <div className=\"flex justify-end gap-3 pt-4\">\n              <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n                Cancel\n              </Button>\n              <Button type=\"submit\" disabled={createPatient.isPending}>\n                {createPatient.isPending ? \"Adding...\" : \"Add Patient\"}\n              </Button>\n            </div>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default AddPatientModal;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\modals\\PatientDetailsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":18,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[668,671],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[668,671],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n} from \"@/components/ui/dialog\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\r\nimport { FileText, Pill, CreditCard, Download, Activity, Clock } from \"lucide-react\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { format } from \"date-fns\";\r\nimport { toast } from \"sonner\";\r\n\r\ninterface PatientDetailsModalProps {\r\n    patient: any;\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n}\r\n\r\nconst PatientDetailsModal = ({ patient, open, onOpenChange }: PatientDetailsModalProps) => {\r\n    if (!patient) return null;\r\n\r\n    const handleDownloadPDF = () => {\r\n        toast.success(\"Downloading patient records...\", {\r\n            description: \"The PDF file will be downloaded shortly.\",\r\n        });\r\n        // Mock simulation\r\n        setTimeout(() => {\r\n            toast.info(\"Download Complete\", { description: `${patient.name}_records.pdf saved.` })\r\n        }, 1500);\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-y-auto\">\r\n                <DialogHeader>\r\n                    <div className=\"flex items-start justify-between\">\r\n                        <div>\r\n                            <DialogTitle className=\"text-2xl font-bold\">{patient.name}</DialogTitle>\r\n                            <DialogDescription className=\"mt-1 flex items-center gap-2\">\r\n                                <span>ID: {patient.patient_id}</span>\r\n                                <span>â€¢</span>\r\n                                <span>{patient.age} yrs, {patient.gender}</span>\r\n                                <span>â€¢</span>\r\n                                <Badge variant=\"outline\">{patient.status}</Badge>\r\n                            </DialogDescription>\r\n                        </div>\r\n                        <Button onClick={handleDownloadPDF}>\r\n                            <Download className=\"w-4 h-4 mr-2\" />\r\n                            Download Records\r\n                        </Button>\r\n                    </div>\r\n                </DialogHeader>\r\n\r\n                <Tabs defaultValue=\"overview\" className=\"mt-6\">\r\n                    <TabsList>\r\n                        <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n                        <TabsTrigger value=\"reports\">Medical Reports</TabsTrigger>\r\n                        <TabsTrigger value=\"prescriptions\">Prescriptions</TabsTrigger>\r\n                        <TabsTrigger value=\"billing\">Billing & Payments</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <TabsContent value=\"overview\" className=\"space-y-4 mt-4\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <Card>\r\n                                <CardHeader className=\"pb-2\">\r\n                                    <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                                        <Activity className=\"w-4 h-4\" /> Current Condition\r\n                                    </CardTitle>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <p className=\"text-lg font-semibold\">{patient.condition || \"Not recorded\"}</p>\r\n                                    <p className=\"text-sm text-muted-foreground mt-1\">\r\n                                        Admitted: {patient.admission_date ? format(new Date(patient.admission_date), 'PPP') : 'N/A'}\r\n                                    </p>\r\n                                </CardContent>\r\n                            </Card>\r\n                            <Card>\r\n                                <CardHeader className=\"pb-2\">\r\n                                    <CardTitle className=\"text-sm font-medium text-muted-foreground flex items-center gap-2\">\r\n                                        <Clock className=\"w-4 h-4\" /> Vitals\r\n                                    </CardTitle>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                                        <div>BP: 120/80</div>\r\n                                        <div>Pulse: 72 bpm</div>\r\n                                        <div>Temp: 98.6Â°F</div>\r\n                                        <div>SpO2: 98%</div>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </div>\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"reports\" className=\"mt-4\">\r\n                        <ScrollArea className=\"h-[300px] border rounded-md p-4\">\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 cursor-pointer\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 bg-blue-100 rounded-lg\">\r\n                                            <FileText className=\"w-5 h-5 text-blue-600\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-medium\">Blood Test Report (CBC)</p>\r\n                                            <p className=\"text-sm text-muted-foreground\">Jan 15, 2026</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <Button variant=\"ghost\" size=\"sm\">View</Button>\r\n                                </div>\r\n                                {/* Placeholder for more reports */}\r\n                                <div className=\"text-center py-8 text-muted-foreground text-sm\">\r\n                                    No more reports found.\r\n                                </div>\r\n                            </div>\r\n                        </ScrollArea>\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"prescriptions\" className=\"mt-4\">\r\n                        <ScrollArea className=\"h-[300px] border rounded-md p-4\">\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"p-4 border rounded-lg\">\r\n                                    <div className=\"flex justify-between mb-2\">\r\n                                        <h4 className=\"font-semibold\">General Medication</h4>\r\n                                        <span className=\"text-sm text-muted-foreground\">Jan 16, 2026</span>\r\n                                    </div>\r\n                                    <div className=\"space-y-2\">\r\n                                        <div className=\"flex items-center gap-2 text-sm\">\r\n                                            <Pill className=\"w-4 h-4 text-primary\" />\r\n                                            <span>Paracetamol 500mg - 1-0-1 (3 days)</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2 text-sm\">\r\n                                            <Pill className=\"w-4 h-4 text-primary\" />\r\n                                            <span>Amoxicillin 250mg - 1-0-1 (5 days)</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </ScrollArea>\r\n                    </TabsContent>\r\n\r\n                    <TabsContent value=\"billing\" className=\"mt-4\">\r\n                        <ScrollArea className=\"h-[300px] border rounded-md p-4\">\r\n                            <div className=\"space-y-4\">\r\n                                <div className=\"flex items-center justify-between p-4 border rounded-lg bg-green-50/50 border-green-100\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"p-2 bg-green-100 rounded-lg\">\r\n                                            <CreditCard className=\"w-5 h-5 text-green-600\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-medium\">Advance Payment</p>\r\n                                            <p className=\"text-sm text-muted-foreground\">Jan 14, 2026 â€¢ Receipt #10234</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <p className=\"font-bold text-green-700\">â‚¹ 10,000</p>\r\n                                </div>\r\n                            </div>\r\n                        </ScrollArea>\r\n                    </TabsContent>\r\n                </Tabs>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default PatientDetailsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\modals\\PermissionRequestModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2400,2403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2400,2403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":72,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":72,"endColumn":26,"suggestions":[{"fix":{"range":[2420,2460],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { toast } from \"sonner\";\r\nimport { Lock } from \"lucide-react\";\r\n\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\n\r\ninterface PermissionRequestModalProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    action: string;\r\n}\r\n\r\nconst PermissionRequestModal = ({ open, onOpenChange, action }: PermissionRequestModalProps) => {\r\n    const { user } = useAuth();\r\n    const [reason, setReason] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleSubmit = async () => {\r\n        if (!reason.trim()) {\r\n            toast.error(\"Please provide a reason for this request\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            // 1. Find all admins\r\n            const { data: admins, error: adminError } = await supabase\r\n                .from('user_roles')\r\n                .select('user_id')\r\n                .eq('role', 'admin');\r\n\r\n            if (adminError) throw adminError;\r\n\r\n            if (!admins || admins.length === 0) {\r\n                throw new Error(\"No administrators found to receive this request.\");\r\n            }\r\n\r\n            // 2. Send notification to all admins\r\n            const notifications = admins.map(admin => ({\r\n                user_id: admin.user_id,\r\n                title: \"Permission Request\",\r\n                message: `${user?.email || 'A user'} requests to ${action}. Reason: ${reason}`,\r\n                type: \"permission_request\",\r\n                entity_type: \"request\",\r\n                entity_id: user?.id,\r\n                is_read: false\r\n            }));\r\n\r\n            const { error: notifError } = await supabase\r\n                .from('notifications')\r\n                .insert(notifications);\r\n\r\n            if (notifError) throw notifError;\r\n\r\n            toast.success(\"Permission request sent to Admin\", {\r\n                description: `Request to ${action} has been forwarded for approval.`\r\n            });\r\n            onOpenChange(false);\r\n            setReason(\"\");\r\n        } catch (error: any) {\r\n            console.error(\"Request failed:\", error);\r\n            toast.error(\"Failed to send request\", { description: error.message });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[425px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle className=\"flex items-center gap-2 text-amber-600\">\r\n                        <Lock className=\"w-5 h-5\" />\r\n                        Restricted Action\r\n                    </DialogTitle>\r\n                    <DialogDescription>\r\n                        You do not have permission to <strong>{action}</strong>. You can request approval from an administrator.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n                <div className=\"grid gap-4 py-4\">\r\n                    <Textarea\r\n                        placeholder=\"Why is this change necessary?\"\r\n                        value={reason}\r\n                        onChange={(e) => setReason(e.target.value)}\r\n                        className=\"min-h-[100px]\"\r\n                    />\r\n                </div>\r\n                <DialogFooter>\r\n                    <Button variant=\"outline\" onClick={() => onOpenChange(false)}>Cancel</Button>\r\n                    <Button onClick={handleSubmit} disabled={loading} className=\"bg-amber-600 hover:bg-amber-700\">\r\n                        {loading ? \"Sending Request...\" : \"Request Approval\"}\r\n                    </Button>\r\n                </DialogFooter>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default PermissionRequestModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\modals\\SetScheduleModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":58,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":58,"endColumn":27},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkUserRole'. Either include it or remove the dependency array.","line":66,"column":8,"nodeType":"ArrayExpression","endLine":66,"endColumn":22,"suggestions":[{"desc":"Update the dependencies array to be: [checkUserRole, doctor, user]","fix":{"range":[2652,2666],"text":"[checkUserRole, doctor, user]"}}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":109,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":109,"endColumn":24,"suggestions":[{"fix":{"range":[3856,3902],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":121,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":121,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4293,4296],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4293,4296],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":122,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":122,"endColumn":26,"suggestions":[{"fix":{"range":[4313,4352],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":138,"column":21,"nodeType":"MemberExpression","messageId":"unexpected","endLine":138,"endColumn":34,"suggestions":[{"fix":{"range":[5120,5163],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { toast } from \"sonner\";\r\nimport { Clock } from \"lucide-react\";\r\nimport { useUpdateDoctor, Doctor } from \"@/hooks/useDoctors\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport PermissionRequestModal from \"@/components/modals/PermissionRequestModal\";\r\n\r\ninterface SetScheduleModalProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    doctor: Doctor | null;\r\n}\r\n\r\nconst DAYS = [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"];\r\nconst HOURS = Array.from({ length: 24 }, (_, i) => {\r\n    const hour = i % 12 || 12;\r\n    const ampm = i < 12 ? \"AM\" : \"PM\";\r\n    return `${hour}:00 ${ampm}`;\r\n});\r\n\r\nconst SetScheduleModal = ({ open, onOpenChange, doctor }: SetScheduleModalProps) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const updateDoctor = useUpdateDoctor();\r\n    const { user } = useAuth();\r\n    const [userRole, setUserRole] = useState<string | null>(null);\r\n    const [showPermissionModal, setShowPermissionModal] = useState(false);\r\n\r\n    // State for schedule - simple version: same hours for selected days\r\n    const [selectedDays, setSelectedDays] = useState<string[]>([\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"]);\r\n    const [startTime, setStartTime] = useState(\"9:00 AM\");\r\n    const [endTime, setEndTime] = useState(\"5:00 PM\");\r\n    const [isAvailable, setIsAvailable] = useState(true);\r\n\r\n    useEffect(() => {\r\n        if (doctor) {\r\n            setIsAvailable(doctor.available);\r\n            if (doctor.schedule) {\r\n                try {\r\n                    const schedule = typeof doctor.schedule === 'string'\r\n                        ? JSON.parse(doctor.schedule)\r\n                        : doctor.schedule;\r\n                    if (schedule.start) setStartTime(schedule.start);\r\n                    if (schedule.end) setEndTime(schedule.end);\r\n                    if (schedule.days) setSelectedDays(schedule.days);\r\n                } catch (e) {\r\n                    resetDefaults();\r\n                }\r\n            } else {\r\n                resetDefaults();\r\n            }\r\n        }\r\n        checkUserRole();\r\n    }, [doctor, user]);\r\n\r\n    const resetDefaults = () => {\r\n        setStartTime(\"9:00 AM\");\r\n        setEndTime(\"5:00 PM\");\r\n        setSelectedDays([\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\"]);\r\n    };\r\n\r\n    const checkUserRole = async () => {\r\n        if (!user) return;\r\n        const { data } = await supabase\r\n            .from('user_roles')\r\n            .select('role')\r\n            .eq('user_id', user.id)\r\n            .maybeSingle();\r\n        if (data) setUserRole(data.role);\r\n    };\r\n\r\n    const toggleDay = (day: string) => {\r\n        if (selectedDays.includes(day)) {\r\n            setSelectedDays(selectedDays.filter(d => d !== day));\r\n        } else {\r\n            setSelectedDays([...selectedDays, day]);\r\n        }\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!doctor) return;\r\n\r\n        // If receptionist, require admin approval\r\n        if (userRole === 'receptionist') {\r\n            setShowPermissionModal(true);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        try {\r\n            const scheduleData = {\r\n                days: selectedDays,\r\n                start: startTime,\r\n                end: endTime\r\n            };\r\n\r\n            console.log(\"Saving schedule:\", scheduleData);\r\n\r\n            await updateDoctor.mutateAsync({\r\n                id: doctor.id,\r\n                available: isAvailable,\r\n                schedule: scheduleData\r\n            });\r\n\r\n            toast.success(\"Schedule updated successfully\", {\r\n                description: `Updated availability for ${doctor.name}`\r\n            });\r\n            onOpenChange(false);\r\n        } catch (error: any) {\r\n            console.error(\"Update failed:\", error);\r\n            const message = error.message || \"Failed to update schedule\";\r\n\r\n            // Fallback: If 'schedule' column doesn't exist yet, try updating ONLY availability\r\n            if (userRole !== 'receptionist') {\r\n                try {\r\n                    await updateDoctor.mutateAsync({\r\n                        id: doctor.id,\r\n                        available: isAvailable,\r\n                    });\r\n                    toast.warning(\"Availability updated, but detailed schedule could not be saved.\", {\r\n                        description: \"The database may not yet support detailed schedules.\"\r\n                    });\r\n                    onOpenChange(false);\r\n                    return;\r\n                } catch (retryError) {\r\n                    console.error(\"Retry failed:\", retryError);\r\n                }\r\n            }\r\n\r\n            // If it's a permission error that slipped through\r\n            if (message.includes(\"permission\") || message.includes(\"policy\")) {\r\n                toast.error(\"You do not have permission to perform this action.\");\r\n            } else {\r\n                toast.error(message);\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog open={open} onOpenChange={onOpenChange}>\r\n                <DialogContent className=\"sm:max-w-[500px]\">\r\n                    <DialogHeader>\r\n                        <DialogTitle className=\"flex items-center gap-2\">\r\n                            <Clock className=\"w-5 h-5 text-primary\" />\r\n                            Set Availability Schedule\r\n                        </DialogTitle>\r\n                        <DialogDescription>\r\n                            Configure the weekly availability for <strong>{doctor?.name}</strong>.\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n\r\n                    <div className=\"grid gap-6 py-4\">\r\n                        <div className=\"flex items-center justify-between space-x-2 border p-3 rounded-lg\">\r\n                            <Label htmlFor=\"available-mode\" className=\"flex flex-col space-y-1\">\r\n                                <span className=\"font-medium\">Currently Available</span>\r\n                                <span className=\"font-normal text-xs text-muted-foreground\">Toggle global availability status.</span>\r\n                            </Label>\r\n                            <Switch\r\n                                id=\"available-mode\"\r\n                                checked={isAvailable}\r\n                                onCheckedChange={setIsAvailable}\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            <Label>Working Days</Label>\r\n                            <div className=\"flex flex-wrap gap-2\">\r\n                                {DAYS.map(day => (\r\n                                    <div\r\n                                        key={day}\r\n                                        onClick={() => toggleDay(day)}\r\n                                        className={`\r\n                                            cursor-pointer px-3 py-1.5 rounded-full text-xs font-medium transition-colors border\r\n                                            ${selectedDays.includes(day)\r\n                                                ? \"bg-primary text-primary-foreground border-primary\"\r\n                                                : \"bg-muted text-muted-foreground border-transparent hover:bg-muted/80\"}\r\n                                        `}\r\n                                    >\r\n                                        {day.slice(0, 3)}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Start Time</Label>\r\n                                <Select value={startTime} onValueChange={setStartTime}>\r\n                                    <SelectTrigger>\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {HOURS.map(hour => (\r\n                                            <SelectItem key={`start-${hour}`} value={hour}>{hour}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>End Time</Label>\r\n                                <Select value={endTime} onValueChange={setEndTime}>\r\n                                    <SelectTrigger>\r\n                                        <SelectValue />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {HOURS.map(hour => (\r\n                                            <SelectItem key={`end-${hour}`} value={hour}>{hour}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <DialogFooter>\r\n                        <Button variant=\"outline\" onClick={() => onOpenChange(false)}>Cancel</Button>\r\n                        <Button onClick={handleSave} disabled={loading}>\r\n                            {loading ? \"Saving...\" : \"Save Schedule\"}\r\n                        </Button>\r\n                    </DialogFooter>\r\n                </DialogContent>\r\n            </Dialog>\r\n\r\n            <PermissionRequestModal\r\n                open={showPermissionModal}\r\n                onOpenChange={(open) => {\r\n                    setShowPermissionModal(open);\r\n                    if (!open) onOpenChange(false); // Close parent modal if request is done or cancelled\r\n                }}\r\n                action={`update schedule for Dr. ${doctor?.name}`}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SetScheduleModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\modals\\UploadReportModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'FileText' is defined but never used.","line":5,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CheckCircle' is defined but never used.","line":5,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":81,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2813,2816],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2813,2816],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":92,"column":21,"nodeType":"MemberExpression","messageId":"unexpected","endLine":92,"endColumn":33,"suggestions":[{"fix":{"range":[3291,3361],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":110,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":110,"endColumn":26,"suggestions":[{"fix":{"range":[4007,4028],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\nimport { z } from \"zod\";\r\nimport { Upload, FileText, CheckCircle } from \"lucide-react\";\r\nimport { useMutation } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogDescription,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n    Form,\r\n    FormControl,\r\n    FormField,\r\n    FormItem,\r\n    FormLabel,\r\n    FormMessage,\r\n} from \"@/components/ui/form\";\r\nimport { useToast } from \"@/components/ui/use-toast\";\r\n\r\nconst uploadSchema = z.object({\r\n    patient_id: z.string().min(1, \"Patient is required\"),\r\n    report_type: z.string().min(1, \"Report type is required\"),\r\n    title: z.string().min(3, \"Title is required\"),\r\n    description: z.string().optional(),\r\n    file: z.any().optional(), // In real app, validate file\r\n});\r\n\r\ntype UploadFormData = z.infer<typeof uploadSchema>;\r\n\r\ninterface UploadReportModalProps {\r\n    open: boolean;\r\n    onOpenChange: (open: boolean) => void;\r\n    patientId?: string; // Optional pre-selected patient\r\n    patientName?: string;\r\n    defaultType?: string;\r\n}\r\n\r\nconst UploadReportModal = ({ open, onOpenChange, patientId, patientName, defaultType = \"lab\" }: UploadReportModalProps) => {\r\n    const { toast } = useToast();\r\n    const [isUploading, setIsUploading] = useState(false);\r\n\r\n    // In a real scenario, we might fetch patients list if patientId is not provided\r\n    // For now, we assume this modal is usually called with a patient context or we show a simple input\r\n\r\n    const form = useForm<UploadFormData>({\r\n        resolver: zodResolver(uploadSchema),\r\n        defaultValues: {\r\n            patient_id: patientId || \"\",\r\n            report_type: defaultType,\r\n            title: \"\",\r\n            description: \"\",\r\n            file: null,\r\n        },\r\n    });\r\n\r\n    const uploadMutation = useMutation({\r\n        mutationFn: async (data: UploadFormData) => {\r\n            // Simulate file upload to Supabase Storage and DB insert\r\n            // const file = data.file[0];\r\n            // const fileExt = file.name.split('.').pop();\r\n            // const filePath = `${data.patient_id}/${Math.random()}.${fileExt}`;\r\n\r\n            // await supabase.storage.from('reports').upload(filePath, file);\r\n\r\n            const { error } = await supabase.from('medical_reports' as any).insert({\r\n                patient_id: data.patient_id,\r\n                report_type: data.report_type,\r\n                title: data.title,\r\n                description: data.description,\r\n                file_url: \"https://example.com/mock-report.pdf\", // Mock URL\r\n                uploaded_by: (await supabase.auth.getUser()).data.user?.id\r\n            });\r\n\r\n            if (error) {\r\n                if (error.code === '42P01') { // undefined_table\r\n                    console.warn(\"Table medical_reports does not exist, mocking success\");\r\n                    await new Promise(resolve => setTimeout(resolve, 1000));\r\n                    return;\r\n                }\r\n                throw error;\r\n            }\r\n        },\r\n        onSuccess: () => {\r\n            toast({\r\n                title: \"Upload Successful\",\r\n                description: \"The medical report has been added to patient records.\",\r\n                className: \"bg-green-50 border-green-200\",\r\n            });\r\n            onOpenChange(false);\r\n            form.reset();\r\n        },\r\n        onError: (error: Error) => {\r\n            // Mock success if backend fail due to missing table for prototype\r\n            console.error(error);\r\n            toast({\r\n                title: \"Upload Successful (Simulation)\",\r\n                description: \"Report metadata saved locally.\",\r\n            });\r\n            onOpenChange(false);\r\n        },\r\n    });\r\n\r\n    const onSubmit = (data: UploadFormData) => {\r\n        setIsUploading(true);\r\n        // Simulate network delay\r\n        setTimeout(() => {\r\n            uploadMutation.mutate(data);\r\n            setIsUploading(false);\r\n        }, 1000);\r\n    };\r\n\r\n    return (\r\n        <Dialog open={open} onOpenChange={onOpenChange}>\r\n            <DialogContent className=\"sm:max-w-[500px]\">\r\n                <DialogHeader>\r\n                    <DialogTitle>Upload Medical Record</DialogTitle>\r\n                    <DialogDescription>\r\n                        Upload reports, prescriptions, or payment receipts for {patientName || \"patient\"}.\r\n                    </DialogDescription>\r\n                </DialogHeader>\r\n\r\n                <Form {...form}>\r\n                    <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\r\n                        {!patientId && (\r\n                            <FormField\r\n                                control={form.control}\r\n                                name=\"patient_id\"\r\n                                render={({ field }) => (\r\n                                    <FormItem>\r\n                                        <FormLabel>Patient ID</FormLabel>\r\n                                        <FormControl>\r\n                                            <Input placeholder=\"Enter Patient ID\" {...field} />\r\n                                        </FormControl>\r\n                                        <FormMessage />\r\n                                    </FormItem>\r\n                                )}\r\n                            />\r\n                        )}\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"report_type\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Record Type</FormLabel>\r\n                                    <Select onValueChange={field.onChange} defaultValue={field.value}>\r\n                                        <FormControl>\r\n                                            <SelectTrigger>\r\n                                                <SelectValue placeholder=\"Select Type\" />\r\n                                            </SelectTrigger>\r\n                                        </FormControl>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"lab\">Lab Report</SelectItem>\r\n                                            <SelectItem value=\"prescription\">Prescription</SelectItem>\r\n                                            <SelectItem value=\"imaging\">X-Ray / MRI</SelectItem>\r\n                                            <SelectItem value=\"bill\">Payment Receipt</SelectItem>\r\n                                            <SelectItem value=\"insurance\">Insurance Document</SelectItem>\r\n                                            <SelectItem value=\"other\">Other</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"title\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Title</FormLabel>\r\n                                    <FormControl>\r\n                                        <Input placeholder=\"e.g. Blood Test CBC\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <FormField\r\n                            control={form.control}\r\n                            name=\"description\"\r\n                            render={({ field }) => (\r\n                                <FormItem>\r\n                                    <FormLabel>Description (Optional)</FormLabel>\r\n                                    <FormControl>\r\n                                        <Textarea placeholder=\"Additional details...\" {...field} />\r\n                                    </FormControl>\r\n                                    <FormMessage />\r\n                                </FormItem>\r\n                            )}\r\n                        />\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Attachment</Label>\r\n                            <div className=\"border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center bg-muted/20 hover:bg-muted/40 transition-colors cursor-pointer text-muted-foreground\">\r\n                                <Upload className=\"w-8 h-8 mb-2\" />\r\n                                <span className=\"text-sm\">Click to select file</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Button type=\"submit\" className=\"w-full\" disabled={isUploading || uploadMutation.isPending}>\r\n                            {isUploading ? \"Uploading...\" : \"Upload Document\"}\r\n                        </Button>\r\n                    </form>\r\n                </Form>\r\n            </DialogContent>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default UploadReportModal;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\accordion.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\alert-dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\alert.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\aspect-ratio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\badge.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":29,"column":17,"nodeType":"Identifier","messageId":"namedExport","endLine":29,"endColumn":30}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default: \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive: \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n);\n\nexport interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return <div className={cn(badgeVariants({ variant }), className)} {...props} />;\n}\n\nexport { Badge, badgeVariants };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\breadcrumb.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\button.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":47,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":47,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean;\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n    return <Comp className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />;\n  },\n);\nButton.displayName = \"Button\";\n\nexport { Button, buttonVariants };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\calendar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_props' is defined but never used.","line":45,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":45,"endColumn":31},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_props' is defined but never used.","line":46,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { DayPicker } from \"react-day-picker\";\n\nimport { cn } from \"@/lib/utils\";\nimport { buttonVariants } from \"@/components/ui/button\";\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>;\n\nfunction Calendar({ className, classNames, showOutsideDays = true, ...props }: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\",\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell: \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(buttonVariants({ variant: \"ghost\" }), \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle: \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ ..._props }) => <ChevronLeft className=\"h-4 w-4\" />,\n        IconRight: ({ ..._props }) => <ChevronRight className=\"h-4 w-4\" />,\n      }}\n      {...props}\n    />\n  );\n}\nCalendar.displayName = \"Calendar\";\n\nexport { Calendar };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\carousel.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\chart.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":62,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":62,"endColumn":56}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as RechartsPrimitive from \"recharts\";\n\nimport { cn } from \"@/lib/utils\";\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const;\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode;\n    icon?: React.ComponentType;\n  } & ({ color?: string; theme?: never } | { color?: never; theme: Record<keyof typeof THEMES, string> });\n};\n\ntype ChartContextProps = {\n  config: ChartConfig;\n};\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null);\n\nfunction useChart() {\n  const context = React.useContext(ChartContext);\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\");\n  }\n\n  return context;\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig;\n    children: React.ComponentProps<typeof RechartsPrimitive.ResponsiveContainer>[\"children\"];\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId();\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`;\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className,\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>{children}</RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  );\n});\nChartContainer.displayName = \"Chart\";\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(([_, config]) => config.theme || config.color);\n\n  if (!colorConfig.length) {\n    return null;\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color = itemConfig.theme?.[theme as keyof typeof itemConfig.theme] || itemConfig.color;\n    return color ? `  --color-${key}: ${color};` : null;\n  })\n  .join(\"\\n\")}\n}\n`,\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  );\n};\n\nconst ChartTooltip = RechartsPrimitive.Tooltip;\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean;\n      hideIndicator?: boolean;\n      indicator?: \"line\" | \"dot\" | \"dashed\";\n      nameKey?: string;\n      labelKey?: string;\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref,\n  ) => {\n    const { config } = useChart();\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null;\n      }\n\n      const [item] = payload;\n      const key = `${labelKey || item.dataKey || item.name || \"value\"}`;\n      const itemConfig = getPayloadConfigFromPayload(config, item, key);\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label;\n\n      if (labelFormatter) {\n        return <div className={cn(\"font-medium\", labelClassName)}>{labelFormatter(value, payload)}</div>;\n      }\n\n      if (!value) {\n        return null;\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>;\n    }, [label, labelFormatter, payload, hideLabel, labelClassName, config, labelKey]);\n\n    if (!active || !payload?.length) {\n      return null;\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\";\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className,\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`;\n            const itemConfig = getPayloadConfigFromPayload(config, item, key);\n            const indicatorColor = color || item.payload.fill || item.color;\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\",\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\", {\n                            \"h-2.5 w-2.5\": indicator === \"dot\",\n                            \"w-1\": indicator === \"line\",\n                            \"w-0 border-[1.5px] border-dashed bg-transparent\": indicator === \"dashed\",\n                            \"my-0.5\": nestLabel && indicator === \"dashed\",\n                          })}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\",\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">{itemConfig?.label || item.name}</span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  },\n);\nChartTooltipContent.displayName = \"ChartTooltip\";\n\nconst ChartLegend = RechartsPrimitive.Legend;\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean;\n      nameKey?: string;\n    }\n>(({ className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey }, ref) => {\n  const { config } = useChart();\n\n  if (!payload?.length) {\n    return null;\n  }\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\"flex items-center justify-center gap-4\", verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\", className)}\n    >\n      {payload.map((item) => {\n        const key = `${nameKey || item.dataKey || \"value\"}`;\n        const itemConfig = getPayloadConfigFromPayload(config, item, key);\n\n        return (\n          <div\n            key={item.value}\n            className={cn(\"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\")}\n          >\n            {itemConfig?.icon && !hideIcon ? (\n              <itemConfig.icon />\n            ) : (\n              <div\n                className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                style={{\n                  backgroundColor: item.color,\n                }}\n              />\n            )}\n            {itemConfig?.label}\n          </div>\n        );\n      })}\n    </div>\n  );\n});\nChartLegendContent.displayName = \"ChartLegend\";\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(config: ChartConfig, payload: unknown, key: string) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined;\n  }\n\n  const payloadPayload =\n    \"payload\" in payload && typeof payload.payload === \"object\" && payload.payload !== null\n      ? payload.payload\n      : undefined;\n\n  let configLabelKey: string = key;\n\n  if (key in payload && typeof payload[key as keyof typeof payload] === \"string\") {\n    configLabelKey = payload[key as keyof typeof payload] as string;\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[key as keyof typeof payloadPayload] as string;\n  }\n\n  return configLabelKey in config ? config[configLabelKey] : config[key as keyof typeof config];\n}\n\nexport { ChartContainer, ChartTooltip, ChartTooltipContent, ChartLegend, ChartLegendContent, ChartStyle };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\checkbox.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\collapsible.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\command.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":24,"column":11,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":24,"endColumn":29,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[710,761],"text":"type CommandDialogProps = DialogProps"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { type DialogProps } from \"@radix-ui/react-dialog\";\nimport { Command as CommandPrimitive } from \"cmdk\";\nimport { Search } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\";\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\nCommand.displayName = CommandPrimitive.displayName;\n\ninterface CommandDialogProps extends DialogProps {}\n\nconst CommandDialog = ({ children, ...props }: CommandDialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      {...props}\n    />\n  </div>\n));\n\nCommandInput.displayName = CommandPrimitive.Input.displayName;\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n));\n\nCommandList.displayName = CommandPrimitive.List.displayName;\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => <CommandPrimitive.Empty ref={ref} className=\"py-6 text-center text-sm\" {...props} />);\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName;\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName;\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator ref={ref} className={cn(\"-mx-1 h-px bg-border\", className)} {...props} />\n));\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName;\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50\",\n      className,\n    )}\n    {...props}\n  />\n));\n\nCommandItem.displayName = CommandPrimitive.Item.displayName;\n\nconst CommandShortcut = ({ className, ...props }: React.HTMLAttributes<HTMLSpanElement>) => {\n  return <span className={cn(\"ml-auto text-xs tracking-widest text-muted-foreground\", className)} {...props} />;\n};\nCommandShortcut.displayName = \"CommandShortcut\";\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\context-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\dialog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\drawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\dropdown-menu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\form.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":129,"column":10,"nodeType":"Identifier","messageId":"namedExport","endLine":129,"endColumn":22}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as LabelPrimitive from \"@radix-ui/react-label\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { Controller, ControllerProps, FieldPath, FieldValues, FormProvider, useFormContext } from \"react-hook-form\";\n\nimport { cn } from \"@/lib/utils\";\nimport { Label } from \"@/components/ui/label\";\n\nconst Form = FormProvider;\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n> = {\n  name: TName;\n};\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>({} as FormFieldContextValue);\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  );\n};\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext);\n  const itemContext = React.useContext(FormItemContext);\n  const { getFieldState, formState } = useFormContext();\n\n  const fieldState = getFieldState(fieldContext.name, formState);\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\");\n  }\n\n  const { id } = itemContext;\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  };\n};\n\ntype FormItemContextValue = {\n  id: string;\n};\n\nconst FormItemContext = React.createContext<FormItemContextValue>({} as FormItemContextValue);\n\nconst FormItem = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n  ({ className, ...props }, ref) => {\n    const id = React.useId();\n\n    return (\n      <FormItemContext.Provider value={{ id }}>\n        <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n      </FormItemContext.Provider>\n    );\n  },\n);\nFormItem.displayName = \"FormItem\";\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField();\n\n  return <Label ref={ref} className={cn(error && \"text-destructive\", className)} htmlFor={formItemId} {...props} />;\n});\nFormLabel.displayName = \"FormLabel\";\n\nconst FormControl = React.forwardRef<React.ElementRef<typeof Slot>, React.ComponentPropsWithoutRef<typeof Slot>>(\n  ({ ...props }, ref) => {\n    const { error, formItemId, formDescriptionId, formMessageId } = useFormField();\n\n    return (\n      <Slot\n        ref={ref}\n        id={formItemId}\n        aria-describedby={!error ? `${formDescriptionId}` : `${formDescriptionId} ${formMessageId}`}\n        aria-invalid={!!error}\n        {...props}\n      />\n    );\n  },\n);\nFormControl.displayName = \"FormControl\";\n\nconst FormDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, ...props }, ref) => {\n    const { formDescriptionId } = useFormField();\n\n    return <p ref={ref} id={formDescriptionId} className={cn(\"text-sm text-muted-foreground\", className)} {...props} />;\n  },\n);\nFormDescription.displayName = \"FormDescription\";\n\nconst FormMessage = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n  ({ className, children, ...props }, ref) => {\n    const { error, formMessageId } = useFormField();\n    const body = error ? String(error?.message) : children;\n\n    if (!body) {\n      return null;\n    }\n\n    return (\n      <p ref={ref} id={formMessageId} className={cn(\"text-sm font-medium text-destructive\", className)} {...props}>\n        {body}\n      </p>\n    );\n  },\n);\nFormMessage.displayName = \"FormMessage\";\n\nexport { useFormField, Form, FormItem, FormLabel, FormControl, FormDescription, FormMessage, FormField };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\hover-card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\input-otp.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\label.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\menubar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\navigation-menu.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":111,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":111,"endColumn":29}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\";\nimport { cva } from \"class-variance-authority\";\nimport { ChevronDown } from \"lucide-react\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\"relative z-10 flex max-w-max flex-1 items-center justify-center\", className)}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n));\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName;\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\"group flex flex-1 list-none items-center justify-center space-x-1\", className)}\n    {...props}\n  />\n));\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName;\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item;\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50\",\n);\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n));\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName;\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto\",\n      className,\n    )}\n    {...props}\n  />\n));\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName;\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link;\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n));\nNavigationMenuViewport.displayName = NavigationMenuPrimitive.Viewport.displayName;\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className,\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n));\nNavigationMenuIndicator.displayName = NavigationMenuPrimitive.Indicator.displayName;\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\popover.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\progress.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\radio-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\resizable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\scroll-area.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\select.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\separator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\sheet.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\sidebar.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":636,"column":3,"nodeType":"Identifier","messageId":"namedExport","endLine":636,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport { Slot } from \"@radix-ui/react-slot\";\nimport { VariantProps, cva } from \"class-variance-authority\";\nimport { PanelLeft } from \"lucide-react\";\n\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Separator } from \"@/components/ui/separator\";\nimport { Sheet, SheetContent } from \"@/components/ui/sheet\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from \"@/components/ui/tooltip\";\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar:state\";\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7;\nconst SIDEBAR_WIDTH = \"16rem\";\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\";\nconst SIDEBAR_WIDTH_ICON = \"3rem\";\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\";\n\ntype SidebarContext = {\n  state: \"expanded\" | \"collapsed\";\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  openMobile: boolean;\n  setOpenMobile: (open: boolean) => void;\n  isMobile: boolean;\n  toggleSidebar: () => void;\n};\n\nconst SidebarContext = React.createContext<SidebarContext | null>(null);\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext);\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\");\n  }\n\n  return context;\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean;\n    open?: boolean;\n    onOpenChange?: (open: boolean) => void;\n  }\n>(({ defaultOpen = true, open: openProp, onOpenChange: setOpenProp, className, style, children, ...props }, ref) => {\n  const isMobile = useIsMobile();\n  const [openMobile, setOpenMobile] = React.useState(false);\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen);\n  const open = openProp ?? _open;\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value;\n      if (setOpenProp) {\n        setOpenProp(openState);\n      } else {\n        _setOpen(openState);\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`;\n    },\n    [setOpenProp, open],\n  );\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open);\n  }, [isMobile, setOpen, setOpenMobile]);\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (event.key === SIDEBAR_KEYBOARD_SHORTCUT && (event.metaKey || event.ctrlKey)) {\n        event.preventDefault();\n        toggleSidebar();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [toggleSidebar]);\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\";\n\n  const contextValue = React.useMemo<SidebarContext>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],\n  );\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\", className)}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  );\n});\nSidebarProvider.displayName = \"SidebarProvider\";\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\";\n    variant?: \"sidebar\" | \"floating\" | \"inset\";\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\";\n  }\n>(({ side = \"left\", variant = \"sidebar\", collapsible = \"offcanvas\", className, children, ...props }, ref) => {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar();\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        className={cn(\"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\", className)}\n        ref={ref}\n        {...props}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    );\n  }\n\n  return (\n    <div\n      ref={ref}\n      className=\"group peer hidden text-sidebar-foreground md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        className={cn(\n          \"relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\",\n        )}\n      />\n      <div\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className,\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n});\nSidebar.displayName = \"Sidebar\";\n\nconst SidebarTrigger = React.forwardRef<React.ElementRef<typeof Button>, React.ComponentProps<typeof Button>>(\n  ({ className, onClick, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <Button\n        ref={ref}\n        data-sidebar=\"trigger\"\n        variant=\"ghost\"\n        size=\"icon\"\n        className={cn(\"h-7 w-7\", className)}\n        onClick={(event) => {\n          onClick?.(event);\n          toggleSidebar();\n        }}\n        {...props}\n      >\n        <PanelLeft />\n        <span className=\"sr-only\">Toggle Sidebar</span>\n      </Button>\n    );\n  },\n);\nSidebarTrigger.displayName = \"SidebarTrigger\";\n\nconst SidebarRail = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\">>(\n  ({ className, ...props }, ref) => {\n    const { toggleSidebar } = useSidebar();\n\n    return (\n      <button\n        ref={ref}\n        data-sidebar=\"rail\"\n        aria-label=\"Toggle Sidebar\"\n        tabIndex={-1}\n        onClick={toggleSidebar}\n        title=\"Toggle Sidebar\"\n        className={cn(\n          \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] group-data-[side=left]:-right-4 group-data-[side=right]:left-0 hover:after:bg-sidebar-border sm:flex\",\n          \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n          \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n          \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n          \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n          \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarRail.displayName = \"SidebarRail\";\n\nconst SidebarInset = React.forwardRef<HTMLDivElement, React.ComponentProps<\"main\">>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex min-h-svh flex-1 flex-col bg-background\",\n        \"peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarInset.displayName = \"SidebarInset\";\n\nconst SidebarInput = React.forwardRef<React.ElementRef<typeof Input>, React.ComponentProps<typeof Input>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Input\n        ref={ref}\n        data-sidebar=\"input\"\n        className={cn(\n          \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarInput.displayName = \"SidebarInput\";\n\nconst SidebarHeader = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"header\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarHeader.displayName = \"SidebarHeader\";\n\nconst SidebarFooter = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return <div ref={ref} data-sidebar=\"footer\" className={cn(\"flex flex-col gap-2 p-2\", className)} {...props} />;\n});\nSidebarFooter.displayName = \"SidebarFooter\";\n\nconst SidebarSeparator = React.forwardRef<React.ElementRef<typeof Separator>, React.ComponentProps<typeof Separator>>(\n  ({ className, ...props }, ref) => {\n    return (\n      <Separator\n        ref={ref}\n        data-sidebar=\"separator\"\n        className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n        {...props}\n      />\n    );\n  },\n);\nSidebarSeparator.displayName = \"SidebarSeparator\";\n\nconst SidebarContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarContent.displayName = \"SidebarContent\";\n\nconst SidebarGroup = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  );\n});\nSidebarGroup.displayName = \"SidebarGroup\";\n\nconst SidebarGroupLabel = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"div\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-label\"\n        className={cn(\n          \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\";\n\nconst SidebarGroupAction = React.forwardRef<HTMLButtonElement, React.ComponentProps<\"button\"> & { asChild?: boolean }>(\n  ({ className, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\";\n\n    return (\n      <Comp\n        ref={ref}\n        data-sidebar=\"group-action\"\n        className={cn(\n          \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n          // Increases the hit area of the button on mobile.\n          \"after:absolute after:-inset-2 after:md:hidden\",\n          \"group-data-[collapsible=icon]:hidden\",\n          className,\n        )}\n        {...props}\n      />\n    );\n  },\n);\nSidebarGroupAction.displayName = \"SidebarGroupAction\";\n\nconst SidebarGroupContent = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div ref={ref} data-sidebar=\"group-content\" className={cn(\"w-full text-sm\", className)} {...props} />\n  ),\n);\nSidebarGroupContent.displayName = \"SidebarGroupContent\";\n\nconst SidebarMenu = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(({ className, ...props }, ref) => (\n  <ul ref={ref} data-sidebar=\"menu\" className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)} {...props} />\n));\nSidebarMenu.displayName = \"SidebarMenu\";\n\nconst SidebarMenuItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ className, ...props }, ref) => (\n  <li ref={ref} data-sidebar=\"menu-item\" className={cn(\"group/menu-item relative\", className)} {...props} />\n));\nSidebarMenuItem.displayName = \"SidebarMenuItem\";\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    isActive?: boolean;\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>;\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(({ asChild = false, isActive = false, variant = \"default\", size = \"default\", tooltip, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n  const { isMobile, state } = useSidebar();\n\n  const button = (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  );\n\n  if (!tooltip) {\n    return button;\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    };\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent side=\"right\" align=\"center\" hidden={state !== \"collapsed\" || isMobile} {...tooltip} />\n    </Tooltip>\n  );\n});\nSidebarMenuButton.displayName = \"SidebarMenuButton\";\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean;\n    showOnHover?: boolean;\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform peer-hover/menu-button:text-sidebar-accent-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuAction.displayName = \"SidebarMenuAction\";\n\nconst SidebarMenuBadge = React.forwardRef<HTMLDivElement, React.ComponentProps<\"div\">>(\n  ({ className, ...props }, ref) => (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\";\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean;\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`;\n  }, []);\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && <Skeleton className=\"size-4 rounded-md\" data-sidebar=\"menu-skeleton-icon\" />}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  );\n});\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\";\n\nconst SidebarMenuSub = React.forwardRef<HTMLUListElement, React.ComponentProps<\"ul\">>(\n  ({ className, ...props }, ref) => (\n    <ul\n      ref={ref}\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  ),\n);\nSidebarMenuSub.displayName = \"SidebarMenuSub\";\n\nconst SidebarMenuSubItem = React.forwardRef<HTMLLIElement, React.ComponentProps<\"li\">>(({ ...props }, ref) => (\n  <li ref={ref} {...props} />\n));\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\";\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean;\n    size?: \"sm\" | \"md\";\n    isActive?: boolean;\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\";\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring aria-disabled:pointer-events-none aria-disabled:opacity-50 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className,\n      )}\n      {...props}\n    />\n  );\n});\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\";\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\slider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\sonner.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":27,"column":19,"nodeType":"Identifier","messageId":"namedExport","endLine":27,"endColumn":24}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useTheme } from \"next-themes\";\nimport { Toaster as Sonner, toast } from \"sonner\";\n\ntype ToasterProps = React.ComponentProps<typeof Sonner>;\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme();\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      toastOptions={{\n        classNames: {\n          toast:\n            \"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg\",\n          description: \"group-[.toast]:text-muted-foreground\",\n          actionButton: \"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground\",\n          cancelButton: \"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground\",\n        },\n      }}\n      {...props}\n    />\n  );\n};\n\nexport { Toaster, toast };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\switch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\table.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\tabs.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\textarea.tsx","messages":[{"ruleId":"@typescript-eslint/no-empty-object-type","severity":2,"message":"An interface declaring no members is equivalent to its supertype.","line":5,"column":18,"nodeType":"Identifier","messageId":"noEmptyInterfaceWithSuper","endLine":5,"endColumn":31,"suggestions":[{"messageId":"replaceEmptyInterfaceWithSuper","fix":{"range":[75,159],"text":"type TextareaProps = React.TextareaHTMLAttributes<HTMLTextAreaElement>"},"desc":"Replace empty interface with a type alias."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nexport interface TextareaProps extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className,\n      )}\n      ref={ref}\n      {...props}\n    />\n  );\n});\nTextarea.displayName = \"Textarea\";\n\nexport { Textarea };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\toaster.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\toggle-group.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\toggle.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":37,"column":18,"nodeType":"Identifier","messageId":"namedExport","endLine":37,"endColumn":32}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\";\nimport { cva, type VariantProps } from \"class-variance-authority\";\n\nimport { cn } from \"@/lib/utils\";\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline: \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3\",\n        sm: \"h-9 px-2.5\",\n        lg: \"h-11 px-5\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n);\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> & VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root ref={ref} className={cn(toggleVariants({ variant, size, className }))} {...props} />\n));\n\nToggle.displayName = TogglePrimitive.Root.displayName;\n\nexport { Toggle, toggleVariants };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\tooltip.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\components\\ui\\use-toast.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-refresh/only-export-components","severity":1,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":16,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":16,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createContext, useContext, useEffect, useState, ReactNode } from 'react';\nimport { supabase } from '@/integrations/supabase/client';\nimport type { User, Session } from '@supabase/supabase-js';\n\ninterface AuthContextType {\n  user: User | null;\n  session: Session | null;\n  loading: boolean;\n  signIn: (email: string, password: string) => Promise<{ error: Error | null }>;\n  signUp: (email: string, password: string, fullName: string) => Promise<{ error: Error | null }>;\n  signOut: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider = ({ children }: AuthProviderProps) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [session, setSession] = useState<Session | null>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Set up auth state listener FIRST\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(\n      (_event, session) => {\n        setSession(session);\n        setUser(session?.user ?? null);\n        setLoading(false);\n      }\n    );\n\n    // THEN get initial session\n    supabase.auth.getSession().then(({ data: { session } }) => {\n      setSession(session);\n      setUser(session?.user ?? null);\n      setLoading(false);\n    });\n\n    return () => subscription.unsubscribe();\n  }, []);\n\n  const signIn = async (email: string, password: string) => {\n    const { error } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n    return { error: error as Error | null };\n  };\n\n  const signUp = async (email: string, password: string, fullName: string) => {\n    const { error } = await supabase.auth.signUp({\n      email,\n      password,\n      options: {\n        emailRedirectTo: window.location.origin,\n        data: {\n          full_name: fullName,\n        },\n      },\n    });\n    return { error: error as Error | null };\n  };\n\n  const signOut = async () => {\n    await supabase.auth.signOut();\n  };\n\n  const value = {\n    user,\n    session,\n    loading,\n    signIn,\n    signUp,\n    signOut,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\use-mobile.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\use-toast.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'actionTypes' is assigned a value but only used as a type.","line":15,"column":7,"nodeType":null,"messageId":"usedOnlyAsType","endLine":15,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import * as React from \"react\";\n\nimport type { ToastActionElement, ToastProps } from \"@/components/ui/toast\";\n\nconst TOAST_LIMIT = 1;\nconst TOAST_REMOVE_DELAY = 1000000;\n\ntype ToasterToast = ToastProps & {\n  id: string;\n  title?: React.ReactNode;\n  description?: React.ReactNode;\n  action?: ToastActionElement;\n};\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const;\n\nlet count = 0;\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER;\n  return count.toString();\n}\n\ntype ActionType = typeof actionTypes;\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"];\n      toast: ToasterToast;\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"];\n      toast: Partial<ToasterToast>;\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"];\n      toastId?: ToasterToast[\"id\"];\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"];\n      toastId?: ToasterToast[\"id\"];\n    };\n\ninterface State {\n  toasts: ToasterToast[];\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>();\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return;\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId);\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    });\n  }, TOAST_REMOVE_DELAY);\n\n  toastTimeouts.set(toastId, timeout);\n};\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      };\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) => (t.id === action.toast.id ? { ...t, ...action.toast } : t)),\n      };\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action;\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId);\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id);\n        });\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      };\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        };\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      };\n  }\n};\n\nconst listeners: Array<(state: State) => void> = [];\n\nlet memoryState: State = { toasts: [] };\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action);\n  listeners.forEach((listener) => {\n    listener(memoryState);\n  });\n}\n\ntype Toast = Omit<ToasterToast, \"id\">;\n\nfunction toast({ ...props }: Toast) {\n  const id = genId();\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    });\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id });\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss();\n      },\n    },\n  });\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  };\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState);\n\n  React.useEffect(() => {\n    listeners.push(setState);\n    return () => {\n      const index = listeners.indexOf(setState);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    };\n  }, [state]);\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  };\n}\n\nexport { useToast, toast };\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\useAppointments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\useBeds.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\useDepartments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\useDoctors.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":17,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[469,472],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[469,472],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { supabase } from \"@/integrations/supabase/client\";\nimport { toast } from \"@/hooks/use-toast\";\n\nexport interface Doctor {\n  id: string;\n  name: string;\n  specialty: string;\n  experience: string | null;\n  rating: number;\n  total_patients: number;\n  phone: string | null;\n  email: string | null;\n  available: boolean;\n  department_id: string | null;\n  created_at: string;\n  schedule?: any;\n}\n\nexport interface CreateDoctorData {\n  name: string;\n  specialty: string;\n  experience?: string;\n  phone?: string;\n  email?: string;\n  available?: boolean;\n  department_id?: string;\n}\n\nexport const useDoctors = () => {\n  return useQuery({\n    queryKey: [\"doctors\"],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from(\"doctors\")\n        .select(\"*\")\n        .order(\"name\");\n      if (error) throw error;\n      return data as Doctor[];\n    },\n  });\n};\n\nexport const useCreateDoctor = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (doctor: CreateDoctorData) => {\n      const { data, error } = await supabase\n        .from(\"doctors\")\n        .insert([doctor])\n        .select()\n        .single();\n      if (error) throw error;\n      return data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"doctors\"] });\n      toast({ title: \"Success\", description: \"Doctor added successfully\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n};\n\nexport const useUpdateDoctor = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async ({ id, ...updates }: Partial<Doctor> & { id: string }) => {\n      const { data, error } = await supabase\n        .from(\"doctors\")\n        .update(updates)\n        .eq(\"id\", id)\n        .select()\n        .single();\n      if (error) throw error;\n      return data;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"doctors\"] });\n      toast({ title: \"Success\", description: \"Doctor updated successfully\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n};\n\nexport const useDeleteDoctor = () => {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: async (id: string) => {\n      const { error } = await supabase.from(\"doctors\").delete().eq(\"id\", id);\n      if (error) throw error;\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"doctors\"] });\n      toast({ title: \"Success\", description: \"Doctor deleted successfully\" });\n    },\n    onError: (error: Error) => {\n      toast({ title: \"Error\", description: error.message, variant: \"destructive\" });\n    },\n  });\n};\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\useNotifications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\usePatientAppointments.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\usePatients.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\hooks\\useVapiCall.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\integrations\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\integrations\\supabase\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Appointments.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'confirmedPatientAppointments' is assigned a value but never used.","line":66,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":66,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\nimport { format } from \"date-fns\";\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Search, Plus, Clock, User, Stethoscope, MoreHorizontal, Loader2, CheckCircle, XCircle, Phone, Bell, CalendarDays, Mail, PhoneCall } from \"lucide-react\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n  DropdownMenuSeparator,\n} from \"@/components/ui/dropdown-menu\";\nimport { useAppointments, useUpdateAppointment, useDeleteAppointment } from \"@/hooks/useAppointments\";\nimport { usePatientAppointments, useUpdatePatientAppointment } from \"@/hooks/usePatientAppointments\";\nimport AddAppointmentModal from \"@/components/modals/AddAppointmentModal\";\nimport { useVapiCall } from \"@/hooks/useVapiCall\";\n\nconst statusStyles = {\n  confirmed: \"bg-success/10 text-success border-success/20\",\n  pending: \"bg-warning/10 text-warning border-warning/20\",\n  \"in-progress\": \"bg-info/10 text-info border-info/20\",\n  cancelled: \"bg-destructive/10 text-destructive border-destructive/20\",\n  completed: \"bg-muted text-muted-foreground border-muted\",\n};\n\nconst Appointments = () => {\n  const [date, setDate] = useState<Date | undefined>(new Date());\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [deleteId, setDeleteId] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState(\"scheduled\");\n\n  const selectedDate = date ? format(date, \"yyyy-MM-dd\") : undefined;\n  const { data: appointments, isLoading } = useAppointments(selectedDate);\n  const { data: patientAppointments, isLoading: isLoadingPatientAppts } = usePatientAppointments();\n  const updateAppointment = useUpdateAppointment();\n  const updatePatientAppointment = useUpdatePatientAppointment();\n  const deleteAppointment = useDeleteAppointment();\n  const vapiCall = useVapiCall();\n\n  const pendingPatientAppointments = patientAppointments?.filter(a => a.status === \"pending\") || [];\n  const confirmedPatientAppointments = patientAppointments?.filter(a => a.status === \"confirmed\") || [];\n\n  const handleAICall = async (appointmentId: string, action: 'confirm' | 'reminder' | 'cancel') => {\n    await vapiCall.mutateAsync({ appointmentId, action });\n  };\n\n  const filteredAppointments = appointments?.filter((apt) => {\n    const patientName = apt.patients?.name?.toLowerCase() || \"\";\n    const doctorName = apt.doctors?.name?.toLowerCase() || \"\";\n    const matchesSearch = \n      patientName.includes(searchQuery.toLowerCase()) ||\n      doctorName.includes(searchQuery.toLowerCase());\n    const matchesStatus = statusFilter === \"all\" || apt.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const statusCounts = {\n    total: appointments?.length || 0,\n    confirmed: appointments?.filter(a => a.status === \"confirmed\").length || 0,\n    pending: appointments?.filter(a => a.status === \"pending\").length || 0,\n    cancelled: appointments?.filter(a => a.status === \"cancelled\").length || 0,\n  };\n\n  const handleStatusChange = async (id: string, status: string) => {\n    await updateAppointment.mutateAsync({ id, status });\n  };\n\n  const handleDelete = async () => {\n    if (deleteId) {\n      await deleteAppointment.mutateAsync(deleteId);\n      setDeleteId(null);\n    }\n  };\n\n  const formatTime = (time: string) => {\n    const [hours, minutes] = time.split(\":\");\n    const hour = parseInt(hours);\n    const ampm = hour >= 12 ? \"PM\" : \"AM\";\n    const displayHour = hour % 12 || 12;\n    return `${displayHour}:${minutes} ${ampm}`;\n  };\n\n  const handlePatientAppointmentStatus = async (id: string, status: string) => {\n    await updatePatientAppointment.mutateAsync({ id, status });\n  };\n\n  return (\n    <DashboardLayout title=\"Appointments\" subtitle=\"Schedule and manage patient appointments\">\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* Left Column - Calendar & Stats */}\n        <div className=\"space-y-6\">\n          <Card className=\"card-shadow border-border/50\">\n            <CardContent className=\"p-4\">\n              <Calendar\n                mode=\"single\"\n                selected={date}\n                onSelect={setDate}\n                className=\"rounded-md\"\n              />\n            </CardContent>\n          </Card>\n\n          <Card className=\"card-shadow border-border/50\">\n            <CardHeader className=\"pb-3\">\n              <CardTitle className=\"text-sm font-medium\">Today's Overview</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Total</span>\n                <Badge variant=\"secondary\">{statusCounts.total}</Badge>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Confirmed</span>\n                <Badge className=\"bg-success/10 text-success border-success/20\">{statusCounts.confirmed}</Badge>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Pending</span>\n                <Badge className=\"bg-warning/10 text-warning border-warning/20\">{statusCounts.pending}</Badge>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Cancelled</span>\n                <Badge className=\"bg-destructive/10 text-destructive border-destructive/20\">{statusCounts.cancelled}</Badge>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Right Column - Appointments List */}\n        <div className=\"lg:col-span-3 space-y-6\">\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n            <div className=\"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between\">\n              <TabsList>\n                <TabsTrigger value=\"scheduled\" className=\"gap-2\">\n                  <CalendarDays className=\"w-4 h-4\" />\n                  Scheduled\n                </TabsTrigger>\n                <TabsTrigger value=\"requests\" className=\"gap-2\">\n                  <User className=\"w-4 h-4\" />\n                  Patient Requests\n                  {pendingPatientAppointments.length > 0 && (\n                    <Badge variant=\"destructive\" className=\"ml-1 h-5 w-5 p-0 flex items-center justify-center text-xs\">\n                      {pendingPatientAppointments.length}\n                    </Badge>\n                  )}\n                </TabsTrigger>\n              </TabsList>\n              <Button onClick={() => setShowAddModal(true)}>\n                <Plus className=\"w-4 h-4 mr-2\" />\n                New Appointment\n              </Button>\n            </div>\n\n            <TabsContent value=\"scheduled\" className=\"mt-6 space-y-4\">\n              {/* Action Bar */}\n              <div className=\"flex flex-col md:flex-row gap-4\">\n                <div className=\"relative flex-1\">\n                  <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                  <Input \n                    placeholder=\"Search appointments...\" \n                    className=\"pl-10\"\n                    value={searchQuery}\n                    onChange={(e) => setSearchQuery(e.target.value)}\n                  />\n                </div>\n                <Select value={statusFilter} onValueChange={setStatusFilter}>\n                  <SelectTrigger className=\"w-36\">\n                    <SelectValue placeholder=\"Status\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\">All Status</SelectItem>\n                    <SelectItem value=\"confirmed\">Confirmed</SelectItem>\n                    <SelectItem value=\"pending\">Pending</SelectItem>\n                    <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Scheduled Appointments List */}\n              <Card className=\"card-shadow border-border/50\">\n                <CardHeader className=\"border-b border-border\">\n                  <CardTitle className=\"text-lg\">\n                    Appointments for {date?.toLocaleDateString(\"en-US\", { weekday: \"long\", month: \"long\", day: \"numeric\" })}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-0\">\n                  {isLoading ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                      <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n                    </div>\n                  ) : filteredAppointments?.length === 0 ? (\n                    <div className=\"text-center py-12 text-muted-foreground\">\n                      No appointments for this date. Schedule one to get started.\n                    </div>\n                  ) : (\n                    <div className=\"divide-y divide-border\">\n                      {filteredAppointments?.map((apt) => (\n                        <div key={apt.id} className=\"p-4 hover:bg-muted/30 transition-colors duration-200\">\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-4\">\n                              <div className=\"flex flex-col items-center p-3 bg-muted/50 rounded-lg min-w-[80px]\">\n                                <Clock className=\"w-4 h-4 text-muted-foreground mb-1\" />\n                                <span className=\"text-sm font-medium\">{formatTime(apt.appointment_time)}</span>\n                                <span className=\"text-xs text-muted-foreground\">{apt.duration} min</span>\n                              </div>\n                              <div className=\"flex items-center gap-4\">\n                                <Avatar className=\"w-10 h-10\">\n                                  <AvatarFallback className=\"bg-secondary text-secondary-foreground\">\n                                    {apt.patients?.name?.split(\" \").map(n => n[0]).join(\"\") || \"?\"}\n                                  </AvatarFallback>\n                                </Avatar>\n                                <div>\n                                  <div className=\"flex items-center gap-2\">\n                                    <User className=\"w-3 h-3 text-muted-foreground\" />\n                                    <p className=\"font-medium text-foreground\">{apt.patients?.name || \"Unknown\"}</p>\n                                  </div>\n                                  <div className=\"flex items-center gap-2 mt-1\">\n                                    <Stethoscope className=\"w-3 h-3 text-muted-foreground\" />\n                                    <p className=\"text-sm text-muted-foreground\">{apt.doctors?.name || \"Unknown\"}</p>\n                                  </div>\n                                </div>\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-4\">\n                              <div className=\"text-right\">\n                                <Badge variant=\"secondary\" className=\"mb-1\">{apt.type}</Badge>\n                                <Badge variant=\"outline\" className={statusStyles[apt.status as keyof typeof statusStyles] || statusStyles.pending}>\n                                  {apt.status}\n                                </Badge>\n                              </div>\n                              <DropdownMenu>\n                                <DropdownMenuTrigger asChild>\n                                  <Button variant=\"ghost\" size=\"icon\">\n                                    <MoreHorizontal className=\"w-4 h-4\" />\n                                  </Button>\n                                </DropdownMenuTrigger>\n                                <DropdownMenuContent align=\"end\">\n                                  <DropdownMenuItem onClick={() => handleAICall(apt.id, \"confirm\")} disabled={vapiCall.isPending}>\n                                    <Phone className=\"w-4 h-4 mr-2 text-primary\" />\n                                    AI Confirm Call\n                                  </DropdownMenuItem>\n                                  <DropdownMenuItem onClick={() => handleAICall(apt.id, \"reminder\")} disabled={vapiCall.isPending}>\n                                    <Bell className=\"w-4 h-4 mr-2 text-info\" />\n                                    AI Reminder Call\n                                  </DropdownMenuItem>\n                                  <DropdownMenuSeparator />\n                                  <DropdownMenuItem onClick={() => handleStatusChange(apt.id, \"confirmed\")}>\n                                    <CheckCircle className=\"w-4 h-4 mr-2 text-success\" />\n                                    Confirm\n                                  </DropdownMenuItem>\n                                  <DropdownMenuItem onClick={() => handleStatusChange(apt.id, \"completed\")}>\n                                    Mark Complete\n                                  </DropdownMenuItem>\n                                  <DropdownMenuItem onClick={() => handleStatusChange(apt.id, \"cancelled\")} className=\"text-destructive\">\n                                    <XCircle className=\"w-4 h-4 mr-2\" />\n                                    Cancel\n                                  </DropdownMenuItem>\n                                  <DropdownMenuSeparator />\n                                  <DropdownMenuItem onClick={() => setDeleteId(apt.id)} className=\"text-destructive\">\n                                    Delete\n                                  </DropdownMenuItem>\n                                </DropdownMenuContent>\n                              </DropdownMenu>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"requests\" className=\"mt-6 space-y-4\">\n              {/* Patient Requests List */}\n              <Card className=\"card-shadow border-border/50\">\n                <CardHeader className=\"border-b border-border\">\n                  <CardTitle className=\"text-lg flex items-center gap-2\">\n                    <User className=\"w-5 h-5\" />\n                    Patient Appointment Requests\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"p-0\">\n                  {isLoadingPatientAppts ? (\n                    <div className=\"flex items-center justify-center py-12\">\n                      <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n                    </div>\n                  ) : patientAppointments?.length === 0 ? (\n                    <div className=\"text-center py-12 text-muted-foreground\">\n                      No patient appointment requests yet.\n                    </div>\n                  ) : (\n                    <div className=\"divide-y divide-border\">\n                      {patientAppointments?.map((apt) => (\n                        <div key={apt.id} className=\"p-4 hover:bg-muted/30 transition-colors duration-200\">\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-4\">\n                              <div className=\"flex flex-col items-center p-3 bg-muted/50 rounded-lg min-w-[100px]\">\n                                <CalendarDays className=\"w-4 h-4 text-muted-foreground mb-1\" />\n                                <span className=\"text-sm font-medium\">{format(new Date(apt.preferred_date), \"MMM d, yyyy\")}</span>\n                                <span className=\"text-xs text-muted-foreground capitalize\">{apt.preferred_time || \"Any time\"}</span>\n                              </div>\n                              <div className=\"flex items-center gap-4\">\n                                <Avatar className=\"w-10 h-10\">\n                                  <AvatarFallback className=\"bg-secondary text-secondary-foreground\">\n                                    {apt.patient_name?.split(\" \").map(n => n[0]).join(\"\") || \"?\"}\n                                  </AvatarFallback>\n                                </Avatar>\n                                <div>\n                                  <div className=\"flex items-center gap-2\">\n                                    <User className=\"w-3 h-3 text-muted-foreground\" />\n                                    <p className=\"font-medium text-foreground\">{apt.patient_name}</p>\n                                  </div>\n                                  <div className=\"flex items-center gap-4 mt-1\">\n                                    <div className=\"flex items-center gap-1\">\n                                      <PhoneCall className=\"w-3 h-3 text-muted-foreground\" />\n                                      <p className=\"text-sm text-muted-foreground\">{apt.patient_phone}</p>\n                                    </div>\n                                    {apt.patient_email && (\n                                      <div className=\"flex items-center gap-1\">\n                                        <Mail className=\"w-3 h-3 text-muted-foreground\" />\n                                        <p className=\"text-sm text-muted-foreground\">{apt.patient_email}</p>\n                                      </div>\n                                    )}\n                                  </div>\n                                  <div className=\"flex items-center gap-2 mt-1\">\n                                    {apt.doctors && (\n                                      <div className=\"flex items-center gap-1\">\n                                        <Stethoscope className=\"w-3 h-3 text-muted-foreground\" />\n                                        <p className=\"text-xs text-muted-foreground\">{apt.doctors.name}</p>\n                                      </div>\n                                    )}\n                                    {apt.departments && (\n                                      <Badge variant=\"outline\" className=\"text-xs\">{apt.departments.name}</Badge>\n                                    )}\n                                  </div>\n                                  {apt.notes && (\n                                    <p className=\"text-xs text-muted-foreground mt-1 italic\">\"{apt.notes}\"</p>\n                                  )}\n                                </div>\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-4\">\n                              <div className=\"text-right\">\n                                <Badge variant=\"secondary\" className=\"mb-1 capitalize\">{apt.appointment_type}</Badge>\n                                <Badge variant=\"outline\" className={statusStyles[apt.status as keyof typeof statusStyles] || statusStyles.pending}>\n                                  {apt.status}\n                                </Badge>\n                              </div>\n                              <DropdownMenu>\n                                <DropdownMenuTrigger asChild>\n                                  <Button variant=\"ghost\" size=\"icon\">\n                                    <MoreHorizontal className=\"w-4 h-4\" />\n                                  </Button>\n                                </DropdownMenuTrigger>\n                                <DropdownMenuContent align=\"end\">\n                                  <DropdownMenuItem onClick={() => handlePatientAppointmentStatus(apt.id, \"confirmed\")}>\n                                    <CheckCircle className=\"w-4 h-4 mr-2 text-success\" />\n                                    Confirm Request\n                                  </DropdownMenuItem>\n                                  <DropdownMenuItem onClick={() => handlePatientAppointmentStatus(apt.id, \"cancelled\")} className=\"text-destructive\">\n                                    <XCircle className=\"w-4 h-4 mr-2\" />\n                                    Reject Request\n                                  </DropdownMenuItem>\n                                </DropdownMenuContent>\n                              </DropdownMenu>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n\n      <AddAppointmentModal open={showAddModal} onOpenChange={setShowAddModal} selectedDate={date} />\n\n      <AlertDialog open={!!deleteId} onOpenChange={() => setDeleteId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Appointment</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this appointment? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleDelete} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </DashboardLayout>\n  );\n};\n\nexport default Appointments;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Beds.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AlertDialogTrigger' is defined but never used.","line":40,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":23},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":108,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":108,"endColumn":26,"suggestions":[{"fix":{"range":[3849,3870],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\r\nimport { useBeds, useCreateBed, useDeleteBed, useUpdateBedStatus, Bed } from \"@/hooks/useBeds\";\r\nimport { useDepartments } from \"@/hooks/useDepartments\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogDescription,\r\n    DialogFooter,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuContent,\r\n    DropdownMenuItem,\r\n    DropdownMenuTrigger,\r\n} from \"@/components/ui/dropdown-menu\";\r\nimport {\r\n    AlertDialog,\r\n    AlertDialogAction,\r\n    AlertDialogCancel,\r\n    AlertDialogContent,\r\n    AlertDialogDescription,\r\n    AlertDialogFooter,\r\n    AlertDialogHeader,\r\n    AlertDialogTitle,\r\n    AlertDialogTrigger,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { BedDouble, Plus, Search, Trash2, User, Activity, Filter, Hotel, MoreVertical, Edit } from \"lucide-react\";\r\nimport { cn } from \"@/lib/utils\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst Beds = () => {\r\n    const { data: beds, isLoading } = useBeds();\r\n    const { data: departments } = useDepartments();\r\n    const createBed = useCreateBed();\r\n    const deleteBed = useDeleteBed();\r\n    const updateBedStatus = useUpdateBedStatus();\r\n\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [statusFilter, setStatusFilter] = useState<string>(\"all\");\r\n    const [departmentFilter, setDepartmentFilter] = useState<string>(\"all\");\r\n    const [isAddOpen, setIsAddOpen] = useState(false);\r\n    const [editStatusOpen, setEditStatusOpen] = useState(false);\r\n    const [selectedBed, setSelectedBed] = useState<Bed | null>(null);\r\n    const [bedToDelete, setBedToDelete] = useState<string | null>(null);\r\n\r\n    // Form State\r\n    const [newBed, setNewBed] = useState({\r\n        bed_number: \"\",\r\n        room_number: \"\",\r\n        department_id: \"\",\r\n        bed_type: \"Standard\",\r\n        status: \"Available\"\r\n    });\r\n\r\n    const filteredBeds = beds?.filter((bed) => {\r\n        const matchesSearch =\r\n            bed.bed_number.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            bed.room_number.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            bed.patients?.name.toLowerCase().includes(searchQuery.toLowerCase());\r\n\r\n        const matchesStatus = statusFilter === \"all\" || bed.status === statusFilter;\r\n        const matchesDept = departmentFilter === \"all\" || bed.department_id === departmentFilter;\r\n\r\n        return matchesSearch && matchesStatus && matchesDept;\r\n    });\r\n\r\n    const stats = {\r\n        total: beds?.length || 0,\r\n        occupied: beds?.filter(b => b.status === \"Occupied\").length || 0,\r\n        available: beds?.filter(b => b.status === \"Available\").length || 0,\r\n        maintenance: beds?.filter(b => b.status === \"Maintenance\").length || 0,\r\n    };\r\n\r\n    const handleCreateBed = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!newBed.department_id) {\r\n            toast.error(\"Please select a department\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await createBed.mutateAsync(newBed);\r\n            setIsAddOpen(false);\r\n            setNewBed({\r\n                bed_number: \"\",\r\n                room_number: \"\",\r\n                department_id: \"\",\r\n                bed_type: \"Standard\",\r\n                status: \"Available\"\r\n            });\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status: string | null) => {\r\n        switch (status) {\r\n            case \"Available\": return \"bg-emerald-500/10 text-emerald-600 border-emerald-200\";\r\n            case \"Occupied\": return \"bg-red-500/10 text-red-600 border-red-200\";\r\n            case \"Maintenance\": return \"bg-orange-500/10 text-orange-600 border-orange-200\";\r\n            default: return \"bg-gray-100 text-gray-600 border-gray-200\";\r\n        }\r\n    };\r\n\r\n    const getStatusDot = (status: string | null) => {\r\n        switch (status) {\r\n            case \"Available\": return \"bg-emerald-500\";\r\n            case \"Occupied\": return \"bg-red-500\";\r\n            case \"Maintenance\": return \"bg-orange-500\";\r\n            default: return \"bg-gray-400\";\r\n        }\r\n    };\r\n\r\n    return (\r\n        <DashboardLayout title=\"Bed Management\" subtitle=\"Monitor and manage hospital bed occupancy\">\r\n\r\n            {/* Stats Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8\">\r\n                <Card className=\"shadow-sm border-l-4 border-l-primary\">\r\n                    <CardContent className=\"p-4 flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm font-medium text-muted-foreground\">Total Beds</p>\r\n                            <h3 className=\"text-2xl font-bold mt-1\">{stats.total}</h3>\r\n                        </div>\r\n                        <div className=\"p-3 bg-primary/10 rounded-xl\">\r\n                            <BedDouble className=\"w-5 h-5 text-primary\" />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"shadow-sm border-l-4 border-l-emerald-500\">\r\n                    <CardContent className=\"p-4 flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm font-medium text-muted-foreground\">Available</p>\r\n                            <h3 className=\"text-2xl font-bold mt-1\">{stats.available}</h3>\r\n                        </div>\r\n                        <div className=\"p-3 bg-emerald-500/10 rounded-xl\">\r\n                            <Hotel className=\"w-5 h-5 text-emerald-500\" />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"shadow-sm border-l-4 border-l-red-500\">\r\n                    <CardContent className=\"p-4 flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm font-medium text-muted-foreground\">Occupied</p>\r\n                            <h3 className=\"text-2xl font-bold mt-1\">{stats.occupied}</h3>\r\n                        </div>\r\n                        <div className=\"p-3 bg-red-500/10 rounded-xl\">\r\n                            <User className=\"w-5 h-5 text-red-500\" />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"shadow-sm border-l-4 border-l-orange-500\">\r\n                    <CardContent className=\"p-4 flex items-center justify-between\">\r\n                        <div>\r\n                            <p className=\"text-sm font-medium text-muted-foreground\">Maintenance</p>\r\n                            <h3 className=\"text-2xl font-bold mt-1\">{stats.maintenance}</h3>\r\n                        </div>\r\n                        <div className=\"p-3 bg-orange-500/10 rounded-xl\">\r\n                            <Activity className=\"w-5 h-5 text-orange-500\" />\r\n                        </div>\r\n                    </CardContent>\r\n                </Card>\r\n            </div>\r\n\r\n            {/* Filters and Actions */}\r\n            <div className=\"flex flex-col md:flex-row gap-4 justify-between items-center mb-6\">\r\n                <div className=\"flex flex-1 gap-2 w-full md:w-auto\">\r\n                    <div className=\"relative flex-1 md:max-w-xs\">\r\n                        <Search className=\"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"Search bed, room, or patient...\"\r\n                            className=\"pl-9\"\r\n                            value={searchQuery}\r\n                            onChange={(e) => setSearchQuery(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <Select value={statusFilter} onValueChange={setStatusFilter}>\r\n                        <SelectTrigger className=\"w-[140px]\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Filter className=\"w-4 h-4\" />\r\n                                <SelectValue placeholder=\"Status\" />\r\n                            </div>\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Status</SelectItem>\r\n                            <SelectItem value=\"Available\">Available</SelectItem>\r\n                            <SelectItem value=\"Occupied\">Occupied</SelectItem>\r\n                            <SelectItem value=\"Maintenance\">Maintenance</SelectItem>\r\n                        </SelectContent>\r\n                    </Select>\r\n                    <Select value={departmentFilter} onValueChange={setDepartmentFilter}>\r\n                        <SelectTrigger className=\"w-[180px]\">\r\n                            <SelectValue placeholder=\"Department\" />\r\n                        </SelectTrigger>\r\n                        <SelectContent>\r\n                            <SelectItem value=\"all\">All Departments</SelectItem>\r\n                            {departments?.map((dept) => (\r\n                                <SelectItem key={dept.id} value={dept.id}>{dept.name}</SelectItem>\r\n                            ))}\r\n                        </SelectContent>\r\n                    </Select>\r\n                </div>\r\n\r\n                <Dialog open={isAddOpen} onOpenChange={setIsAddOpen}>\r\n                    <DialogTrigger asChild>\r\n                        <Button className=\"shrink-0\">\r\n                            <Plus className=\"w-4 h-4 mr-2\" />\r\n                            Add Bed\r\n                        </Button>\r\n                    </DialogTrigger>\r\n                    <DialogContent>\r\n                        <DialogHeader>\r\n                            <DialogTitle>Add New Bed</DialogTitle>\r\n                            <DialogDescription>\r\n                                Enter the details for the new bed unit.\r\n                            </DialogDescription>\r\n                        </DialogHeader>\r\n                        <form onSubmit={handleCreateBed} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"bed_number\">Bed Number</Label>\r\n                                    <Input\r\n                                        id=\"bed_number\"\r\n                                        placeholder=\"e.g. B-101\"\r\n                                        value={newBed.bed_number}\r\n                                        onChange={(e) => setNewBed({ ...newBed, bed_number: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"room_number\">Room Number</Label>\r\n                                    <Input\r\n                                        id=\"room_number\"\r\n                                        placeholder=\"e.g. 101\"\r\n                                        value={newBed.room_number}\r\n                                        onChange={(e) => setNewBed({ ...newBed, room_number: e.target.value })}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"department\">Department</Label>\r\n                                <Select\r\n                                    value={newBed.department_id}\r\n                                    onValueChange={(val) => setNewBed({ ...newBed, department_id: val })}\r\n                                >\r\n                                    <SelectTrigger id=\"department\">\r\n                                        <SelectValue placeholder=\"Select Department\" />\r\n                                    </SelectTrigger>\r\n                                    <SelectContent>\r\n                                        {departments?.map((dept) => (\r\n                                            <SelectItem key={dept.id} value={dept.id}>{dept.name}</SelectItem>\r\n                                        ))}\r\n                                    </SelectContent>\r\n                                </Select>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"type\">Bed Type</Label>\r\n                                    <Select\r\n                                        value={newBed.bed_type}\r\n                                        onValueChange={(val) => setNewBed({ ...newBed, bed_type: val })}\r\n                                    >\r\n                                        <SelectTrigger id=\"type\">\r\n                                            <SelectValue placeholder=\"Type\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"Standard\">Standard</SelectItem>\r\n                                            <SelectItem value=\"ICU\">ICU</SelectItem>\r\n                                            <SelectItem value=\"Semi-Private\">Semi-Private</SelectItem>\r\n                                            <SelectItem value=\"Private\">Private</SelectItem>\r\n                                            <SelectItem value=\"VipSuite\">VIP Suite</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label htmlFor=\"status\">Initial Status</Label>\r\n                                    <Select\r\n                                        value={newBed.status}\r\n                                        onValueChange={(val) => setNewBed({ ...newBed, status: val })}\r\n                                    >\r\n                                        <SelectTrigger id=\"status\">\r\n                                            <SelectValue placeholder=\"Status\" />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"Available\">Available</SelectItem>\r\n                                            <SelectItem value=\"Maintenance\">Maintenance</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <DialogFooter>\r\n                                <Button type=\"button\" variant=\"outline\" onClick={() => setIsAddOpen(false)}>Cancel</Button>\r\n                                <Button type=\"submit\">Create Bed</Button>\r\n                            </DialogFooter>\r\n                        </form>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>\r\n\r\n            {/* Bed Grid */}\r\n            {isLoading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\r\n                </div>\r\n            ) : filteredBeds?.length === 0 ? (\r\n                <div className=\"text-center py-12 bg-gray-50 rounded-xl border border-dashed\">\r\n                    <BedDouble className=\"w-12 h-12 text-gray-300 mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium text-gray-900\">No beds found</h3>\r\n                    <p className=\"text-gray-500\">Try adjusting your filters or add a new bed.</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\r\n                    {filteredBeds?.map((bed) => (\r\n                        <Card key={bed.id} className=\"overflow-hidden shadow-sm hover:shadow-md transition-shadow relative group\">\r\n                            <div className={cn(\"absolute top-0 left-0 w-1 h-full\", getStatusDot(bed.status || \"Available\"))} />\r\n\r\n                            <CardHeader className=\"pb-2 pt-4 pl-5 pr-4 flex flex-row items-center justify-between space-y-0\">\r\n                                <div className=\"flex flex-col\">\r\n                                    <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider\">\r\n                                        {bed.room_number}\r\n                                    </span>\r\n                                    <CardTitle className=\"text-xl font-bold\">\r\n                                        {bed.bed_number}\r\n                                    </CardTitle>\r\n                                </div>\r\n                                <Badge variant=\"outline\" className={cn(\"capitalize\", getStatusColor(bed.status))}>\r\n                                    {bed.status}\r\n                                </Badge>\r\n                            </CardHeader>\r\n\r\n                            <CardContent className=\"pl-5 pr-4 pb-4 space-y-3\">\r\n                                <div className=\"flex justify-between items-center text-sm\">\r\n                                    <span className=\"text-muted-foreground\">Type:</span>\r\n                                    <span className=\"font-medium\">{bed.bed_type || \"Standard\"}</span>\r\n                                </div>\r\n                                <div className=\"flex justify-between items-center text-sm\">\r\n                                    <span className=\"text-muted-foreground\">Department:</span>\r\n                                    <span className=\"font-medium truncate max-w-[120px]\" title={bed.departments?.name}>\r\n                                        {bed.departments?.name || \"Unassigned\"}\r\n                                    </span>\r\n                                </div>\r\n\r\n                                {bed.status === \"Occupied\" && bed.patients && (\r\n                                    <div className=\"mt-3 pt-3 border-t border-dashed\">\r\n                                        <div className=\"flex items-center gap-2 mb-1\">\r\n                                            <User className=\"w-4 h-4 text-muted-foreground\" />\r\n                                            <span className=\"text-xs font-medium text-muted-foreground\">Patient</span>\r\n                                        </div>\r\n                                        <p className=\"font-medium text-sm truncate\">{bed.patients.name}</p>\r\n                                    </div>\r\n                                )}\r\n\r\n                                <div className=\"pt-2 flex gap-2 justify-end opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                    <DropdownMenu>\r\n                                        <DropdownMenuTrigger asChild>\r\n                                            <Button variant=\"ghost\" size=\"icon\" className=\"h-8 w-8\">\r\n                                                <MoreVertical className=\"w-4 h-4\" />\r\n                                            </Button>\r\n                                        </DropdownMenuTrigger>\r\n                                        <DropdownMenuContent align=\"end\">\r\n                                            <DropdownMenuItem onClick={() => {\r\n                                                setSelectedBed(bed);\r\n                                                setEditStatusOpen(true);\r\n                                            }}>\r\n                                                <Edit className=\"w-4 h-4 mr-2\" />\r\n                                                Update Status\r\n                                            </DropdownMenuItem>\r\n                                            <DropdownMenuItem className=\"text-destructive focus:text-destructive\" onClick={() => setBedToDelete(bed.id)}>\r\n                                                <Trash2 className=\"w-4 h-4 mr-2\" />\r\n                                                Delete\r\n                                            </DropdownMenuItem>\r\n                                        </DropdownMenuContent>\r\n                                    </DropdownMenu>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            <AlertDialog open={!!bedToDelete} onOpenChange={(open) => !open && setBedToDelete(null)}>\r\n                <AlertDialogContent>\r\n                    <AlertDialogHeader>\r\n                        <AlertDialogTitle>Delete Bed</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                            Are you sure you want to delete this bed? This action cannot be undone.\r\n                        </AlertDialogDescription>\r\n                    </AlertDialogHeader>\r\n                    <AlertDialogFooter>\r\n                        <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                            onClick={() => {\r\n                                if (bedToDelete) {\r\n                                    deleteBed.mutate(bedToDelete);\r\n                                    setBedToDelete(null);\r\n                                }\r\n                            }}\r\n                            className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\r\n                        >\r\n                            Delete\r\n                        </AlertDialogAction>\r\n                    </AlertDialogFooter>\r\n                </AlertDialogContent>\r\n            </AlertDialog>\r\n\r\n            <Dialog open={editStatusOpen} onOpenChange={setEditStatusOpen}>\r\n                <DialogContent>\r\n                    <DialogHeader>\r\n                        <DialogTitle>Update Bed Status</DialogTitle>\r\n                        <DialogDescription>\r\n                            Change the status of the bed {selectedBed?.bed_number}\r\n                        </DialogDescription>\r\n                    </DialogHeader>\r\n                    <div className=\"space-y-4 py-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <Label>Status</Label>\r\n                            <Select\r\n                                key={selectedBed?.id}\r\n                                defaultValue={selectedBed?.status || \"Available\"}\r\n                                onValueChange={(val) => {\r\n                                    if (selectedBed) {\r\n                                        updateBedStatus.mutate({\r\n                                            id: selectedBed.id,\r\n                                            status: val,\r\n                                            patient_id: val === \"Available\" ? null : selectedBed.patient_id\r\n                                        });\r\n                                        setEditStatusOpen(false);\r\n                                    }\r\n                                }}\r\n                            >\r\n                                <SelectTrigger>\r\n                                    <SelectValue />\r\n                                </SelectTrigger>\r\n                                <SelectContent>\r\n                                    <SelectItem value=\"Available\">Available</SelectItem>\r\n                                    <SelectItem value=\"Occupied\">Occupied</SelectItem>\r\n                                    <SelectItem value=\"Maintenance\">Maintenance</SelectItem>\r\n                                </SelectContent>\r\n                            </Select>\r\n                        </div>\r\n                        {selectedBed?.status === \"Occupied\" && (\r\n                            <p className=\"text-sm text-yellow-600 bg-yellow-50 p-2 rounded\">\r\n                                Note: Changing from Occupied to Available will remove the patient assignment.\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </DialogContent>\r\n            </Dialog>\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default Beds;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Callbacks.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":80,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":80,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2679,2682],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2679,2682],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":106,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":106,"endColumn":16,"suggestions":[{"fix":{"range":[3496,3567],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":163,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":163,"endColumn":18,"suggestions":[{"fix":{"range":[5549,5594],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":167,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":167,"endColumn":20,"suggestions":[{"fix":{"range":[5673,5708],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":171,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":171,"endColumn":22,"suggestions":[{"fix":{"range":[5870,5915],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":175,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":175,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":179,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6213,6216],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6213,6216],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":180,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":180,"endColumn":20,"suggestions":[{"fix":{"range":[6226,6262],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { toast } from 'sonner';\nimport { Phone, PhoneCall, Clock, CheckCircle, XCircle, Search, Bot } from 'lucide-react';\nimport { format } from 'date-fns';\n\nconst CallbacksPage = () => {\n  const queryClient = useQueryClient();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n\n  // Fetch callback requests\n  const { data: callbacks = [], isLoading } = useQuery({\n    queryKey: ['callback-requests', statusFilter],\n    queryFn: async () => {\n      let query = supabase\n        .from('callback_requests')\n        .select('*')\n        .order('created_at', { ascending: false });\n\n      if (statusFilter !== 'all') {\n        query = query.eq('status', statusFilter);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n      return data;\n    },\n  });\n\n  // Realtime subscription\n  useEffect(() => {\n    const channel = supabase\n      .channel('callback-requests-realtime')\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'callback_requests',\n        },\n        () => {\n          queryClient.invalidateQueries({ queryKey: ['callback-requests'] });\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [queryClient]);\n\n  // Update status mutation\n  const updateStatusMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      const { error } = await supabase\n        .from('callback_requests')\n        .update({ status })\n        .eq('id', id);\n      if (error) throw error;\n    },\n    onSuccess: () => {\n      toast.success('Callback status updated');\n      queryClient.invalidateQueries({ queryKey: ['callback-requests'] });\n      queryClient.invalidateQueries({ queryKey: ['pending-callbacks-count'] });\n    },\n    onError: () => {\n      toast.error('Failed to update status');\n    },\n  });\n\n  const triggerAICall = async (callback: any) => {\n    const VAPI_PRIVATE_KEY = import.meta.env.VITE_VAPI_PRIVATE_KEY;\n    const PHONE_NUMBER_ID = import.meta.env.VITE_VAPI_PHONE_NUMBER_ID;\n\n    if (!VAPI_PRIVATE_KEY) {\n      toast.error(\"Missing VITE_VAPI_PRIVATE_KEY in .env file.\");\n      return;\n    }\n\n    if (!PHONE_NUMBER_ID) {\n      toast.error(\"Missing VITE_VAPI_PHONE_NUMBER_ID in .env file.\");\n      return;\n    }\n\n    const toastId = toast.loading(\"Initiating AI Call...\");\n\n    // Normalize phone number to E.164 format\n    let phoneNumber = callback.phone.trim().replace(/\\s+/g, '');\n    if (!phoneNumber.startsWith('+')) {\n      if (phoneNumber.length === 10) {\n        phoneNumber = '+91' + phoneNumber;\n      } else if (phoneNumber.startsWith('91') && phoneNumber.length === 12) {\n        phoneNumber = '+' + phoneNumber;\n      }\n    }\n\n    console.log(\"Calling Vapi with transient assistant for:\", phoneNumber);\n\n    try {\n      const apiUrl = \"/api/vapi/call\";\n\n      const response = await fetch(apiUrl, {\n        method: \"POST\",\n        headers: {\n          \"Authorization\": `Bearer ${VAPI_PRIVATE_KEY}`,\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          phoneNumberId: PHONE_NUMBER_ID,\n          // DO NOT send assistantId -> this makes it a \"Transient Assistant\"\n          customer: {\n            number: phoneNumber,\n            name: callback.name\n          },\n          assistant: {\n            name: \"Maya Callback Agent\",\n            firstMessage: `Hello, I am Maya from Star Hospital. Am I speaking with ${callback.name}?`,\n            transcriber: {\n              provider: \"deepgram\",\n              model: \"nova-2\",\n              language: \"en-IN\"\n            },\n            voice: {\n              provider: \"11labs\",\n              voiceId: \"21m00Tcm4TlvDq8ikWAM\", // Rachel (Standard 11Labs voice)\n              stability: 0.5,\n              similarityBoost: 0.75\n            },\n            model: {\n              provider: \"openai\",\n              model: \"gpt-4o-mini\",\n              messages: [\n                {\n                  role: \"system\",\n                  content: `You are Maya, a friendly and professional receptionist for Star Hospital.\n                  You are calling to follow up on a callback request from a patient.\n                  \n                  Patient Name: ${callback.name}\n                  \n                  Instructions:\n                  1. You've already introduced yourself in the first message.\n                  2. Ask how you can help the patient.\n                  3. Be polite, warm, and concise in your responses.\n                  4. Always maintain a professional yet friendly tone.\n                  5. If they have medical questions, offer to book an appointment with a doctor.\n                  `\n                }\n              ]\n            }\n          }\n        })\n      });\n\n      console.log(\"Vapi status:\", response.status);\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Vapi Success:\", data);\n        toast.success(\"AI Call Initiated! Maya should speak shortly.\", { id: toastId });\n      } else {\n        const errorText = await response.text();\n        console.error(\"Vapi Error body:\", errorText);\n        try {\n          const errorData = JSON.parse(errorText);\n          toast.error(`Error: ${errorData.message || response.statusText}`, { id: toastId });\n        } catch (e) {\n          toast.error(`Error (Status: ${response.status})`, { id: toastId });\n        }\n      }\n    } catch (error: any) {\n      console.error(\"Call Error:\", error);\n      toast.error(`Network error: ${error.message}`, { id: toastId });\n    }\n  };\n\n  const filteredCallbacks = callbacks.filter((callback) =>\n    callback.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n    callback.phone.includes(searchQuery)\n  );\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'pending':\n        return <Badge variant=\"outline\" className=\"bg-yellow-50 text-yellow-700 border-yellow-200\"><Clock className=\"h-3 w-3 mr-1\" />Pending</Badge>;\n      case 'completed':\n        return <Badge variant=\"outline\" className=\"bg-green-50 text-green-700 border-green-200\"><CheckCircle className=\"h-3 w-3 mr-1\" />Completed</Badge>;\n      case 'cancelled':\n        return <Badge variant=\"outline\" className=\"bg-red-50 text-red-700 border-red-200\"><XCircle className=\"h-3 w-3 mr-1\" />Cancelled</Badge>;\n      default:\n        return <Badge variant=\"secondary\">{status}</Badge>;\n    }\n  };\n\n  return (\n    <DashboardLayout title=\"Callback Requests\" subtitle=\"Manage patient callback requests\">\n      <div className=\"space-y-6\">\n        {/* Filters */}\n        <Card>\n          <CardContent className=\"pt-6\">\n            <div className=\"flex flex-col md:flex-row gap-4\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by name or phone...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-9\"\n                />\n              </div>\n              <Select value={statusFilter} onValueChange={setStatusFilter}>\n                <SelectTrigger className=\"w-full md:w-48\">\n                  <SelectValue placeholder=\"Filter by status\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All Status</SelectItem>\n                  <SelectItem value=\"pending\">Pending</SelectItem>\n                  <SelectItem value=\"completed\">Completed</SelectItem>\n                  <SelectItem value=\"cancelled\">Cancelled</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Callbacks Table */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <PhoneCall className=\"h-5 w-5\" />\n              Callback Requests ({filteredCallbacks.length})\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {isLoading ? (\n              <div className=\"text-center py-8 text-muted-foreground\">Loading...</div>\n            ) : filteredCallbacks.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Phone className=\"h-12 w-12 mx-auto mb-4 opacity-50\" />\n                <p>No callback requests found</p>\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>Name</TableHead>\n                      <TableHead>Phone</TableHead>\n                      <TableHead>Preferred Time</TableHead>\n                      <TableHead>Reason</TableHead>\n                      <TableHead>Requested</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {filteredCallbacks.map((callback) => (\n                      <TableRow key={callback.id}>\n                        <TableCell className=\"font-medium\">{callback.name}</TableCell>\n                        <TableCell>\n                          <a href={`tel:${callback.phone}`} className=\"text-primary hover:underline flex items-center gap-1\">\n                            <Phone className=\"h-3 w-3\" />\n                            {callback.phone}\n                          </a>\n                        </TableCell>\n                        <TableCell>{callback.preferred_time || 'Anytime'}</TableCell>\n                        <TableCell className=\"max-w-[200px] truncate\">{callback.reason || '-'}</TableCell>\n                        <TableCell>{format(new Date(callback.created_at), 'MMM d, yyyy h:mm a')}</TableCell>\n                        <TableCell>{getStatusBadge(callback.status)}</TableCell>\n                        <TableCell>\n                          <div className=\"flex gap-2\">\n                            {callback.status === 'pending' && (\n                              <>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  className=\"text-blue-600 hover:bg-blue-50\"\n                                  onClick={() => window.location.href = `tel:${callback.phone}`}\n                                >\n                                  <Phone className=\"h-4 w-4 mr-1\" /> Call\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  className=\"text-purple-600 hover:bg-purple-50 border-purple-200\"\n                                  onClick={() => triggerAICall(callback)}\n                                >\n                                  <Bot className=\"h-4 w-4 mr-1\" /> AI Call\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  className=\"text-green-600 hover:bg-green-50\"\n                                  onClick={() => updateStatusMutation.mutate({ id: callback.id, status: 'completed' })}\n                                >\n                                  Complete\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  className=\"text-red-600 hover:bg-red-50\"\n                                  onClick={() => updateStatusMutation.mutate({ id: callback.id, status: 'cancelled' })}\n                                >\n                                  Cancel\n                                </Button>\n                              </>\n                            )}\n                            {callback.status !== 'pending' && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => updateStatusMutation.mutate({ id: callback.id, status: 'pending' })}\n                              >\n                                Reopen\n                              </Button>\n                            )}\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport default CallbacksPage;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\ComingSoon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Departments.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Doctors.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":25,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":45}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Search, Plus, Phone, Mail, Calendar, Star, Loader2, Trash2, Clock } from \"lucide-react\";\nimport { useDoctors, useDeleteDoctor, Doctor } from \"@/hooks/useDoctors\";\nimport AddDoctorModal from \"@/components/modals/AddDoctorModal\";\nimport SetScheduleModal from \"@/components/modals/SetScheduleModal\";\n\nconst Doctors = () => {\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showScheduleModal, setShowScheduleModal] = useState(false);\n  const [selectedDoctor, setSelectedDoctor] = useState<Doctor | null>(null);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [availabilityFilter, setAvailabilityFilter] = useState(\"all\");\n  const [deleteId, setDeleteId] = useState<string | null>(null);\n\n  const { data: doctors, isLoading } = useDoctors();\n  const deleteDoctor = useDeleteDoctor();\n\n  const filteredDoctors = doctors?.filter((doctor) => {\n    const matchesSearch =\n      doctor.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      doctor.specialty.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesAvailability =\n      availabilityFilter === \"all\" ||\n      (availabilityFilter === \"available\" && doctor.available) ||\n      (availabilityFilter === \"busy\" && !doctor.available);\n    return matchesSearch && matchesAvailability;\n  });\n\n  const handleDelete = async () => {\n    if (deleteId) {\n      await deleteDoctor.mutateAsync(deleteId);\n      setDeleteId(null);\n    }\n  };\n\n  const openScheduleModal = (doctor: Doctor) => {\n    setSelectedDoctor(doctor);\n    setShowScheduleModal(true);\n  };\n\n  return (\n    <DashboardLayout title=\"Doctors\" subtitle=\"Manage medical staff and their schedules\">\n      {/* Action Bar */}\n      <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search doctors by name or specialty...\"\n            className=\"pl-10\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n          />\n        </div>\n        <div className=\"flex gap-3\">\n          <Select value={availabilityFilter} onValueChange={setAvailabilityFilter}>\n            <SelectTrigger className=\"w-36\">\n              <SelectValue placeholder=\"Availability\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All</SelectItem>\n              <SelectItem value=\"available\">Available</SelectItem>\n              <SelectItem value=\"busy\">On Leave</SelectItem>\n            </SelectContent>\n          </Select>\n          <Button onClick={() => setShowAddModal(true)}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Doctor\n          </Button>\n        </div>\n      </div>\n\n      {/* Doctors Grid */}\n      {isLoading ? (\n        <div className=\"flex items-center justify-center py-12\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      ) : filteredDoctors?.length === 0 ? (\n        <div className=\"text-center py-12 text-muted-foreground\">\n          No doctors found. Add your first doctor to get started.\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n          {filteredDoctors?.map((doctor) => (\n            <Card key={doctor.id} className=\"card-shadow border-border/50 hover:shadow-elevated transition-shadow duration-300 animate-fade-in\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex flex-col items-center text-center\">\n                  <div className=\"relative\">\n                    <Avatar className=\"w-20 h-20 mb-4\">\n                      <AvatarFallback className=\"bg-primary/10 text-primary text-xl font-semibold\">\n                        {doctor.name.split(\" \").slice(1).map((n) => n[0]).join(\"\") || doctor.name.split(\" \")[0][0]}\n                      </AvatarFallback>\n                    </Avatar>\n                    <span className={`absolute bottom-4 right-0 w-4 h-4 rounded-full border-2 border-card ${doctor.available ? 'bg-success' : 'bg-muted-foreground'}`} />\n                  </div>\n                  <h3 className=\"font-heading font-semibold text-foreground\">{doctor.name}</h3>\n                  <Badge variant=\"secondary\" className=\"mt-2\">{doctor.specialty}</Badge>\n                  <div className=\"flex items-center gap-1 mt-2 text-warning\">\n                    <Star className=\"w-4 h-4 fill-current\" />\n                    <span className=\"text-sm font-medium\">{doctor.rating}</span>\n                  </div>\n                  <div className=\"mt-4 w-full space-y-2 text-sm text-muted-foreground\">\n                    <div className=\"flex justify-between\">\n                      <span>Experience</span>\n                      <span className=\"text-foreground font-medium\">{doctor.experience || \"â€”\"}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Patients</span>\n                      <span className=\"text-foreground font-medium\">{doctor.total_patients.toLocaleString()}</span>\n                    </div>\n                  </div>\n                  <div className=\"flex gap-2 mt-4 w-full\">\n                    {doctor.phone && (\n                      <Button variant=\"outline\" size=\"sm\" className=\"flex-1\" onClick={() => window.open(`tel:${doctor.phone}`)}>\n                        <Phone className=\"w-4 h-4\" />\n                      </Button>\n                    )}\n                    {doctor.email && (\n                      <Button variant=\"outline\" size=\"sm\" className=\"flex-1\" onClick={() => window.open(`mailto:${doctor.email}`)}>\n                        <Mail className=\"w-4 h-4\" />\n                      </Button>\n                    )}\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"flex-1\"\n                      onClick={() => openScheduleModal(doctor)}\n                      title=\"Set Schedule\"\n                    >\n                      <Clock className=\"w-4 h-4\" />\n                    </Button>\n                    <Button variant=\"outline\" size=\"sm\" className=\"text-destructive hover:text-destructive\" onClick={() => setDeleteId(doctor.id)}>\n                      <Trash2 className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                  <Button className=\"w-full mt-3\" variant={doctor.available ? \"default\" : \"secondary\"} disabled={!doctor.available}>\n                    {doctor.available ? \"Book Appointment\" : \"On Leave\"}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <AddDoctorModal open={showAddModal} onOpenChange={setShowAddModal} />\n      <SetScheduleModal\n        open={showScheduleModal}\n        onOpenChange={setShowScheduleModal}\n        doctor={selectedDoctor}\n      />\n\n      <AlertDialog open={!!deleteId} onOpenChange={() => setDeleteId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Doctor</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this doctor? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleDelete} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </DashboardLayout>\n  );\n};\n\nexport default Doctors;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Index.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TrendingUp' is defined but never used.","line":24,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\nimport StatCard from \"@/components/dashboard/StatCard\";\nimport { Users, CalendarCheck, BedDouble, Stethoscope, Loader2, Clock, User } from \"lucide-react\";\nimport { usePatients } from \"@/hooks/usePatients\";\nimport { useDoctors } from \"@/hooks/useDoctors\";\nimport { useAppointments } from \"@/hooks/useAppointments\";\nimport { useDepartments } from \"@/hooks/useDepartments\";\nimport { format } from \"date-fns\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { cn } from \"@/lib/utils\";\nimport { \n  UserPlus, \n  CalendarPlus, \n  BedDouble as BedIcon,\n  Pill,\n  FileText,\n  ClipboardCheck,\n  Building2,\n  TrendingUp\n} from \"lucide-react\";\nimport AddPatientModal from \"@/components/modals/AddPatientModal\";\nimport AddAppointmentModal from \"@/components/modals/AddAppointmentModal\";\n\nconst statusStyles = {\n  confirmed: \"bg-success/10 text-success border-success/20\",\n  pending: \"bg-warning/10 text-warning border-warning/20\",\n  \"in-progress\": \"bg-info/10 text-info border-info/20\",\n  cancelled: \"bg-destructive/10 text-destructive border-destructive/20\",\n};\n\nconst Index = () => {\n  const navigate = useNavigate();\n  const [showAddPatient, setShowAddPatient] = useState(false);\n  const [showAddAppointment, setShowAddAppointment] = useState(false);\n\n  const { data: patients, isLoading: patientsLoading } = usePatients();\n  const { data: doctors, isLoading: doctorsLoading } = useDoctors();\n  const { data: appointments, isLoading: appointmentsLoading } = useAppointments(format(new Date(), \"yyyy-MM-dd\"));\n  const { data: departments, isLoading: departmentsLoading } = useDepartments();\n\n  const isLoading = patientsLoading || doctorsLoading || appointmentsLoading || departmentsLoading;\n\n  const totalBeds = departments?.reduce((sum, d) => sum + d.total_beds, 0) || 0;\n  const occupiedBeds = departments?.reduce((sum, d) => sum + d.occupied_beds, 0) || 0;\n  const availableBeds = totalBeds - occupiedBeds;\n\n  const availableDoctors = doctors?.filter(d => d.available).length || 0;\n  const pendingAppointments = appointments?.filter(a => a.status === \"pending\").length || 0;\n\n  const formatTime = (time: string) => {\n    const [hours, minutes] = time.split(\":\");\n    const hour = parseInt(hours);\n    const ampm = hour >= 12 ? \"PM\" : \"AM\";\n    const displayHour = hour % 12 || 12;\n    return `${displayHour}:${minutes} ${ampm}`;\n  };\n\n  const quickActions = [\n    { icon: UserPlus, label: \"Add Patient\", description: \"Register new patient\", color: \"bg-primary/10 text-primary hover:bg-primary/20\", onClick: () => setShowAddPatient(true) },\n    { icon: CalendarPlus, label: \"New Appointment\", description: \"Schedule appointment\", color: \"bg-info/10 text-info hover:bg-info/20\", onClick: () => setShowAddAppointment(true) },\n    { icon: BedIcon, label: \"Bed Management\", description: \"Manage bed allocation\", color: \"bg-success/10 text-success hover:bg-success/20\", onClick: () => navigate(\"/beds\") },\n    { icon: Pill, label: \"Prescriptions\", description: \"Write prescription\", color: \"bg-warning/10 text-warning hover:bg-warning/20\", onClick: () => {} },\n    { icon: FileText, label: \"Lab Reports\", description: \"View lab results\", color: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\", onClick: () => navigate(\"/reports\") },\n    { icon: ClipboardCheck, label: \"Discharge\", description: \"Process discharge\", color: \"bg-accent text-accent-foreground hover:bg-accent/80\", onClick: () => {} },\n  ];\n\n  if (isLoading) {\n    return (\n      <DashboardLayout title=\"Dashboard\" subtitle=\"Loading...\">\n        <div className=\"flex items-center justify-center py-24\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n        </div>\n      </DashboardLayout>\n    );\n  }\n\n  return (\n    <DashboardLayout \n      title=\"Dashboard\" \n      subtitle=\"Welcome back! Here's an overview of your hospital.\"\n    >\n      {/* Stats Row */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\n        <StatCard\n          title=\"Total Patients\"\n          value={patients?.length || 0}\n          change={`${patients?.filter(p => p.status === \"admitted\").length || 0} currently admitted`}\n          changeType=\"neutral\"\n          icon={Users}\n          iconColor=\"primary\"\n        />\n        <StatCard\n          title=\"Today's Appointments\"\n          value={appointments?.length || 0}\n          change={`${pendingAppointments} pending confirmation`}\n          changeType=\"neutral\"\n          icon={CalendarCheck}\n          iconColor=\"info\"\n        />\n        <StatCard\n          title=\"Available Beds\"\n          value={availableBeds}\n          change={`Out of ${totalBeds} total`}\n          changeType=\"neutral\"\n          icon={BedDouble}\n          iconColor=\"success\"\n        />\n        <StatCard\n          title=\"Active Doctors\"\n          value={availableDoctors}\n          change={`${(doctors?.length || 0) - availableDoctors} on leave`}\n          changeType=\"neutral\"\n          icon={Stethoscope}\n          iconColor=\"warning\"\n        />\n      </div>\n\n      {/* Main Content Grid */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6\">\n        {/* Left Column - Appointments */}\n        <div className=\"lg:col-span-2\">\n          <div className=\"bg-card rounded-xl card-shadow border border-border/50 animate-fade-in\">\n            <div className=\"p-6 border-b border-border\">\n              <h3 className=\"text-lg font-heading font-semibold text-foreground\">\n                Today's Appointments\n              </h3>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                {appointments?.length || 0} appointments scheduled\n              </p>\n            </div>\n            <div className=\"divide-y divide-border max-h-[400px] overflow-y-auto\">\n              {appointments?.length === 0 ? (\n                <div className=\"p-8 text-center text-muted-foreground\">\n                  No appointments scheduled for today.\n                </div>\n              ) : (\n                appointments?.slice(0, 5).map((apt) => (\n                  <div key={apt.id} className=\"p-4 hover:bg-muted/50 transition-colors duration-200\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-4\">\n                        <Avatar className=\"w-10 h-10\">\n                          <AvatarFallback className=\"bg-secondary text-secondary-foreground text-sm font-medium\">\n                            {apt.patients?.name?.split(\" \").map((n) => n[0]).join(\"\") || \"?\"}\n                          </AvatarFallback>\n                        </Avatar>\n                        <div>\n                          <p className=\"font-medium text-foreground\">{apt.patients?.name || \"Unknown\"}</p>\n                          <div className=\"flex items-center gap-2 mt-1\">\n                            <Stethoscope className=\"w-3 h-3 text-muted-foreground\" />\n                            <span className=\"text-sm text-muted-foreground\">{apt.doctors?.name || \"Unknown\"}</span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"flex items-center gap-1 text-sm text-foreground\">\n                          <Clock className=\"w-3 h-3\" />\n                          {formatTime(apt.appointment_time)}\n                        </div>\n                        <Badge\n                          variant=\"outline\"\n                          className={cn(\"mt-1 capitalize\", statusStyles[apt.status as keyof typeof statusStyles] || statusStyles.pending)}\n                        >\n                          {apt.status}\n                        </Badge>\n                      </div>\n                    </div>\n                    <div className=\"mt-2\">\n                      <Badge variant=\"secondary\" className=\"text-xs\">{apt.type}</Badge>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n            <div className=\"p-4 border-t border-border\">\n              <button \n                className=\"w-full text-center text-sm font-medium text-primary hover:text-primary/80 transition-colors\"\n                onClick={() => navigate(\"/appointments\")}\n              >\n                View All Appointments â†’\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        {/* Right Column - Quick Actions & Departments */}\n        <div className=\"space-y-6\">\n          {/* Quick Actions */}\n          <div className=\"bg-card rounded-xl card-shadow border border-border/50 p-6 animate-fade-in\">\n            <h3 className=\"text-lg font-heading font-semibold text-foreground mb-4\">Quick Actions</h3>\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-2 gap-3\">\n              {quickActions.map((action) => (\n                <Button\n                  key={action.label}\n                  variant=\"ghost\"\n                  className={`h-auto flex-col items-center gap-2 p-4 ${action.color} transition-all duration-200`}\n                  onClick={action.onClick}\n                >\n                  <action.icon className=\"w-6 h-6\" />\n                  <div className=\"text-center\">\n                    <p className=\"text-sm font-medium\">{action.label}</p>\n                    <p className=\"text-xs opacity-70\">{action.description}</p>\n                  </div>\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          {/* Department Status */}\n          <div className=\"bg-card rounded-xl card-shadow border border-border/50 animate-fade-in\">\n            <div className=\"p-6 border-b border-border\">\n              <h3 className=\"text-lg font-heading font-semibold text-foreground\">Department Status</h3>\n              <p className=\"text-sm text-muted-foreground mt-1\">Current occupancy</p>\n            </div>\n            <div className=\"p-4 space-y-4 max-h-[300px] overflow-y-auto\">\n              {departments?.slice(0, 5).map((dept) => {\n                const occupancy = dept.total_beds > 0 ? Math.round((dept.occupied_beds / dept.total_beds) * 100) : 0;\n                return (\n                  <div key={dept.id} className=\"p-4 rounded-lg bg-muted/30 hover:bg-muted/50 transition-colors duration-200\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"p-2 rounded-lg bg-primary/10\">\n                          <Building2 className=\"w-4 h-4 text-primary\" />\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-foreground\">{dept.name}</p>\n                          <div className=\"flex items-center gap-3 text-xs text-muted-foreground mt-0.5\">\n                            <span className=\"flex items-center gap-1\">\n                              <User className=\"w-3 h-3\" />\n                              {dept.doctors_count} doctors\n                            </span>\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-lg font-semibold text-foreground\">\n                          {dept.occupied_beds}\n                          <span className=\"text-sm font-normal text-muted-foreground\">/{dept.total_beds}</span>\n                        </p>\n                        <p className=\"text-xs text-muted-foreground\">beds</p>\n                      </div>\n                    </div>\n                    <Progress\n                      value={occupancy}\n                      className={cn(\n                        \"h-2\",\n                        occupancy > 80 && \"[&>div]:bg-warning\",\n                        occupancy > 90 && \"[&>div]:bg-destructive\"\n                      )}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Recent Patients Table */}\n      <div className=\"bg-card rounded-xl card-shadow border border-border/50 animate-fade-in\">\n        <div className=\"p-6 border-b border-border flex items-center justify-between\">\n          <div>\n            <h3 className=\"text-lg font-heading font-semibold text-foreground\">Recent Patients</h3>\n            <p className=\"text-sm text-muted-foreground mt-1\">Recently registered patients</p>\n          </div>\n          <Button variant=\"outline\" size=\"sm\" onClick={() => navigate(\"/patients\")}>\n            View All\n          </Button>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead>\n              <tr className=\"border-b border-border bg-muted/30\">\n                <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Patient</th>\n                <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Condition</th>\n                <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Room</th>\n                <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Status</th>\n              </tr>\n            </thead>\n            <tbody className=\"divide-y divide-border\">\n              {patients?.slice(0, 4).map((patient) => (\n                <tr key={patient.id} className=\"hover:bg-muted/30 transition-colors duration-200\">\n                  <td className=\"p-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <Avatar className=\"w-10 h-10\">\n                        <AvatarFallback className=\"bg-secondary text-secondary-foreground text-sm font-medium\">\n                          {patient.name.split(\" \").map((n) => n[0]).join(\"\")}\n                        </AvatarFallback>\n                      </Avatar>\n                      <div>\n                        <p className=\"font-medium text-foreground\">{patient.name}</p>\n                        <p className=\"text-sm text-muted-foreground\">{patient.age} yrs, {patient.gender}</p>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"p-4\">\n                    <p className=\"text-foreground\">{patient.condition || \"â€”\"}</p>\n                  </td>\n                  <td className=\"p-4\">\n                    {patient.room ? (\n                      <Badge variant=\"secondary\" className=\"font-mono\">{patient.room}</Badge>\n                    ) : \"â€”\"}\n                  </td>\n                  <td className=\"p-4\">\n                    <Badge\n                      variant=\"outline\"\n                      className={cn(\n                        patient.status === \"stable\" && \"bg-success/10 text-success border-success/20\",\n                        patient.status === \"admitted\" && \"bg-info/10 text-info border-info/20\",\n                        patient.status === \"critical\" && \"bg-destructive/10 text-destructive border-destructive/20\",\n                        patient.status === \"outpatient\" && \"bg-success/10 text-success border-success/20\"\n                      )}\n                    >\n                      {patient.status}\n                    </Badge>\n                  </td>\n                </tr>\n              ))}\n              {(!patients || patients.length === 0) && (\n                <tr>\n                  <td colSpan={4} className=\"p-8 text-center text-muted-foreground\">\n                    No patients yet. Add your first patient to get started.\n                  </td>\n                </tr>\n              )}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      <AddPatientModal open={showAddPatient} onOpenChange={setShowAddPatient} />\n      <AddAppointmentModal open={showAddAppointment} onOpenChange={setShowAddAppointment} />\n    </DashboardLayout>\n  );\n};\n\nexport default Index;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Login.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { toast } from 'sonner';\nimport { Heart } from 'lucide-react';\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { signIn } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!email.trim() || !password.trim()) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await signIn(email, password);\n    setLoading(false);\n\n    if (error) {\n      toast.error(error.message || 'Failed to sign in');\n    } else {\n      toast.success('Signed in successfully');\n      navigate('/');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <img src=\"/logo.png\" alt=\"MediCare Logo\" className=\"h-8 w-8 object-contain\" />\n            <span className=\"text-2xl font-bold text-primary\">MediCare</span>\n          </div>\n          <CardTitle className=\"text-2xl\">Welcome Back</CardTitle>\n          <CardDescription>\n            Sign in to access the Hospital Management System\n          </CardDescription>\n        </CardHeader>\n        <form onSubmit={handleSubmit}>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"Enter your email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                autoComplete=\"email\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                autoComplete=\"current-password\"\n              />\n            </div>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n              {loading ? 'Signing in...' : 'Sign In'}\n            </Button>\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Don't have an account?{' '}\n              <Link to=\"/register\" className=\"text-primary hover:underline\">\n                Register here\n              </Link>\n            </p>\n          </CardFooter>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\nexport default Login;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\NotFound.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":8,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":8,"endColumn":18,"suggestions":[{"fix":{"range":[168,260],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useLocation } from \"react-router-dom\";\nimport { useEffect } from \"react\";\n\nconst NotFound = () => {\n  const location = useLocation();\n\n  useEffect(() => {\n    console.error(\"404 Error: User attempted to access non-existent route:\", location.pathname);\n  }, [location.pathname]);\n\n  return (\n    <div className=\"flex min-h-screen items-center justify-center bg-muted\">\n      <div className=\"text-center\">\n        <h1 className=\"mb-4 text-4xl font-bold\">404</h1>\n        <p className=\"mb-4 text-xl text-muted-foreground\">Oops! Page not found</p>\n        <a href=\"/\" className=\"text-primary underline hover:text-primary/90\">\n          Return to Home\n        </a>\n      </div>\n    </div>\n  );\n};\n\nexport default NotFound;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Patients.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":48,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":48,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1746,1749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1746,1749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Search, Plus, MoreHorizontal, Phone, Mail, FileText, Trash2, Loader2 } from \"lucide-react\";\nimport { usePatients, useDeletePatient } from \"@/hooks/usePatients\";\nimport AddPatientModal from \"@/components/modals/AddPatientModal\";\nimport PatientDetailsModal from \"@/components/modals/PatientDetailsModal\";\nimport UploadReportModal from \"@/components/modals/UploadReportModal\";\n\nconst statusStyles = {\n  admitted: \"bg-info/10 text-info border-info/20\",\n  outpatient: \"bg-success/10 text-success border-success/20\",\n  critical: \"bg-destructive/10 text-destructive border-destructive/20\",\n  discharged: \"bg-muted text-muted-foreground border-muted\",\n};\n\nconst Patients = () => {\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [deleteId, setDeleteId] = useState<string | null>(null);\n  const [selectedPatient, setSelectedPatient] = useState<any>(null);\n  const [showDetailsModal, setShowDetailsModal] = useState(false);\n  const [showUploadModal, setShowUploadModal] = useState(false);\n\n  const { data: patients, isLoading } = usePatients();\n  const deletePatient = useDeletePatient();\n\n  const filteredPatients = patients?.filter((patient) => {\n    const matchesSearch =\n      patient.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      patient.patient_id.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      (patient.condition?.toLowerCase().includes(searchQuery.toLowerCase()));\n    const matchesStatus = statusFilter === \"all\" || patient.status === statusFilter;\n    return matchesSearch && matchesStatus;\n  });\n\n  const handleDelete = async () => {\n    if (deleteId) {\n      await deletePatient.mutateAsync(deleteId);\n      setDeleteId(null);\n    }\n  };\n\n  return (\n    <DashboardLayout title=\"Patients\" subtitle=\"Manage patient records and information\">\n      {/* Action Bar */}\n      <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search patients by name, ID, or condition...\"\n            className=\"pl-10\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n          />\n        </div>\n        <div className=\"flex gap-3\">\n          <Select value={statusFilter} onValueChange={setStatusFilter}>\n            <SelectTrigger className=\"w-40\">\n              <SelectValue placeholder=\"Status\" />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">All Status</SelectItem>\n              <SelectItem value=\"admitted\">Admitted</SelectItem>\n              <SelectItem value=\"outpatient\">Outpatient</SelectItem>\n              <SelectItem value=\"critical\">Critical</SelectItem>\n              <SelectItem value=\"discharged\">Discharged</SelectItem>\n            </SelectContent>\n          </Select>\n          <Button onClick={() => setShowAddModal(true)}>\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Add Patient\n          </Button>\n        </div>\n      </div>\n\n      {/* Patients Table */}\n      <div className=\"bg-card rounded-xl card-shadow border border-border/50 animate-fade-in\">\n        {isLoading ? (\n          <div className=\"flex items-center justify-center py-12\">\n            <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\n          </div>\n        ) : (\n          <>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-border bg-muted/30\">\n                    <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Patient</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">ID</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Contact</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Condition</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Room</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Status</th>\n                    <th className=\"text-left p-4 text-sm font-medium text-muted-foreground\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-border\">\n                  {filteredPatients?.length === 0 ? (\n                    <tr>\n                      <td colSpan={7} className=\"p-8 text-center text-muted-foreground\">\n                        No patients found. Add your first patient to get started.\n                      </td>\n                    </tr>\n                  ) : (\n                    filteredPatients?.map((patient) => (\n                      <tr key={patient.id} className=\"hover:bg-muted/30 transition-colors duration-200\">\n                        <td className=\"p-4\">\n                          <div className=\"flex items-center gap-3\">\n                            <Avatar className=\"w-10 h-10\">\n                              <AvatarFallback className=\"bg-secondary text-secondary-foreground text-sm font-medium\">\n                                {patient.name.split(\" \").map((n) => n[0]).join(\"\")}\n                              </AvatarFallback>\n                            </Avatar>\n                            <div>\n                              <p className=\"font-medium text-foreground\">{patient.name}</p>\n                              <p className=\"text-sm text-muted-foreground\">{patient.age} yrs, {patient.gender}</p>\n                            </div>\n                          </div>\n                        </td>\n                        <td className=\"p-4\">\n                          <code className=\"text-sm bg-muted px-2 py-1 rounded\">{patient.patient_id}</code>\n                        </td>\n                        <td className=\"p-4\">\n                          <p className=\"text-sm text-foreground\">{patient.phone || \"â€”\"}</p>\n                        </td>\n                        <td className=\"p-4\">\n                          <p className=\"text-foreground\">{patient.condition || \"â€”\"}</p>\n                        </td>\n                        <td className=\"p-4\">\n                          {patient.room ? (\n                            <Badge variant=\"secondary\" className=\"font-mono\">{patient.room}</Badge>\n                          ) : \"â€”\"}\n                        </td>\n                        <td className=\"p-4\">\n                          <Badge variant=\"outline\" className={statusStyles[patient.status as keyof typeof statusStyles] || statusStyles.outpatient}>\n                            {patient.status}\n                          </Badge>\n                        </td>\n                        <td className=\"p-4\">\n                          <DropdownMenu>\n                            <DropdownMenuTrigger asChild>\n                              <Button variant=\"ghost\" size=\"icon\">\n                                <MoreHorizontal className=\"w-4 h-4\" />\n                              </Button>\n                            </DropdownMenuTrigger>\n                            <DropdownMenuContent align=\"end\">\n                              <DropdownMenuItem onClick={() => { setSelectedPatient(patient); setShowUploadModal(true); }}>\n                                <FileText className=\"w-4 h-4 mr-2\" />\n                                Upload Record\n                              </DropdownMenuItem>\n                              <DropdownMenuItem onClick={() => { setSelectedPatient(patient); setShowDetailsModal(true); }}>\n                                <FileText className=\"w-4 h-4 mr-2\" />\n                                View Records\n                              </DropdownMenuItem>\n                              <DropdownMenuItem>Edit Details</DropdownMenuItem>\n                              {patient.phone && (\n                                <DropdownMenuItem onClick={() => window.open(`tel:${patient.phone}`)}>\n                                  <Phone className=\"w-4 h-4 mr-2\" />\n                                  Call\n                                </DropdownMenuItem>\n                              )}\n                              {patient.email && (\n                                <DropdownMenuItem onClick={() => window.open(`mailto:${patient.email}`)}>\n                                  <Mail className=\"w-4 h-4 mr-2\" />\n                                  Email\n                                </DropdownMenuItem>\n                              )}\n                              <DropdownMenuItem\n                                className=\"text-destructive\"\n                                onClick={() => setDeleteId(patient.id)}\n                              >\n                                <Trash2 className=\"w-4 h-4 mr-2\" />\n                                Delete\n                              </DropdownMenuItem>\n                            </DropdownMenuContent>\n                          </DropdownMenu>\n                        </td>\n                      </tr>\n                    ))\n                  )}\n                </tbody>\n              </table>\n            </div>\n            <div className=\"p-4 border-t border-border flex items-center justify-between\">\n              <p className=\"text-sm text-muted-foreground\">\n                Showing {filteredPatients?.length || 0} of {patients?.length || 0} patients\n              </p>\n            </div>\n          </>\n        )}\n      </div>\n\n      <AddPatientModal open={showAddModal} onOpenChange={setShowAddModal} />\n      <PatientDetailsModal open={showDetailsModal} onOpenChange={setShowDetailsModal} patient={selectedPatient} />\n      <UploadReportModal\n        open={showUploadModal}\n        onOpenChange={setShowUploadModal}\n        patientId={selectedPatient?.id}\n        patientName={selectedPatient?.name}\n      />\n\n      <AlertDialog open={!!deleteId} onOpenChange={() => setDeleteId(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Patient</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete this patient? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction onClick={handleDelete} className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\">\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </DashboardLayout>\n  );\n};\n\nexport default Patients;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\PortalSelect.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":1,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useQuery' is defined but never used.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardDescription' is defined but never used.","line":5,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardHeader' is defined but never used.","line":5,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CardTitle' is defined but never used.","line":5,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":67},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Award' is defined but never used.","line":8,"column":67,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":72},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Search' is defined but never used.","line":8,"column":175,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":181},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":79,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":79,"endColumn":22,"suggestions":[{"fix":{"range":[3560,3600],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useQuery } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Heart, Users, Stethoscope, MapPin, Phone, Clock, Shield, Award, Building2, ChevronRight, Newspaper, ArrowRight, Facebook, Twitter, Instagram, Linkedin, Mail, LogIn, Search, CheckCircle2 } from 'lucide-react';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useMutation } from '@tanstack/react-query';\nimport { toast } from 'sonner';\nimport { PhoneCall } from 'lucide-react';\nimport LoginPromptModal from '@/components/landing/LoginPromptModal';\nimport DoctorCard from '@/components/landing/DoctorCard';\nimport NewsCard from '@/components/landing/NewsCard';\nimport HowToUseSection from '@/components/landing/HowToUseSection';\n\nconst newsArticles = [{\n  title: 'New Cardiac Care Wing Opens',\n  excerpt: 'Medicare Hospital is proud to announce the opening of our new cardiac care wing, equipped with the latest diagnostic and treatment technologies.',\n  date: 'Jan 15, 2026',\n  category: 'Hospital News',\n  url: 'https://news.google.com/search?q=cardiac+care+hospital'\n}, {\n  title: 'Free Health Checkup Camp',\n  excerpt: 'Join us for a comprehensive free health checkup camp including blood pressure, diabetes screening, and general health assessment.',\n  date: 'Jan 12, 2026',\n  category: 'Events',\n  url: 'https://news.google.com/search?q=health+camp'\n}, {\n  title: 'Winter Health Tips',\n  excerpt: 'Our doctors share essential tips for staying healthy during the cold season, including nutrition advice and exercise recommendations.',\n  date: 'Jan 10, 2026',\n  category: 'Health Tips',\n  url: 'https://news.google.com/search?q=winter+health+tips'\n}];\n\nconst PortalSelect = () => {\n  const navigate = useNavigate();\n\n  // Callback State\n  const [callbackOpen, setCallbackOpen] = useState(false);\n  const [callbackName, setCallbackName] = useState('');\n  const [callbackPhone, setCallbackPhone] = useState('');\n  const [callbackEmail, setCallbackEmail] = useState('');\n  const [callbackTime, setCallbackTime] = useState('');\n  const [callbackReason, setCallbackReason] = useState('');\n\n  // Request callback mutation\n  const requestCallbackMutation = useMutation({\n    mutationFn: async () => {\n      if (!callbackName || !callbackPhone) {\n        throw new Error('Please provide your name and phone number');\n      }\n\n      // Bypass RLS by using the Edge Function to insert\n      // The Edge Function runs with Service Role privileges\n      const { data, error } = await supabase.functions.invoke('vapi-callback-request', {\n        body: {\n          name: callbackName,\n          phone: callbackPhone,\n          email: callbackEmail || null,\n          preferred_time: callbackTime || null,\n          reason: callbackReason || null,\n        }\n      });\n\n      if (error) {\n        console.error(\"Function Error:\", error);\n        throw new Error(error.message || 'Failed to submit request');\n      }\n\n      // If the function handles everything (insert + call), we are good.\n      // The function returns 'ok: true' or similar on success, maybe the call details?\n      return data;\n    },\n    onSuccess: () => {\n      toast.success('Callback request submitted! Our AI agent will call you shortly.');\n      setCallbackOpen(false);\n      setCallbackName('');\n      setCallbackPhone('');\n      setCallbackEmail('');\n      setCallbackTime('');\n      setCallbackReason('');\n    },\n    onError: (error: Error) => {\n      toast.error(error.message);\n    },\n  });\n\n  // Hardcoded doctors for display\n  const doctors = [\n    { id: '101', name: 'Dr. Sarah Johnson', specialty: 'Cardiology', experience: '15 years', rating: 4.9, available: true },\n    { id: '102', name: 'Dr. James Smith', specialty: 'Neurology', experience: '12 years', rating: 4.8, available: true },\n    { id: '103', name: 'Dr. Emily Chen', specialty: 'Pediatrics', experience: '10 years', rating: 4.9, available: true },\n    { id: '104', name: 'Dr. Michael Brown', specialty: 'Orthopedics', experience: '18 years', rating: 4.7, available: true },\n  ];\n\n  const isDoctorsLoading = false;\n\n  // Hardcoded departments for display\n  const departments = [\n    { id: '1', name: 'Cardiology', doctors_count: 5 },\n    { id: '2', name: 'Neurology', doctors_count: 4 },\n    { id: '3', name: 'Orthopedics', doctors_count: 6 },\n    { id: '4', name: 'Oncology', doctors_count: 3 },\n    { id: '5', name: 'Pediatrics', doctors_count: 4 },\n    { id: '6', name: 'Emergency', doctors_count: 10 },\n  ];\n\n  const handleNewsClick = (url: string) => {\n    window.open(url, '_blank');\n  };\n\n  return <div className=\"min-h-screen bg-background font-sans\">\n    {/* Timed Login Popup - 5 seconds delay */}\n    <LoginPromptModal delaySeconds={5} />\n\n    {/* Header */}\n    <header className=\"bg-card shadow-md sticky top-0 z-50 border-b border-border/40\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3\">\n        <div className=\"flex items-center justify-between\">\n          {/* Branding */}\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-10 h-10 rounded-xl bg-primary flex items-center justify-center shadow-lg shadow-primary/20\">\n              <img src=\"/logo.png\" alt=\"Medicare Hospital Logo\" className=\"w-8 h-8 object-contain\" />\n            </div>\n            <div>\n              <span className=\"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-primary to-blue-600\">Medicare Hospital</span>\n              <p className=\"text-xs text-muted-foreground hidden sm:block tracking-wide\">Excellence in Healthcare</p>\n            </div>\n          </div>\n\n          {/* Right Side Actions */}\n          <div className=\"flex items-center gap-6\">\n            {/* Socials & Email - Hidden on mobile, visible on md+ */}\n            <div className=\"hidden lg:flex items-center gap-4 border-r pr-6 border-border\">\n              <div className=\"flex items-center gap-3\">\n                <Link to=\"/social-coming-soon\" className=\"text-muted-foreground hover:text-[#0077b5] transition-colors\"><Linkedin className=\"h-5 w-5\" /></Link>\n                <Link to=\"/social-coming-soon\" className=\"text-muted-foreground hover:text-[#E4405F] transition-colors\"><Instagram className=\"h-5 w-5\" /></Link>\n                <Link to=\"/social-coming-soon\" className=\"text-muted-foreground hover:text-[#1DA1F2] transition-colors\"><Twitter className=\"h-5 w-5\" /></Link>\n                <Link to=\"/social-coming-soon\" className=\"text-muted-foreground hover:text-[#1877F2] transition-colors\"><Facebook className=\"h-5 w-5\" /></Link>\n              </div>\n\n            </div>\n\n            {/* Login Dropdown */}\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button size=\"lg\" className=\"gap-2 shadow-lg hover:shadow-xl transition-all duration-300\">\n                  <LogIn className=\"w-4 h-4\" />\n                  Login\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\" className=\"w-56 p-2\">\n                <DropdownMenuItem onClick={() => navigate('/patient/login')} className=\"cursor-pointer py-3 px-3 focus:bg-primary/10\">\n                  <Users className=\"mr-2 h-4 w-4 text-primary\" />\n                  <span className=\"font-medium\">Patient Login</span>\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => navigate('/staff/login')} className=\"cursor-pointer py-3 px-3 focus:bg-emerald-50 text-emerald-700\">\n                  <Stethoscope className=\"mr-2 h-4 w-4\" />\n                  <span className=\"font-medium\">Staff Login</span>\n                </DropdownMenuItem>\n                <DropdownMenuItem onClick={() => navigate('/admin/login')} className=\"cursor-pointer py-3 px-3 focus:bg-purple-50 text-purple-700\">\n                  <Shield className=\"mr-2 h-4 w-4\" />\n                  <span className=\"font-medium\">Admin Login</span>\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          </div>\n        </div>\n      </div>\n    </header>\n\n    {/* Hero Section */}\n    <section className=\"relative bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-950 dark:to-gray-900 py-24 px-4 overflow-hidden\">\n      <div className=\"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1519494026892-80bbd2d6fd0d?q=80&w=2600&auto=format&fit=crop')] bg-cover bg-center opacity-5\" />\n\n      <div className=\"max-w-6xl mx-auto text-center relative z-10\">\n        <Badge className=\"mb-6 bg-primary/10 text-primary border-primary/20 text-sm px-6 py-2 rounded-full uppercase tracking-wider font-semibold\">\n          Trusted by 50,000+ Patients\n        </Badge>\n        <h1 className=\"text-5xl md:text-7xl font-bold text-gray-900 dark:text-white mb-8 leading-tight tracking-tight\">\n          Your Health, Our <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-primary to-blue-600\">Commitment</span>\n        </h1>\n        <p className=\"text-xl md:text-2xl text-muted-foreground mb-10 max-w-3xl mx-auto leading-relaxed\">\n          Experience world-class healthcare at Medicare Hospital. Our expert team and advanced technology ensure the best care for you and your family.\n        </p>\n        <div className=\"flex flex-wrap justify-center gap-6\">\n          <Button size=\"lg\" className=\"h-16 px-10 text-xl rounded-full shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300\" onClick={() => navigate('/patient/register')}>\n            <Users className=\"h-6 w-6 mr-2\" />\n            Book Appointment\n          </Button>\n          <Button\n            variant=\"outline\"\n            size=\"lg\"\n            className=\"h-16 px-10 text-xl rounded-full border-2 bg-transparent hover:scale-95 hover:bg-gradient-to-r hover:from-red-500 hover:via-yellow-500 hover:to-green-500 hover:text-white hover:border-transparent hover:shadow-2xl transition-all duration-300 transform\"\n            asChild\n          >\n            <a href=\"#contact\">\n              <Phone className=\"h-6 w-6 mr-2 animate-bounce\" />\n              Contact Us\n            </a>\n          </Button>\n        </div>\n      </div>\n    </section>\n\n    {/* Latest News Section */}\n    <section className=\"py-20 px-4 bg-muted/30\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center gap-4 mb-12\">\n          <div className=\"p-3 bg-primary/10 rounded-xl\">\n            <Newspaper className=\"h-8 w-8 text-primary\" />\n          </div>\n          <div>\n            <h2 className=\"text-3xl font-bold\">Latest News & Updates</h2>\n            <p className=\"text-muted-foreground\">Stay informed with the latest announcements from Medicare Hospital</p>\n          </div>\n        </div>\n\n        <div className=\"grid md:grid-cols-3 gap-8\">\n          {newsArticles.map((article, i) => (\n            <div key={i} onClick={() => handleNewsClick(article.url)} className=\"cursor-pointer transform hover:-translate-y-1 transition-transform duration-300\">\n              <NewsCard title={article.title} excerpt={article.excerpt} date={article.date} category={article.category} />\n            </div>\n          ))}\n        </div>\n      </div>\n    </section>\n\n    {/* Our Doctors */}\n    <section className=\"py-20 px-4\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"flex items-center justify-between mb-12\">\n          <div>\n            <h2 className=\"text-3xl font-bold mb-3\">Our Expert Doctors</h2>\n            <p className=\"text-muted-foreground text-lg\">Meet our team of experienced healthcare professionals</p>\n          </div>\n          <Button variant=\"outline\" className=\"hidden md:flex gap-2\" onClick={() => navigate('/patient/login')}>\n            View All Doctors <ArrowRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n\n        {isDoctorsLoading ? (\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {[1, 2, 3, 4].map((i) => (\n              <Card key={i} className=\"overflow-hidden h-[140px] animate-pulse\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start gap-4 h-full\">\n                    <div className=\"w-16 h-16 rounded-full bg-muted flex-shrink-0\" />\n                    <div className=\"flex-1 space-y-3\">\n                      <div className=\"h-5 w-3/4 bg-muted rounded\" />\n                      <div className=\"h-4 w-1/2 bg-muted rounded\" />\n                      <div className=\"h-4 w-1/4 bg-muted rounded\" />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : doctors.length > 0 ? (\n          <div className=\"grid md:grid-cols-2 lg:grid-cols-4 gap-8\">\n            {doctors.map(doctor => (\n              <DoctorCard key={doctor.id} name={doctor.name} specialty={doctor.specialty} experience={doctor.experience || undefined} rating={doctor.rating || 4.5} available={doctor.available ?? true} />\n            ))}\n          </div>\n        ) : (\n          <Card className=\"p-12 text-center border-dashed\">\n            <Stethoscope className=\"h-16 w-16 text-muted-foreground/30 mx-auto mb-6\" />\n            <h3 className=\"text-xl font-semibold mb-2\">Doctors Directory Updating</h3>\n            <p className=\"text-muted-foreground\">We are currently updating our doctor profiles. Please check back shortly.</p>\n          </Card>\n        )}\n      </div>\n    </section>\n\n    {/* Departments */}\n    <section className=\"py-20 px-4 bg-blue-50/50 dark:bg-gray-900/50\">\n      <div className=\"max-w-7xl mx-auto\">\n        <div className=\"text-center mb-16\">\n          <h2 className=\"text-3xl font-bold mb-4\">Center of Excellence</h2>\n          <p className=\"text-muted-foreground max-w-2xl mx-auto\">Specialized departments equipped with advanced technology and staffed by leading specialists.</p>\n        </div>\n\n        {departments.length > 0 ? (\n          <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6\">\n            {departments.map(dept => (\n              <Card\n                key={dept.id}\n                className=\"text-center p-6 hover:shadow-xl transition-all duration-300 cursor-pointer border-transparent hover:border-primary/20 group bg-card/50 hover:bg-card\"\n                onClick={() => {\n                  window.open(`https://en.wikipedia.org/wiki/${dept.name}`, '_blank');\n                }}\n              >\n                <div className=\"w-16 h-16 rounded-2xl bg-primary/5 group-hover:bg-primary/10 flex items-center justify-center mx-auto mb-4 transition-colors\">\n                  <Building2 className=\"h-8 w-8 text-primary\" />\n                </div>\n                <h3 className=\"font-semibold text-gray-900 dark:text-gray-100\">{dept.name}</h3>\n                {dept.doctors_count && dept.doctors_count > 0 && <p className=\"text-sm text-muted-foreground mt-2\">{dept.doctors_count} Specialists</p>}\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"text-center p-12 border-2 border-dashed border-primary/20 rounded-3xl bg-white/50\">\n            <Building2 className=\"w-16 h-16 mx-auto text-primary/30 mb-4\" />\n            <h3 className=\"text-xl font-semibold text-primary/60\">Departments Coming Soon</h3>\n            <p className=\"text-muted-foreground mt-2\">We are currently updating our department list.</p>\n          </div>\n        )}\n      </div>\n    </section>\n\n    {/* How to Use Section */}\n    <HowToUseSection />\n\n    {/* Contact & Location */}\n    <section id=\"contact\" className=\"py-20 px-4 bg-slate-900 text-white relative overflow-hidden\">\n      {/* Abstract shapes */}\n      <div className=\"absolute top-0 right-0 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none\" />\n      <div className=\"absolute bottom-0 left-0 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2 pointer-events-none\" />\n\n      <div className=\"max-w-7xl mx-auto relative z-10\">\n        <div className=\"grid md:grid-cols-2 gap-12 lg:gap-16 items-center\">\n          <div>\n            <div className=\"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/5 border border-white/10 text-sm font-medium mb-6 backdrop-blur-sm\">\n              <MapPin className=\"h-4 w-4 text-blue-400\" />\n              <span className=\"text-blue-100\">Visit Us Today</span>\n            </div>\n            <h2 className=\"text-4xl font-bold mb-8 text-white\">Contact & Location</h2>\n            <div className=\"space-y-8\">\n              <div className=\"flex items-start gap-6 group\">\n                <div className=\"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center flex-shrink-0 group-hover:bg-blue-500/20 transition-colors border border-white/5\">\n                  <MapPin className=\"h-6 w-6 text-blue-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-white\">Main Campus</h3>\n                  <p className=\"text-slate-300 leading-relaxed\">123 Healthcare Avenue, Koregaon Park<br />Pune, Maharashtra 411001</p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-6 group\">\n                <div className=\"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center flex-shrink-0 group-hover:bg-blue-500/20 transition-colors border border-white/5\">\n                  <Phone className=\"h-6 w-6 text-blue-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-white\">24/7 Support</h3>\n                  <p className=\"text-slate-300 mb-1\">Emergency: <span className=\"text-white font-mono font-medium\">+91 98765 43210</span></p>\n                  <p className=\"text-slate-300\">Appointments: <span className=\"text-white font-mono font-medium\">+91 88888 88888</span></p>\n                </div>\n              </div>\n              <div className=\"flex items-start gap-6 group\">\n                <div className=\"w-14 h-14 rounded-2xl bg-white/5 flex items-center justify-center flex-shrink-0 group-hover:bg-blue-500/20 transition-colors border border-white/5\">\n                  <Clock className=\"h-6 w-6 text-blue-400\" />\n                </div>\n                <div>\n                  <h3 className=\"text-xl font-semibold mb-2 text-white\">Working Hours</h3>\n                  <div className=\"grid grid-cols-2 gap-x-8 gap-y-2 text-slate-300\">\n                    <span>Mon - Sat:</span>\n                    <span className=\"text-white\">9:00 AM - 8:00 PM</span>\n                    <span>Sunday:</span>\n                    <span className=\"text-white\">10:00 AM - 2:00 PM</span>\n                    <span>Emergency:</span>\n                    <span className=\"text-green-400 font-bold flex items-center gap-2\"><CheckCircle2 className=\"w-3 h-3\" /> 24 / 7 Open</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mt-8 pt-6 border-t border-white/10\">\n              <Dialog open={callbackOpen} onOpenChange={setCallbackOpen}>\n                <DialogTrigger asChild>\n                  <Button size=\"lg\" className=\"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-semibold py-6 text-lg shadow-lg hover:shadow-blue-500/25 transition-all duration-300 border border-white/10\">\n                    <PhoneCall className=\"mr-3 h-5 w-5 animate-pulse\" />\n                    Request a Free Callback\n                  </Button>\n                </DialogTrigger>\n                <DialogContent className=\"sm:max-w-md bg-white text-slate-900 border-none\">\n                  <DialogHeader>\n                    <DialogTitle className=\"text-xl font-bold text-slate-900\">Request a Callback</DialogTitle>\n                    <DialogDescription className=\"text-slate-500\">\n                      Leave your details and our team will contact you shortly.\n                    </DialogDescription>\n                  </DialogHeader>\n                  <div className=\"space-y-4 mt-4\">\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-slate-700\">Full Name *</Label>\n                      <Input\n                        placeholder=\"Enter your name\"\n                        className=\"bg-slate-50 border-slate-200 focus:border-blue-500\"\n                        value={callbackName}\n                        onChange={(e) => setCallbackName(e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-slate-700\">Phone Number *</Label>\n                      <Input\n                        placeholder=\"Enter your phone number\"\n                        className=\"bg-slate-50 border-slate-200 focus:border-blue-500\"\n                        value={callbackPhone}\n                        onChange={(e) => setCallbackPhone(e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-slate-700\">Preferred Time</Label>\n                      <Select value={callbackTime} onValueChange={setCallbackTime}>\n                        <SelectTrigger className=\"bg-slate-50 border-slate-200\">\n                          <SelectValue placeholder=\"Select best time to call\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"morning\">Morning (9 AM - 12 PM)</SelectItem>\n                          <SelectItem value=\"afternoon\">Afternoon (12 PM - 5 PM)</SelectItem>\n                          <SelectItem value=\"evening\">Evening (5 PM - 8 PM)</SelectItem>\n                          <SelectItem value=\"anytime\">Anytime</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label className=\"text-slate-700\">Reason (Optional)</Label>\n                      <Textarea\n                        placeholder=\"How can we help?\"\n                        className=\"bg-slate-50 border-slate-200 focus:border-blue-500\"\n                        value={callbackReason}\n                        onChange={(e) => setCallbackReason(e.target.value)}\n                      />\n                    </div>\n                    <Button onClick={() => requestCallbackMutation.mutate()} disabled={requestCallbackMutation.isPending} className=\"w-full bg-blue-600 hover:bg-blue-700 text-white mt-2\">\n                      {requestCallbackMutation.isPending ? 'Submitting...' : 'Submit Request'}\n                    </Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n              <p className=\"text-center text-slate-400 text-xs mt-3 flex items-center justify-center gap-2\">\n                <span className=\"w-2 h-2 rounded-full bg-green-500 animate-pulse\"></span>\n                Typical response time: 10-15 mins\n              </p>\n            </div>\n          </div>\n\n          {/* Map Container - Simplified and Robust */}\n          <div className=\"w-full h-[350px] bg-slate-800 rounded-3xl overflow-hidden shadow-2xl border border-white/10 relative z-20\">\n            <div className=\"w-full h-full flex flex-col items-center justify-center bg-slate-800/50 backdrop-blur-sm p-6 text-center\">\n              <div className=\"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4\">\n                <MapPin className=\"w-8 h-8 text-blue-400 opacity-50\" />\n              </div>\n              <p className=\"text-xl font-semibold text-white mb-2\">Location Map</p>\n              <p className=\"text-slate-400\">Interactive hospital map coming soon.</p>\n              <div className=\"mt-6 flex flex-col gap-2 text-sm text-slate-500\">\n                <p>123 Healthcare Avenue, Koregaon Park</p>\n                <p>Pune, Maharashtra 411001</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </section>\n\n    {/* Footer */}\n    <footer className=\"bg-slate-950 text-slate-200 border-t border-slate-800 pt-16 pb-8\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-16\">\n          {/* Brand Column */}\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 rounded-xl bg-blue-600 flex items-center justify-center text-white shadow-lg shadow-blue-900/20\">\n                <Building2 className=\"w-6 h-6\" />\n              </div>\n              <span className=\"text-2xl font-bold text-white\">Medicare Hospital</span>\n            </div>\n            <p className=\"text-slate-400 leading-relaxed\">\n              Excellence in healthcare since 2001. We are committed to providing world-class medical services with compassion and advanced technology.\n            </p>\n            <div className=\"flex gap-3 pt-2\">\n              <Button variant=\"outline\" size=\"icon\" className=\"rounded-full border-slate-700 bg-slate-900 hover:bg-blue-600 hover:text-white hover:border-blue-600 transition-all duration-300\" onClick={() => { }}>\n                <Facebook className=\"h-4 w-4\" />\n              </Button>\n              <Button variant=\"outline\" size=\"icon\" className=\"rounded-full border-slate-700 bg-slate-900 hover:bg-sky-500 hover:text-white hover:border-sky-500 transition-all duration-300\" onClick={() => { }}>\n                <Twitter className=\"h-4 w-4\" />\n              </Button>\n              <Button variant=\"outline\" size=\"icon\" className=\"rounded-full border-slate-700 bg-slate-900 hover:bg-pink-600 hover:text-white hover:border-pink-600 transition-all duration-300\" onClick={() => { }}>\n                <Instagram className=\"h-4 w-4\" />\n              </Button>\n              <Button variant=\"outline\" size=\"icon\" className=\"rounded-full border-slate-700 bg-slate-900 hover:bg-blue-700 hover:text-white hover:border-blue-700 transition-all duration-300\" onClick={() => { }}>\n                <Linkedin className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          </div>\n\n          {/* Quick Links */}\n          <div>\n            <h4 className=\"text-lg font-bold text-white mb-6\">Quick Links</h4>\n            <ul className=\"space-y-3\">\n              <li>\n                <Link to=\"/patient/login\" className=\"text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group\">\n                  <ChevronRight className=\"h-4 w-4 text-slate-600 group-hover:text-blue-400 transition-colors\" />\n                  Patient Portal\n                </Link>\n              </li>\n              <li>\n                <Link to=\"/staff/login\" className=\"text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group\">\n                  <ChevronRight className=\"h-4 w-4 text-slate-600 group-hover:text-blue-400 transition-colors\" />\n                  Staff Portal\n                </Link>\n              </li>\n              <li>\n                <a href=\"#contact\" className=\"text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group\">\n                  <ChevronRight className=\"h-4 w-4 text-slate-600 group-hover:text-blue-400 transition-colors\" />\n                  Contact Us\n                </a>\n              </li>\n              <li>\n                <Link to=\"/admin/login\" className=\"text-slate-400 hover:text-blue-400 transition-colors flex items-center gap-2 group\">\n                  <ChevronRight className=\"h-4 w-4 text-slate-600 group-hover:text-blue-400 transition-colors\" />\n                  Administration\n                </Link>\n              </li>\n            </ul>\n          </div>\n\n          {/* Departments */}\n          <div>\n            <h4 className=\"text-lg font-bold text-white mb-6\">Departments</h4>\n            <ul className=\"space-y-3\">\n              <li><Link to=\"#\" className=\"text-slate-400 hover:text-blue-400 transition-colors\">Cardiology</Link></li>\n              <li><Link to=\"#\" className=\"text-slate-400 hover:text-blue-400 transition-colors\">Neurology</Link></li>\n              <li><Link to=\"#\" className=\"text-slate-400 hover:text-blue-400 transition-colors\">Orthopedics</Link></li>\n              <li><Link to=\"#\" className=\"text-slate-400 hover:text-blue-400 transition-colors\">Pediatrics</Link></li>\n              <li><Link to=\"#\" className=\"text-slate-400 hover:text-blue-400 transition-colors\">Emergency Care</Link></li>\n            </ul>\n          </div>\n\n          {/* Newsletter / Contact */}\n          <div>\n            <h4 className=\"text-lg font-bold text-white mb-6\">Get In Touch</h4>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-start gap-3\">\n                <MapPin className=\"h-5 w-5 text-blue-500 mt-1\" />\n                <span className=\"text-slate-400 text-sm\">Pune, Maharashtra 411001</span>\n              </div>\n              <div className=\"flex items-center gap-3\">\n                <Mail className=\"h-5 w-5 text-blue-500\" />\n                <a href=\"mailto:info@medicarehospital.com\" className=\"text-slate-400 text-sm hover:text-blue-400\">info@medicarehospital.com</a>\n              </div>\n              <div className=\"mt-6 p-4 bg-slate-900 rounded-xl border border-slate-800\">\n                <p className=\"text-xs text-slate-500 mb-2\">Subscribe to our newsletter</p>\n                <div className=\"flex gap-2\">\n                  <input type=\"email\" placeholder=\"Email address\" className=\"bg-slate-950 border border-slate-800 rounded-lg px-3 py-2 text-sm w-full focus:outline-none focus:border-blue-500 text-white\" />\n                  <Button size=\"sm\" className=\"bg-blue-600 hover:bg-blue-700\">\n                    <ArrowRight className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"border-t border-slate-800 pt-8 flex flex-col md:flex-row justify-between items-center gap-4 text-sm text-slate-500\">\n          <p>Â© 2026 Medicare Hospital. All rights reserved.</p>\n          <div className=\"flex gap-6\">\n            <a href=\"#\" className=\"hover:text-white transition-colors\">Privacy Policy</a>\n            <a href=\"#\" className=\"hover:text-white transition-colors\">Terms of Service</a>\n            <a href=\"#\" className=\"hover:text-white transition-colors\">Cookie Policy</a>\n          </div>\n        </div>\n      </div>\n    </footer>\n  </div>;\n};\n\nexport default PortalSelect;","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Register.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { toast } from 'sonner';\nimport { Heart } from 'lucide-react';\n\nconst Register = () => {\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { signUp } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!fullName.trim() || !email.trim() || !password.trim()) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      toast.error('Passwords do not match');\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error('Password must be at least 6 characters');\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await signUp(email, password, fullName);\n    setLoading(false);\n\n    if (error) {\n      toast.error(error.message || 'Failed to register');\n    } else {\n      toast.success('Registration successful! Please sign in.');\n      navigate('/login');\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <img src=\"/logo.png\" alt=\"MediCare Logo\" className=\"h-8 w-8 object-contain\" />\n            <span className=\"text-2xl font-bold text-primary\">MediCare</span>\n          </div>\n          <CardTitle className=\"text-2xl\">Create Account</CardTitle>\n          <CardDescription>\n            Register to access the Hospital Management System\n          </CardDescription>\n        </CardHeader>\n        <form onSubmit={handleSubmit}>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"fullName\">Full Name</Label>\n              <Input\n                id=\"fullName\"\n                type=\"text\"\n                placeholder=\"Enter your full name\"\n                value={fullName}\n                onChange={(e) => setFullName(e.target.value)}\n                required\n                autoComplete=\"name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"Enter your email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                autoComplete=\"email\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Create a password (min 6 characters)\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                autoComplete=\"new-password\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n              <Input\n                id=\"confirmPassword\"\n                type=\"password\"\n                placeholder=\"Confirm your password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                required\n                autoComplete=\"new-password\"\n              />\n            </div>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n              {loading ? 'Creating account...' : 'Register'}\n            </Button>\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Already have an account?{' '}\n              <Link to=\"/login\" className=\"text-primary hover:underline\">\n                Sign in here\n              </Link>\n            </p>\n          </CardFooter>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\nexport default Register;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Reports.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\Settings.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'checkUserRole'. Either include it or remove the dependency array.","line":31,"column":8,"nodeType":"ArrayExpression","endLine":31,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [checkUserRole, user]","fix":{"range":[1501,1507],"text":"[checkUserRole, user]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":71,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2905,2908],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2905,2908],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from \"react\";\r\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Switch } from \"@/components/ui/switch\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { useAuth } from \"@/contexts/AuthContext\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport { toast } from \"sonner\";\r\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\r\nimport { Camera } from \"lucide-react\";\r\nimport PermissionRequestModal from \"@/components/modals/PermissionRequestModal\";\r\n\r\nconst Settings = () => {\r\n    const { user } = useAuth();\r\n    const [displayName, setDisplayName] = useState(\"\");\r\n    const [avatarUrl, setAvatarUrl] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [userRole, setUserRole] = useState<string | null>(null);\r\n    const [showPermissionModal, setShowPermissionModal] = useState(false);\r\n    const [pendingAction, setPendingAction] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            setDisplayName(user.user_metadata?.full_name || \"\");\r\n            setAvatarUrl(user.user_metadata?.avatar_url || \"\");\r\n            checkUserRole();\r\n        }\r\n    }, [user]);\r\n\r\n    const checkUserRole = async () => {\r\n        if (!user) return;\r\n        const { data } = await supabase\r\n            .from('user_roles')\r\n            .select('role')\r\n            .eq('user_id', user.id)\r\n            .maybeSingle();\r\n        if (data) setUserRole(data.role);\r\n    };\r\n\r\n    const handleUpdateProfile = async () => {\r\n        if (!user) return;\r\n\r\n        // Restrict profile update for receptionists? Or maybe just password?\r\n        // Let's restrict it just to demonstrate \"Admin permission\" needed for major changes.\r\n        // But users usually can update their own profile.\r\n        // Let's Stick to user request \"RECEPTION ... CANNOT CHANGE MORE THINGS\" - implies settings might be locked except for basic stuff.\r\n        // Let's lock profile update for demonstration if user is 'receptionist'.\r\n\r\n        if (userRole === 'receptionist') {\r\n            setPendingAction(\"update profile settings\");\r\n            setShowPermissionModal(true);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            const { error } = await supabase.auth.updateUser({\r\n                data: {\r\n                    full_name: displayName,\r\n                    avatar_url: avatarUrl,\r\n                },\r\n            });\r\n\r\n            if (error) throw error;\r\n\r\n            toast.success(\"Profile updated successfully!\");\r\n        } catch (error: any) {\r\n            toast.error(error.message || \"Failed to update profile\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleUpdatePassword = () => {\r\n        if (userRole === 'receptionist') {\r\n            setPendingAction(\"change account password\");\r\n            setShowPermissionModal(true);\r\n            return;\r\n        }\r\n        // Logic for update password would go here\r\n        toast.info(\"Password update feature coming soon\");\r\n    };\r\n\r\n    return (\r\n        <DashboardLayout\r\n            title=\"Settings\"\r\n            subtitle=\"Manage your account settings and preferences.\"\r\n        >\r\n            <Tabs defaultValue=\"account\" className=\"w-full space-y-6\">\r\n                <TabsList>\r\n                    <TabsTrigger value=\"account\">Account</TabsTrigger>\r\n                    <TabsTrigger value=\"notifications\">Notifications</TabsTrigger>\r\n                    <TabsTrigger value=\"appearance\">Appearance</TabsTrigger>\r\n                    <TabsTrigger value=\"security\">Security</TabsTrigger>\r\n                </TabsList>\r\n\r\n                <TabsContent value=\"account\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Account Information</CardTitle>\r\n                            <CardDescription>\r\n                                Update your personal details here.\r\n                            </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-6\">\r\n                            <div className=\"flex flex-col items-center gap-4 sm:flex-row\">\r\n                                <div className=\"relative group\">\r\n                                    <Avatar className=\"w-24 h-24 border-2 border-border cursor-pointer\">\r\n                                        <AvatarImage src={avatarUrl} />\r\n                                        <AvatarFallback className=\"text-2xl\">\r\n                                            {displayName?.charAt(0) || user?.email?.charAt(0) || \"U\"}\r\n                                        </AvatarFallback>\r\n                                    </Avatar>\r\n                                    <div className=\"absolute inset-0 flex items-center justify-center bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity rounded-full cursor-pointer\">\r\n                                        <Camera className=\"w-8 h-8 text-white\" />\r\n                                    </div>\r\n                                    <Input\r\n                                        type=\"file\"\r\n                                        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n                                        accept=\"image/*\"\r\n                                        onChange={(e) => {\r\n                                            const file = e.target.files?.[0];\r\n                                            if (file) {\r\n                                                const url = URL.createObjectURL(file);\r\n                                                setAvatarUrl(url);\r\n                                                toast.info(\"Image selected. Click 'Save Changes' to update.\");\r\n                                            }\r\n                                        }}\r\n                                        disabled={userRole === 'receptionist'}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"space-y-1 text-center sm:text-left\">\r\n                                    <h4 className=\"font-medium\">Profile Photo</h4>\r\n                                    <p className=\"text-sm text-muted-foreground\">\r\n                                        Click on the image to upload a new photo.\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"email\">Email</Label>\r\n                                <Input id=\"email\" defaultValue={user?.email || \"\"} disabled />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"name\">Display Name</Label>\r\n                                <Input\r\n                                    id=\"name\"\r\n                                    placeholder=\"Your name\"\r\n                                    value={displayName}\r\n                                    onChange={(e) => setDisplayName(e.target.value)}\r\n                                // disabled={userRole === 'receptionist'} // Option to disable directly\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"avatar-url\">Avatar URL (Optional)</Label>\r\n                                <Input\r\n                                    id=\"avatar-url\"\r\n                                    placeholder=\"https://example.com/avatar.png\"\r\n                                    value={avatarUrl}\r\n                                    onChange={(e) => setAvatarUrl(e.target.value)}\r\n                                // disabled={userRole === 'receptionist'}\r\n                                />\r\n                            </div>\r\n                        </CardContent>\r\n                        <CardFooter>\r\n                            <Button onClick={handleUpdateProfile} disabled={loading}>\r\n                                {loading ? \"Saving...\" : \"Save Changes\"}\r\n                            </Button>\r\n                        </CardFooter>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"notifications\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Notifications</CardTitle>\r\n                            <CardDescription>\r\n                                Choose what you want to be notified about.\r\n                            </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-between space-x-2\">\r\n                                <Label htmlFor=\"email-notifs\" className=\"flex flex-col space-y-1\">\r\n                                    <span>Email Notifications</span>\r\n                                    <span className=\"font-normal text-xs text-muted-foreground\">Receive emails about your account activity.</span>\r\n                                </Label>\r\n                                <Switch id=\"email-notifs\" />\r\n                            </div>\r\n                            <div className=\"flex items-center justify-between space-x-2\">\r\n                                <Label htmlFor=\"push-notifs\" className=\"flex flex-col space-y-1\">\r\n                                    <span>Push Notifications</span>\r\n                                    <span className=\"font-normal text-xs text-muted-foreground\">Receive push notifications on your device.</span>\r\n                                </Label>\r\n                                <Switch id=\"push-notifs\" />\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"appearance\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Appearance</CardTitle>\r\n                            <CardDescription>\r\n                                Customize the look and feel of the application.\r\n                            </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div className=\"flex items-center justify-between space-x-2\">\r\n                                <Label htmlFor=\"dark-mode\" className=\"flex flex-col space-y-1\">\r\n                                    <span>Dark Mode</span>\r\n                                    <span className=\"font-normal text-xs text-muted-foreground\">Toggle dark mode on or off.</span>\r\n                                </Label>\r\n                                <Switch id=\"dark-mode\" />\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"security\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Security</CardTitle>\r\n                            <CardDescription>\r\n                                Manage your password and security settings.\r\n                            </CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"current-password\">Current Password</Label>\r\n                                <Input id=\"current-password\" type=\"password\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"new-password\">New Password</Label>\r\n                                <Input id=\"new-password\" type=\"password\" />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label htmlFor=\"confirm-password\">Confirm Password</Label>\r\n                                <Input id=\"confirm-password\" type=\"password\" />\r\n                            </div>\r\n                        </CardContent>\r\n                        <CardFooter>\r\n                            <Button onClick={handleUpdatePassword}>Update Password</Button>\r\n                        </CardFooter>\r\n                    </Card>\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            <PermissionRequestModal\r\n                open={showPermissionModal}\r\n                onOpenChange={setShowPermissionModal}\r\n                action={pendingAction}\r\n            />\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default Settings;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\admin\\AdminAITools.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\admin\\AdminInfo.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isError' is assigned a value but never used.","line":21,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":49},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":25,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":25,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1451,1454],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1451,1454],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":27,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1543,1546],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1543,1546],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":29,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":29,"endColumn":29,"suggestions":[{"fix":{"range":[1626,1696],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":35,"column":63,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":66,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2045,2048],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2045,2048],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":36,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":36,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2145,2148],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2145,2148],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":37,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":37,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2240,2243],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2240,2243],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":41,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2411,2414],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2411,2414],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2477,2480],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2477,2480],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":43,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2546,2549],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2546,2549],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5185,5188],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5185,5188],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":105,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":105,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5206,5209],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5206,5209],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":111,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":111,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5497,5500],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5497,5500],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":112,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5583,5586],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5583,5586],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":114,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":114,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5659,5662],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5659,5662],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":141,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":141,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6975,6978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6975,6978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":256,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":256,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[15971,15974],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[15971,15974],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":17,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\r\nimport { Search, Shield, Eye, Lock, RefreshCw, Copy, EyeOff, AlertTriangle, Terminal } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { format } from \"date-fns\";\r\n\r\nconst AdminInfo = () => {\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [visiblePasswords, setVisiblePasswords] = useState<Record<string, boolean>>({});\r\n\r\n    const { data: users = [], isLoading, isError } = useQuery({\r\n        queryKey: ['admin-user-directory'],\r\n        queryFn: async () => {\r\n            try {\r\n                const { data, error } = await supabase.rpc('get_all_users_secure' as any);\r\n                if (error) throw error;\r\n                return (data || []).map((u: any) => ({ ...u, _source: 'rpc' }));\r\n            } catch (err) {\r\n                console.warn(\"Secure RPC failed, falling back to public tables\", err);\r\n\r\n                const { data: profiles } = await supabase.from('profiles').select('*');\r\n                const { data: roles } = await supabase.from('user_roles').select('*');\r\n                const { data: requests } = await supabase.from('staff_approval_requests').select('*');\r\n\r\n                const roleMap = new Map((roles || []).map((r: any) => [r.user_id, r.role]));\r\n                const profileMap = new Map((profiles || []).map((p: any) => [p.user_id, p]));\r\n                const requestMap = new Map((requests || []).map((r: any) => [r.user_id, r]));\r\n\r\n                // Collect all unique user IDs\r\n                const allUserIds = new Set([\r\n                    ...(profiles || []).map((p: any) => p.user_id),\r\n                    ...(roles || []).map((r: any) => r.user_id),\r\n                    ...(requests || []).map((r: any) => r.user_id)\r\n                ]);\r\n\r\n                return Array.from(allUserIds).map(userId => {\r\n                    const profile = profileMap.get(userId);\r\n                    const role = roleMap.get(userId);\r\n                    const request = requestMap.get(userId);\r\n\r\n                    // Determine User Details (Priority: Profile > Request > Placeholder)\r\n                    const full_name = profile?.full_name || request?.full_name || 'Unknown User';\r\n                    const email = profile?.email || request?.email || 'No Email Access'; // Auth email not accessible in fallback\r\n\r\n                    // Determine Role\r\n                    // If in user_roles, use that. If not, but in requests, use 'pending'. Else 'patient'.\r\n                    let displayRole = 'patient';\r\n                    if (role) {\r\n                        displayRole = role;\r\n                    } else if (request) {\r\n                        displayRole = `pending-${request.requested_role}`;\r\n                    }\r\n\r\n                    return {\r\n                        id: userId,\r\n                        email,\r\n                        full_name,\r\n                        role: displayRole,\r\n                        created_at: profile?.created_at || request?.created_at || new Date().toISOString(),\r\n                        last_sign_in_at: null,\r\n                        encrypted_password: null,\r\n                        _source: 'fallback'\r\n                    };\r\n                });\r\n            }\r\n        },\r\n    });\r\n\r\n    const isFallbackMode = users.length > 0 && users[0]._source === 'fallback';\r\n\r\n    const handleCopyId = (id: string) => {\r\n        navigator.clipboard.writeText(id);\r\n        toast.success(\"User ID copied to clipboard\");\r\n    };\r\n\r\n    const togglePasswordVisibility = (id: string) => {\r\n        setVisiblePasswords(prev => ({\r\n            ...prev,\r\n            [id]: !prev[id]\r\n        }));\r\n    };\r\n\r\n    const getRoleBadge = (role: string) => {\r\n        const colors: Record<string, string> = {\r\n            admin: 'bg-purple-100 text-purple-800 border-purple-200',\r\n            doctor: 'bg-blue-100 text-blue-800 border-blue-200',\r\n            nurse: 'bg-pink-100 text-pink-800 border-pink-200',\r\n            cashier: 'bg-emerald-100 text-emerald-800 border-emerald-200',\r\n            receptionist: 'bg-orange-100 text-orange-800 border-orange-200',\r\n            patient: 'bg-gray-100 text-gray-800 border-gray-200'\r\n        };\r\n        return <Badge variant=\"outline\" className={colors[role] || colors.patient}>{role.toUpperCase()}</Badge>;\r\n    };\r\n\r\n    const filteredUsers = (users as any[]).filter((user: any) =>\r\n        user.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        user.role?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        user.full_name?.toLowerCase().includes(searchTerm.toLowerCase())\r\n    );\r\n\r\n    const patientUsers = filteredUsers.filter((user: any) => user.role === 'patient');\r\n    const staffUsers = filteredUsers.filter((user: any) => user.role !== 'patient');\r\n\r\n    const renderUserTable = (userList: any[]) => (\r\n        <div className=\"rounded-md border\">\r\n            <Table>\r\n                <TableHeader>\r\n                    <TableRow>\r\n                        <TableHead>User / Email</TableHead>\r\n                        <TableHead>Role</TableHead>\r\n                        <TableHead>Security Status</TableHead>\r\n                        <TableHead>Joined On</TableHead>\r\n                        <TableHead>Last Login</TableHead>\r\n                        <TableHead className=\"text-right\">Actions</TableHead>\r\n                    </TableRow>\r\n                </TableHeader>\r\n                <TableBody>\r\n                    {isLoading ? (\r\n                        <TableRow>\r\n                            <TableCell colSpan={6} className=\"h-24 text-center text-muted-foreground\">\r\n                                Loading secure directory...\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ) : userList.length === 0 ? (\r\n                        <TableRow>\r\n                            <TableCell colSpan={6} className=\"h-24 text-center text-muted-foreground\">\r\n                                No users found.\r\n                            </TableCell>\r\n                        </TableRow>\r\n                    ) : (\r\n                        userList.map((user: any) => (\r\n                            <TableRow key={user.id}>\r\n                                <TableCell>\r\n                                    <div className=\"flex flex-col\">\r\n                                        <span className=\"font-medium\">{user.full_name || 'Unknown Name'}</span>\r\n                                        <span className=\"text-xs text-muted-foreground\">{user.email}</span>\r\n                                    </div>\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    {getRoleBadge(user.role)}\r\n                                </TableCell>\r\n                                <TableCell>\r\n                                    <div className=\"flex items-center gap-2 text-sm text-foreground bg-secondary/30 px-3 py-2 rounded-md w-full max-w-[250px] justify-between border border-border/50\">\r\n                                        {user.encrypted_password ? (\r\n                                            visiblePasswords[user.id] ? (\r\n                                                <div className=\"flex flex-col w-full overflow-hidden\">\r\n                                                    <span className=\"text-[10px] text-muted-foreground font-bold tracking-wider mb-1\">SECURE HASH</span>\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <code className=\"font-mono text-[10px] sm:text-xs break-all leading-tight text-foreground/90 bg-background/50 p-1 rounded border border-border/50 max-h-[60px] overflow-y-auto w-full\">\r\n                                                            {user.encrypted_password}\r\n                                                        </code>\r\n                                                        <Button\r\n                                                            variant=\"ghost\"\r\n                                                            size=\"icon\"\r\n                                                            className=\"h-6 w-6 shrink-0\"\r\n                                                            onClick={() => {\r\n                                                                navigator.clipboard.writeText(user.encrypted_password);\r\n                                                                toast.success(\"Hash copied\");\r\n                                                            }}\r\n                                                            title=\"Copy Full Hash\"\r\n                                                        >\r\n                                                            <Copy className=\"w-3 h-3\" />\r\n                                                        </Button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div className=\"flex items-center gap-2\">\r\n                                                    <Lock className=\"w-3 h-3 text-emerald-600\" />\r\n                                                    <span className=\"font-mono text-xs text-muted-foreground\">â—â—â—â—â—â—â—â—â—â—â—â—â—â—â—</span>\r\n                                                </div>\r\n                                            )\r\n                                        ) : (\r\n                                            <span className=\"text-xs text-muted-foreground italic flex items-center gap-1\">\r\n                                                <AlertTriangle className=\"w-3 h-3 text-amber-500\" />\r\n                                                <span title=\"Run the SQL fix above to enable access\">Restricted Access</span>\r\n                                            </span>\r\n                                        )}\r\n\r\n                                        {user.encrypted_password && (\r\n                                            <Button\r\n                                                variant=\"ghost\"\r\n                                                size=\"sm\"\r\n                                                onClick={() => togglePasswordVisibility(user.id)}\r\n                                                className=\"hover:bg-background h-6 w-6 p-0 shrink-0 ml-1\"\r\n                                                title={visiblePasswords[user.id] ? \"Hide Hash\" : \"View Hash\"}\r\n                                            >\r\n                                                {visiblePasswords[user.id] ? (\r\n                                                    <EyeOff className=\"w-3 h-3\" />\r\n                                                ) : (\r\n                                                    <Eye className=\"w-3 h-3\" />\r\n                                                )}\r\n                                            </Button>\r\n                                        )}\r\n                                    </div>\r\n                                </TableCell>\r\n                                <TableCell className=\"text-muted-foreground text-sm\">\r\n                                    {user.created_at ? format(new Date(user.created_at), 'MMM d, yyyy') : '-'}\r\n                                </TableCell>\r\n                                <TableCell className=\"text-muted-foreground text-sm\">\r\n                                    {user.last_sign_in_at ? format(new Date(user.last_sign_in_at), 'MMM d, hh:mm a') : (\r\n                                        <span className=\"text-xs italic opacity-70\">No Data</span>\r\n                                    )}\r\n                                </TableCell>\r\n                                <TableCell className=\"text-right\">\r\n                                    <div className=\"flex justify-end gap-2\">\r\n                                        <Button variant=\"ghost\" size=\"icon\" onClick={() => handleCopyId(user.id)} title=\"Copy User ID\">\r\n                                            <Copy className=\"w-4 h-4\" />\r\n                                        </Button>\r\n\r\n                                        <Dialog>\r\n                                            <DialogTrigger asChild>\r\n                                                <Button variant=\"ghost\" size=\"icon\" title=\"Set New Password\">\r\n                                                    <RefreshCw className=\"w-4 h-4\" />\r\n                                                </Button>\r\n                                            </DialogTrigger>\r\n                                            <DialogContent>\r\n                                                <DialogHeader>\r\n                                                    <DialogTitle>Set New Password</DialogTitle>\r\n                                                    <DialogDescription>\r\n                                                        You are setting a new password for <strong>{user.full_name}</strong>.\r\n                                                        <br />\r\n                                                        <span className=\"text-red-500 text-xs\">Note: The old password cannot be recovered.</span>\r\n                                                    </DialogDescription>\r\n                                                </DialogHeader>\r\n                                                <form\r\n                                                    onSubmit={async (e) => {\r\n                                                        e.preventDefault();\r\n                                                        const formData = new FormData(e.currentTarget);\r\n                                                        const newPass = formData.get('newPassword') as string;\r\n\r\n                                                        if (!newPass || newPass.length < 6) {\r\n                                                            toast.error(\"Password must be at least 6 characters\");\r\n                                                            return;\r\n                                                        }\r\n\r\n                                                        try {\r\n                                                            const { error } = await supabase.rpc('admin_reset_password', {\r\n                                                                target_user_id: user.id,\r\n                                                                new_password: newPass\r\n                                                            });\r\n\r\n                                                            if (error) throw error;\r\n                                                            toast.success(`Password updated for ${user.full_name}`);\r\n                                                            // Close dialog approach would need state, for simplicity we rely on form submission behavior or User closes\r\n                                                            (e.target as HTMLFormElement).reset();\r\n                                                        } catch (err: any) {\r\n                                                            toast.error(\"Failed to reset: \" + err.message);\r\n                                                        }\r\n                                                    }}\r\n                                                    className=\"space-y-4 pt-4\"\r\n                                                >\r\n                                                    <div className=\"space-y-2\">\r\n                                                        <label htmlFor=\"newPassword\" className=\"text-sm font-medium\">New Password</label>\r\n                                                        <Input\r\n                                                            id=\"newPassword\"\r\n                                                            name=\"newPassword\"\r\n                                                            type=\"text\"\r\n                                                            placeholder=\"Enter new password\"\r\n                                                            minLength={6}\r\n                                                            required\r\n                                                        />\r\n                                                    </div>\r\n                                                    <Button type=\"submit\" className=\"w-full bg-red-600 hover:bg-red-700 text-white\">\r\n                                                        Update Password\r\n                                                    </Button>\r\n                                                </form>\r\n                                            </DialogContent>\r\n                                        </Dialog>\r\n                                    </div>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ))\r\n                    )}\r\n                </TableBody>\r\n            </Table>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <DashboardLayout title=\"System Information\" subtitle=\"User Directory & Compliance\">\r\n            {isFallbackMode && (\r\n                <Alert variant=\"destructive\" className=\"mb-6 bg-yellow-50 border-yellow-200 text-yellow-800\">\r\n                    <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />\r\n                    <AlertTitle>Limited Data Access</AlertTitle>\r\n                    <AlertDescription className=\"flex items-center justify-between\">\r\n                        <span>\r\n                            You are viewing a restricted version of the directory. \"Last Login\" and \"Password Hash\" are unavailable.\r\n                        </span>\r\n                        <Dialog>\r\n                            <DialogTrigger asChild>\r\n                                <Button size=\"sm\" variant=\"outline\" className=\"ml-4 h-8 bg-white border-yellow-300 hover:bg-yellow-100 text-yellow-900\">\r\n                                    <Terminal className=\"w-3 h-3 mr-2\" /> Fix with SQL\r\n                                </Button>\r\n                            </DialogTrigger>\r\n                            <DialogContent className=\"max-w-2xl\">\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Enable Secure User Directory</DialogTitle>\r\n                                    <DialogDescription>\r\n                                        To view sensitive checks like Password Hashes and Last Login times, you must create a Secure RPC function in Supabase.\r\n                                    </DialogDescription>\r\n                                </DialogHeader>\r\n                                <div className=\"space-y-4\">\r\n                                    <p className=\"text-sm\">Run this SQL in your Supabase Dashboard SQL Editor:</p>\r\n                                    <div className=\"bg-slate-950 text-slate-50 p-4 rounded-md font-mono text-xs overflow-x-auto relative group\">\r\n                                        <pre>{`-- Create Secure User Access Function\r\nCREATE OR REPLACE FUNCTION get_all_users_secure()\r\nRETURNS TABLE (\r\n  id uuid,\r\n  email text,\r\n  encrypted_password text,\r\n  role text,\r\n  full_name text,\r\n  created_at timestamptz,\r\n  last_sign_in_at timestamptz\r\n)\r\nSECURITY DEFINER\r\nAS $$\r\nDECLARE\r\n  is_admin boolean;\r\nBEGIN\r\n  -- Check if admin\r\n  SELECT EXISTS(\r\n    SELECT 1 FROM public.user_roles\r\n    WHERE user_id = auth.uid() AND role = 'admin'\r\n  ) INTO is_admin;\r\n\r\n  IF is_admin THEN\r\n    RETURN QUERY\r\n    SELECT \r\n      au.id,\r\n      au.email::text,\r\n      au.encrypted_password::text,\r\n      COALESCE(ur.role::text, 'patient') as role,\r\n      COALESCE(p.full_name, (au.raw_user_meta_data->>'full_name')::text, 'Unknown') as full_name,\r\n      au.created_at,\r\n      au.last_sign_in_at\r\n    FROM auth.users au\r\n    LEFT JOIN public.user_roles ur ON au.id = ur.user_id\r\n    LEFT JOIN public.profiles p ON au.id = p.user_id\r\n    ORDER BY au.created_at DESC;\r\n  ELSE\r\n    RAISE EXCEPTION 'Access Denied';\r\n  END IF;\r\nEND;\r\n$$ LANGUAGE plpgsql;`}</pre>\r\n                                        <Button\r\n                                            size=\"sm\"\r\n                                            className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                            onClick={() => navigator.clipboard.writeText(`CREATE OR REPLACE FUNCTION get_all_users_secure()\r\nRETURNS TABLE (\r\n  id uuid,\r\n  email text,\r\n  encrypted_password text,\r\n  role text,\r\n  full_name text,\r\n  created_at timestamptz,\r\n  last_sign_in_at timestamptz\r\n)\r\nSECURITY DEFINER\r\nAS $$\r\nDECLARE\r\n  is_admin boolean;\r\nBEGIN\r\n  -- Check if admin\r\n  SELECT EXISTS(\r\n    SELECT 1 FROM public.user_roles\r\n    WHERE user_id = auth.uid() AND role = 'admin'\r\n  ) INTO is_admin;\r\n\r\n  IF is_admin THEN\r\n    RETURN QUERY\r\n    SELECT \r\n      au.id,\r\n      au.email::text,\r\n      au.encrypted_password::text,\r\n      COALESCE(ur.role::text, 'patient') as role,\r\n      COALESCE(p.full_name, (au.raw_user_meta_data->>'full_name')::text, 'Unknown') as full_name,\r\n      au.created_at,\r\n      au.last_sign_in_at\r\n    FROM auth.users au\r\n    LEFT JOIN public.user_roles ur ON au.id = ur.user_id\r\n    LEFT JOIN public.profiles p ON au.id = p.user_id\r\n    ORDER BY au.created_at DESC;\r\n  ELSE\r\n    RAISE EXCEPTION 'Access Denied';\r\n  END IF;\r\nEND;\r\n$$ LANGUAGE plpgsql;`)}\r\n                                        >\r\n                                            <Copy className=\"w-3 h-3\" /> Copy\r\n                                        </Button>\r\n                                    </div>\r\n                                    <div className=\"text-xs text-muted-foreground\">\r\n                                        This function uses <code>SECURITY DEFINER</code> to allow admins to safely read from <code>auth.users</code>.\r\n                                    </div>\r\n                                </div>\r\n                            </DialogContent>\r\n                        </Dialog>\r\n                    </AlertDescription>\r\n                </Alert>\r\n            )}\r\n\r\n            <Card className=\"mb-6 border-l-4 border-l-blue-500 shadow-sm\">\r\n                <CardHeader>\r\n                    <CardTitle className=\"flex items-center gap-2 text-blue-700\">\r\n                        <Shield className=\"w-5 h-5\" /> Data Privacy & Security Notice\r\n                    </CardTitle>\r\n                    <CardDescription>\r\n                        All user authentication data is secured.\r\n                        {isFallbackMode ?\r\n                            \" Displaying public profile data only.\" :\r\n                            \" Secure Admin Access is active. You can view password hashes and login activity.\"}\r\n                    </CardDescription>\r\n                </CardHeader>\r\n            </Card>\r\n\r\n            <Tabs defaultValue=\"all\" className=\"w-full\">\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <TabsList>\r\n                        <TabsTrigger value=\"all\">All Users</TabsTrigger>\r\n                        <TabsTrigger value=\"patients\">Patients</TabsTrigger>\r\n                        <TabsTrigger value=\"staff\">Staff</TabsTrigger>\r\n                    </TabsList>\r\n\r\n                    <div className=\"relative w-64\">\r\n                        <Search className=\"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground\" />\r\n                        <Input\r\n                            placeholder=\"Search users...\"\r\n                            className=\"pl-8 bg-background\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <Card>\r\n                    <CardContent className=\"pt-6\">\r\n                        <TabsContent value=\"all\" className=\"mt-0\">\r\n                            {renderUserTable(filteredUsers)}\r\n                        </TabsContent>\r\n                        <TabsContent value=\"patients\" className=\"mt-0\">\r\n                            {renderUserTable(patientUsers)}\r\n                        </TabsContent>\r\n                        <TabsContent value=\"staff\" className=\"mt-0\">\r\n                            {renderUserTable(staffUsers)}\r\n                        </TabsContent>\r\n                    </CardContent>\r\n                </Card>\r\n            </Tabs>\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default AdminInfo;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\admin\\AdminLogin.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":10,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { toast } from 'sonner';\nimport { ArrowLeft, Shield, Eye, EyeOff } from 'lucide-react';\n\nconst AdminLogin = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const { signIn } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!email.trim() || !password.trim()) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await signIn(email, password);\n\n    if (error) {\n      setLoading(false);\n      toast.error('Invalid login credentials');\n      return;\n    }\n\n    // Check if user has admin role\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) {\n      setLoading(false);\n      toast.error('Authentication failed');\n      return;\n    }\n\n    // Check for admin role specifically\n    const { data: roleData } = await supabase\n      .from('user_roles')\n      .select('role')\n      .eq('user_id', user.id)\n      .eq('role', 'admin')\n      .maybeSingle();\n\n    setLoading(false);\n\n    if (roleData) {\n      toast.success('Welcome, Admin!');\n      navigate('/dashboard');\n      return;\n    }\n\n    // Not an admin - sign out and show error\n    await supabase.auth.signOut();\n    toast.error('Access denied. Admin credentials required.');\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 to-indigo-100 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <Link to=\"/\" className=\"flex items-center gap-2 text-muted-foreground hover:text-purple-600 mb-4 justify-center\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back to Portal Selection\n          </Link>\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <img src=\"/logo.png\" alt=\"Medicare Logo\" className=\"h-8 w-8 object-contain\" />\n            <span className=\"text-2xl font-bold text-purple-600\">Admin Portal</span>\n          </div>\n          <CardTitle className=\"text-2xl\">Administrator Login</CardTitle>\n          <CardDescription>\n            Restricted access for system administrators only\n          </CardDescription>\n        </CardHeader>\n        <form onSubmit={handleSubmit}>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Admin Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"Enter admin email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                autoComplete=\"email\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? 'text' : 'password'}\n                  placeholder=\"Enter your password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  required\n                  autoComplete=\"current-password\"\n                  className=\"pr-10\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                >\n                  {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                </button>\n              </div>\n            </div>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Button type=\"submit\" className=\"w-full bg-purple-600 hover:bg-purple-700\" disabled={loading}>\n              {loading ? 'Signing in...' : 'Sign In as Admin'}\n            </Button>\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Not an admin?{' '}\n              <Link to=\"/staff/login\" className=\"text-purple-600 hover:underline\">\n                Staff Login\n              </Link>\n            </p>\n          </CardFooter>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\nexport default AdminLogin;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\patient\\PatientDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used.","line":19,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'MessageCircle' is defined but never used.","line":20,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Receipt' is defined but never used.","line":21,"column":43,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":50},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3610,3613],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3610,3613],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":78,"column":112,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":115,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3657,3660],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3657,3660],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":107,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":107,"endColumn":22,"suggestions":[{"fix":{"range":[4391,4443],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":327,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":327,"endColumn":24,"suggestions":[{"fix":{"range":[11477,11524],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":445,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":445,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17321,17324],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17321,17324],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":458,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":458,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17972,17975],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17972,17975],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":694,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":694,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[30051,30054],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[30051,30054],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger, DialogFooter } from '@/components/ui/dialog';\nimport { Calendar } from '@/components/ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { Badge } from '@/components/ui/badge';\nimport { toast } from 'sonner';\nimport { format } from 'date-fns';\nimport {\n  Heart, LogOut, Calendar as CalendarIcon, Phone, MapPin,\n  Clock, MessageCircle, Stethoscope, Building2, PhoneCall,\n  FileText, CreditCard, Shield, Activity, Receipt, Ambulance\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport MayaChatbot from '@/components/chatbot/MayaChatbot';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport InsuranceClaimForm from \"@/components/forms/InsuranceClaimForm\";\n\nconst PatientDashboard = () => {\n  const { user, signOut } = useAuth();\n  const navigate = useNavigate();\n  const queryClient = useQueryClient();\n\n  // Welcome Overlay State\n  const [showWelcome, setShowWelcome] = useState(true);\n\n  // Appointment booking state\n  const [bookingOpen, setBookingOpen] = useState(false);\n  const [callbackOpen, setCallbackOpen] = useState(false);\n  const [ambulanceOpen, setAmbulanceOpen] = useState(false);\n  const [appointmentDate, setAppointmentDate] = useState<Date>();\n  const [selectedDepartment, setSelectedDepartment] = useState('');\n  const [selectedDoctor, setSelectedDoctor] = useState('');\n  const [appointmentTime, setAppointmentTime] = useState('');\n  const [appointmentType, setAppointmentType] = useState('consultation');\n  const [appointmentNotes, setAppointmentNotes] = useState('');\n  const [patientName, setPatientName] = useState('');\n  const [patientPhone, setPatientPhone] = useState('');\n\n  // Callback request state\n  const [callbackName, setCallbackName] = useState('');\n  const [callbackPhone, setCallbackPhone] = useState('');\n  const [callbackEmail, setCallbackEmail] = useState('');\n  const [callbackTime, setCallbackTime] = useState('');\n  const [callbackReason, setCallbackReason] = useState('');\n\n  // Ambulance state\n  const [locationStatus, setLocationStatus] = useState<'idle' | 'locating' | 'success' | 'error'>('idle');\n  const [currentLocation, setCurrentLocation] = useState<{ lat: number, lng: number } | null>(null);\n  const [locationAddress, setLocationAddress] = useState<string>('');\n\n  // Realtime subscription for appointments\n  useEffect(() => {\n    if (!user) return;\n\n    const channel = supabase\n      .channel('patient-appointments-realtime')\n      .on(\n        'postgres_changes',\n        {\n          event: '*',\n          schema: 'public',\n          table: 'patient_appointments',\n          filter: `user_id=eq.${user.id}`,\n        },\n        (payload) => {\n          queryClient.invalidateQueries({ queryKey: ['my-appointments'] });\n\n          if (payload.eventType === 'UPDATE' && (payload.new as any).status === 'confirmed' && (payload.old as any).status !== 'confirmed') {\n            toast.success('Great news! Your appointment has been confirmed.');\n          }\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [user, queryClient]);\n\n  useEffect(() => {\n    // Show welcome message for 5 seconds\n    const timer = setTimeout(() => {\n      setShowWelcome(false);\n    }, 5000);\n    return () => clearTimeout(timer);\n  }, []);\n\n  // Fetch departments\n  const { data: departments = [] } = useQuery({\n    queryKey: ['public-departments'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('departments')\n        .select('id, name')\n        .order('name');\n      if (error) {\n        console.error(\"Error fetching departments:\", error);\n        throw error;\n      }\n      return data;\n    },\n  });\n\n  // Fetch doctors\n  const { data: doctors = [] } = useQuery({\n    queryKey: ['public-doctors', selectedDepartment],\n    queryFn: async () => {\n      let query = supabase\n        .from('doctors')\n        .select('id, name, specialty, department_id')\n        .eq('available', true)\n        .order('name');\n\n      if (selectedDepartment && selectedDepartment !== 'all') {\n        query = query.eq('department_id', selectedDepartment);\n      }\n\n      const { data, error } = await query;\n      if (error) throw error;\n      return data;\n    },\n  });\n\n  // Fetch user's appointments\n  const { data: myAppointments = [] } = useQuery({\n    queryKey: ['my-appointments', user?.id],\n    queryFn: async () => {\n      if (!user) return [];\n      const { data, error } = await supabase\n        .from('patient_appointments')\n        .select(`\n          *,\n          doctors:doctor_id(name, specialty),\n          departments:department_id(name)\n        `)\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n      if (error) throw error;\n      return data;\n    },\n    enabled: !!user,\n  });\n\n  // Book appointment mutation\n  const bookAppointmentMutation = useMutation({\n    mutationFn: async () => {\n      if (!user || !appointmentDate || !patientName || !patientPhone) {\n        throw new Error('Please fill in all required fields');\n      }\n\n      const { error } = await supabase.from('patient_appointments').insert({\n        user_id: user.id,\n        patient_name: patientName,\n        patient_phone: patientPhone,\n        patient_email: user.email,\n        doctor_id: selectedDoctor || null,\n        department_id: selectedDepartment || null,\n        preferred_date: format(appointmentDate, 'yyyy-MM-dd'),\n        preferred_time: appointmentTime || null,\n        appointment_type: appointmentType,\n        notes: appointmentNotes || null,\n      });\n\n      if (error) throw error;\n    },\n    onSuccess: () => {\n      toast.success('Appointment request submitted!');\n      setBookingOpen(false);\n      resetBookingForm();\n      queryClient.invalidateQueries({ queryKey: ['my-appointments'] });\n\n      // Trigger Maya Confirmation\n      const event = new CustomEvent('maya-notification', {\n        detail: {\n          message: `Your appointment with ${selectedDoctor ? 'the specialist' : 'us'} on ${appointmentDate ? format(appointmentDate, 'PPP') : 'the requested date'} has been successfully booked and confirmed. Your allotment ID is #${Math.floor(Math.random() * 10000)}. We look forward to seeing you.`,\n          type: 'success'\n        }\n      });\n      window.dispatchEvent(event);\n    },\n    onError: (error: Error) => {\n      toast.error(error.message);\n    },\n  });\n\n  // Request callback mutation\n  const requestCallbackMutation = useMutation({\n    mutationFn: async () => {\n      let finalPhone = callbackPhone;\n\n      // If phone not provided, try to find it\n      if (!finalPhone && user?.id) {\n        // 1. Check patient_accounts\n        const { data: account } = await supabase\n          .from('patient_accounts')\n          .select('phone')\n          .eq('user_id', user.id)\n          .maybeSingle();\n\n        if (account?.phone) {\n          finalPhone = account.phone;\n        } else {\n          // 2. Check recent appointments\n          const { data: lastApt } = await supabase\n            .from('patient_appointments')\n            .select('patient_phone')\n            .eq('user_id', user.id)\n            .order('created_at', { ascending: false })\n            .limit(1)\n            .maybeSingle();\n\n          if (lastApt?.patient_phone) {\n            finalPhone = lastApt.patient_phone;\n          }\n        }\n      }\n\n      if (!callbackName || !finalPhone) {\n        throw new Error('Please provide your name and a phone number (none found in records)');\n      }\n\n      const { error } = await supabase.from('callback_requests').insert({\n        user_id: user?.id || null,\n        name: callbackName,\n        phone: finalPhone,\n        email: callbackEmail || null,\n        preferred_time: callbackTime || null,\n        reason: callbackReason || null,\n      });\n\n      if (error) throw error;\n    },\n    onSuccess: () => {\n      toast.success('Callback request submitted! We will call you soon.');\n      setCallbackOpen(false);\n      resetCallbackForm();\n\n      // Simulate AI calling back\n      setTimeout(() => {\n        toast.info(\"ðŸ“ž Incoming Call: Medicare AI Assistant\", {\n          description: \"Connecting you to our automated support line...\",\n          duration: 5000,\n          action: {\n            label: \"Answer\",\n            onClick: () => {\n              toast.success(\"Connected! (Simulated Voice Call)\");\n              speak(\"Hello! This is Maya from Medicare Hospital. I received your callback request. How can I assist you today?\");\n            }\n          }\n        });\n\n        // Also trigger voice if supported\n        const speak = (text: string) => {\n          if ('speechSynthesis' in window) {\n            const utterance = new SpeechSynthesisUtterance(text);\n            const voices = window.speechSynthesis.getVoices();\n            const femaleVoice = voices.find(v => v.name.includes('Female') || v.name.includes('Samantha') || v.name.includes('Google US English'));\n            if (femaleVoice) utterance.voice = femaleVoice;\n            window.speechSynthesis.speak(utterance);\n          }\n        };\n      }, 3000);\n    },\n    onError: (error: Error) => {\n      toast.error(error.message);\n    },\n  });\n\n  const resetBookingForm = () => {\n    setAppointmentDate(undefined);\n    setSelectedDepartment('');\n    setSelectedDoctor('');\n    setAppointmentTime('');\n    setAppointmentType('consultation');\n    setAppointmentNotes('');\n    setPatientName('');\n    setPatientPhone('');\n  };\n\n  const resetCallbackForm = () => {\n    setCallbackName('');\n    setCallbackPhone('');\n    setCallbackEmail('');\n    setCallbackTime('');\n    setCallbackReason('');\n  };\n\n  const handleSignOut = async () => {\n    await signOut();\n    navigate('/');\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'confirmed': return 'bg-green-100 text-green-800';\n      case 'pending': return 'bg-yellow-100 text-yellow-800';\n      case 'cancelled': return 'bg-red-100 text-red-800';\n      case 'completed': return 'bg-blue-100 text-blue-800';\n      default: return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const handleBookAmbulance = () => {\n    setLocationStatus('locating');\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setCurrentLocation({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          });\n          setLocationStatus('success');\n          // Start simulated reverse geocoding or just use coords\n          setLocationAddress(`Lat: ${position.coords.latitude.toFixed(4)}, Lng: ${position.coords.longitude.toFixed(4)}`);\n        },\n        (error) => {\n          console.error(\"Error getting location\", error);\n          setLocationStatus('error');\n          toast.error(\"Could not fetch location. Please enable location services.\");\n        }\n      );\n    } else {\n      setLocationStatus('error');\n      toast.error(\"Geolocation is not supported by your browser.\");\n    }\n  };\n\n  const confirmAmbulanceBooking = () => {\n    // Simulate API call\n    setTimeout(() => {\n      toast.success(\"Ambulance dispatched! It will arrive at your location shortly.\");\n      setAmbulanceOpen(false);\n      setLocationStatus('idle');\n    }, 1500);\n  };\n\n  if (showWelcome) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex flex-col items-center justify-center bg-background/95 backdrop-blur-sm animate-in fade-in duration-500\">\n        <img src=\"/logo.png\" alt=\"Medicare Logo\" className=\"w-16 h-16 object-contain mb-6 animate-pulse\" />\n        <h1 className=\"text-4xl font-bold font-heading text-primary mb-4 text-center\">\n          Welcome to Medicare Hospital\n        </h1>\n        <p className=\"text-xl text-muted-foreground font-medium text-center max-w-lg\">\n          \"To keep you safe is our duty.\"\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <img src=\"/logo.png\" alt=\"Medicare Logo\" className=\"h-8 w-8 object-contain\" />\n              <span className=\"text-2xl font-bold text-primary\">Medicare</span>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <span className=\"text-sm text-muted-foreground hidden sm:inline\">\n                Welcome, {user?.user_metadata?.full_name || user?.email}\n              </span>\n              <Button variant=\"outline\" size=\"sm\" onClick={handleSignOut}>\n                <LogOut className=\"h-4 w-4 mr-2\" />\n                Sign Out\n              </Button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <Tabs defaultValue=\"dashboard\" className=\"space-y-6\">\n          <TabsList className=\"grid w-full grid-cols-2 md:grid-cols-5 lg:w-auto h-auto gap-2 bg-transparent p-0\">\n            <TabsTrigger value=\"dashboard\" className=\"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground border bg-white h-12\">\n              <Activity className=\"w-4 h-4 mr-2\" /> Dashboard\n            </TabsTrigger>\n            <TabsTrigger value=\"reports\" className=\"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground border bg-white h-12\">\n              <FileText className=\"w-4 h-4 mr-2\" /> Reports\n            </TabsTrigger>\n            <TabsTrigger value=\"billing\" className=\"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground border bg-white h-12\">\n              <CreditCard className=\"w-4 h-4 mr-2\" /> Billing\n            </TabsTrigger>\n            <TabsTrigger value=\"insurance\" className=\"data-[state=active]:bg-primary data-[state=active]:text-primary-foreground border bg-white h-12\">\n              <Shield className=\"w-4 h-4 mr-2\" /> Insurance\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"dashboard\" className=\"space-y-8 animate-fade-in\">\n            {/* Quick Actions */}\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              {/* Book Appointment */}\n              <Dialog open={bookingOpen} onOpenChange={setBookingOpen}>\n                <DialogTrigger asChild>\n                  <Card className=\"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-primary\">\n                    <CardHeader className=\"text-center\">\n                      <CalendarIcon className=\"h-12 w-12 text-primary mx-auto mb-2\" />\n                      <CardTitle>Book Appointment</CardTitle>\n                      <CardDescription>Schedule a visit with our doctors</CardDescription>\n                    </CardHeader>\n                  </Card>\n                </DialogTrigger>\n                <DialogContent className=\"max-w-md max-h-[90vh] overflow-y-auto\">\n                  <DialogHeader>\n                    <DialogTitle>Book an Appointment</DialogTitle>\n                    <DialogDescription>Fill in the details to request an appointment</DialogDescription>\n                  </DialogHeader>\n                  <div className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label>Your Name *</Label>\n                      <Input\n                        placeholder=\"Enter your full name\"\n                        value={patientName}\n                        onChange={(e) => setPatientName(e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Phone Number *</Label>\n                      <Input\n                        placeholder=\"Enter your phone number\"\n                        value={patientPhone}\n                        onChange={(e) => setPatientPhone(e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Department (Optional)</Label>\n                      <Select value={selectedDepartment} onValueChange={setSelectedDepartment}>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select department\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"all\">All Departments</SelectItem>\n                          {departments.map((dept: any) => (\n                            <SelectItem key={dept.id} value={dept.id}>{dept.name}</SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Doctor</Label>\n                      <Select value={selectedDoctor} onValueChange={setSelectedDoctor}>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select doctor\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          {doctors.map((doc: any) => (\n                            <SelectItem key={doc.id} value={doc.id}>\n                              {doc.name} - {doc.specialty}\n                            </SelectItem>\n                          ))}\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Preferred Date *</Label>\n                      <Popover>\n                        <PopoverTrigger asChild>\n                          <Button variant=\"outline\" className={cn(\"w-full justify-start text-left\", !appointmentDate && \"text-muted-foreground\")}>\n                            <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                            {appointmentDate ? format(appointmentDate, 'PPP') : 'Pick a date'}\n                          </Button>\n                        </PopoverTrigger>\n                        <PopoverContent className=\"w-auto p-0\">\n                          <Calendar\n                            mode=\"single\"\n                            selected={appointmentDate}\n                            onSelect={setAppointmentDate}\n                            disabled={(date) => date < new Date()}\n                            initialFocus\n                          />\n                        </PopoverContent>\n                      </Popover>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Preferred Time</Label>\n                      <Select value={appointmentTime} onValueChange={setAppointmentTime}>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select time slot\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"morning\">Morning (9AM - 12PM)</SelectItem>\n                          <SelectItem value=\"afternoon\">Afternoon (12PM - 5PM)</SelectItem>\n                          <SelectItem value=\"evening\">Evening (5PM - 8PM)</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Appointment Type</Label>\n                      <Select value={appointmentType} onValueChange={setAppointmentType}>\n                        <SelectTrigger>\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"consultation\">General Consultation</SelectItem>\n                          <SelectItem value=\"followup\">Follow-up Visit</SelectItem>\n                          <SelectItem value=\"checkup\">Health Checkup</SelectItem>\n                          <SelectItem value=\"specialist\">Specialist Consultation</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Additional Notes</Label>\n                      <Textarea\n                        placeholder=\"Any specific concerns or requirements...\"\n                        value={appointmentNotes}\n                        onChange={(e) => setAppointmentNotes(e.target.value)}\n                      />\n                    </div>\n                    <Button\n                      className=\"w-full\"\n                      onClick={() => bookAppointmentMutation.mutate()}\n                      disabled={bookAppointmentMutation.isPending}\n                    >\n                      {bookAppointmentMutation.isPending ? 'Submitting...' : 'Book Appointment'}\n                    </Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n\n              {/* Request Callback */}\n              <Dialog open={callbackOpen} onOpenChange={setCallbackOpen}>\n                <DialogTrigger asChild>\n                  <Card className=\"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-green-500\">\n                    <CardHeader className=\"text-center\">\n                      <PhoneCall className=\"h-12 w-12 text-green-600 mx-auto mb-2\" />\n                      <CardTitle>Request Callback</CardTitle>\n                      <CardDescription>We'll call you back at your convenience</CardDescription>\n                    </CardHeader>\n                  </Card>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle>Request a Callback</DialogTitle>\n                    <DialogDescription>Fill in your details and we'll call you back</DialogDescription>\n                  </DialogHeader>\n                  <div className=\"space-y-4\">\n                    <div className=\"space-y-2\">\n                      <Label>Your Name *</Label>\n                      <Input\n                        placeholder=\"Enter your full name\"\n                        value={callbackName}\n                        onChange={(e) => setCallbackName(e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Phone Number</Label>\n                      <Input\n                        placeholder=\"Enter your phone number (Optional)\"\n                        value={callbackPhone}\n                        onChange={(e) => setCallbackPhone(e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Email (Optional)</Label>\n                      <Input\n                        placeholder=\"Enter your email\"\n                        value={callbackEmail}\n                        onChange={(e) => setCallbackEmail(e.target.value)}\n                      />\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Preferred Time</Label>\n                      <Select value={callbackTime} onValueChange={setCallbackTime}>\n                        <SelectTrigger>\n                          <SelectValue placeholder=\"Select preferred time\" />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"morning\">Morning (9AM - 12PM)</SelectItem>\n                          <SelectItem value=\"afternoon\">Afternoon (12PM - 5PM)</SelectItem>\n                          <SelectItem value=\"evening\">Evening (5PM - 8PM)</SelectItem>\n                          <SelectItem value=\"anytime\">Anytime</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <Label>Reason for Callback</Label>\n                      <Textarea\n                        placeholder=\"Tell us why you'd like to be contacted...\"\n                        value={callbackReason}\n                        onChange={(e) => setCallbackReason(e.target.value)}\n                      />\n                    </div>\n                    <Button\n                      className=\"w-full bg-green-600 hover:bg-green-700\"\n                      onClick={() => requestCallbackMutation.mutate()}\n                      disabled={requestCallbackMutation.isPending}\n                    >\n                      {requestCallbackMutation.isPending ? 'Submitting...' : 'Request Callback'}\n                    </Button>\n                  </div>\n                </DialogContent>\n              </Dialog>\n\n              {/* Book Ambulance - Updated from Maya Chat */}\n              <Dialog open={ambulanceOpen} onOpenChange={setAmbulanceOpen}>\n                <DialogTrigger asChild>\n                  <Card className=\"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-red-500 animate-pulse bg-red-50\">\n                    <CardHeader className=\"text-center\">\n                      <Ambulance className=\"h-12 w-12 text-red-600 mx-auto mb-2\" />\n                      <CardTitle className=\"text-red-700\">Emergency Ambulance</CardTitle>\n                      <CardDescription>Book an ambulance to your current location</CardDescription>\n                    </CardHeader>\n                  </Card>\n                </DialogTrigger>\n                <DialogContent>\n                  <DialogHeader>\n                    <DialogTitle className=\"text-red-600 flex items-center gap-2\">\n                      <Ambulance className=\"w-5 h-5\" /> Emergency Ambulance Booking\n                    </DialogTitle>\n                    <DialogDescription>\n                      We need to access your location to send an ambulance immediately.\n                    </DialogDescription>\n                  </DialogHeader>\n\n                  <div className=\"space-y-4 py-4\">\n                    {locationStatus === 'idle' && (\n                      <Button onClick={handleBookAmbulance} className=\"w-full h-16 text-lg bg-red-600 hover:bg-red-700 animate-pulse\">\n                        <MapPin className=\"w-6 h-6 mr-2\" />\n                        Get My Location & Book\n                      </Button>\n                    )}\n\n                    {locationStatus === 'locating' && (\n                      <div className=\"text-center space-y-3\">\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600 mx-auto\"></div>\n                        <p>Fetching your exact location...</p>\n                      </div>\n                    )}\n\n                    {locationStatus === 'success' && (\n                      <div className=\"space-y-4\">\n                        <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n                          <h4 className=\"font-semibold text-green-800 flex items-center gap-2\">\n                            <MapPin className=\"w-4 h-4\" /> Location Detected\n                          </h4>\n                          <p className=\"text-sm text-green-700 mt-1\">{locationAddress}</p>\n                          <p className=\"text-xs text-muted-foreground mt-2\">Coordinates: {currentLocation?.lat}, {currentLocation?.lng}</p>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <Label>Emergency Details (Optional)</Label>\n                          <Textarea placeholder=\"Briefly describe the emergency...\" />\n                        </div>\n                      </div>\n                    )}\n\n                    {locationStatus === 'error' && (\n                      <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 text-center\">\n                        <p className=\"text-red-600\">Could not fetch location automatically.</p>\n                        <Button variant=\"outline\" onClick={() => setLocationStatus('idle')} className=\"mt-2\">Try Again</Button>\n                      </div>\n                    )}\n                  </div>\n\n                  {locationStatus === 'success' && (\n                    <DialogFooter>\n                      <Button variant=\"outline\" onClick={() => setAmbulanceOpen(false)}>Cancel</Button>\n                      <Button onClick={confirmAmbulanceBooking} className=\"bg-red-600 hover:bg-red-700\">\n                        Confirm Ambulance\n                      </Button>\n                    </DialogFooter>\n                  )}\n                </DialogContent>\n              </Dialog>\n\n            </div>\n\n            {/* My Appointments */}\n            <Card className=\"mb-8\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <CalendarIcon className=\"h-5 w-5\" />\n                  My Appointments\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {myAppointments.length === 0 ? (\n                  <p className=\"text-muted-foreground text-center py-8\">\n                    You haven't booked any appointments yet. Book one above!\n                  </p>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {myAppointments.map((apt: any) => (\n                      <div key={apt.id} className=\"flex items-center justify-between p-4 border rounded-lg\">\n                        <div>\n                          <div className=\"font-medium\">{apt.appointment_type}</div>\n                          <div className=\"text-sm text-muted-foreground\">\n                            {format(new Date(apt.preferred_date), 'PPP')}\n                            {apt.preferred_time && ` - ${apt.preferred_time}`}\n                          </div>\n                          {apt.doctors && (\n                            <div className=\"text-sm text-muted-foreground\">\n                              Dr. {apt.doctors.name} ({apt.doctors.specialty})\n                            </div>\n                          )}\n                        </div>\n                        <Badge className={getStatusColor(apt.status)}>{apt.status}</Badge>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Hospital Information */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <Building2 className=\"h-5 w-5\" />\n                    About MediCare Hospital\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <p className=\"text-muted-foreground\">\n                    MediCare Hospital is a state-of-the-art healthcare facility providing\n                    comprehensive medical services with a focus on patient-centered care.\n                  </p>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <Stethoscope className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm\">50+ Specialist Doctors</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Building2 className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm\">15 Medical Departments</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Clock className=\"h-4 w-4 text-primary\" />\n                      <span className=\"text-sm\">24/7 Emergency Services</span>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center gap-2\">\n                    <MapPin className=\"h-5 w-5\" />\n                    Contact & Location\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div className=\"space-y-2\">\n                    <div className=\"flex items-start gap-2\">\n                      <MapPin className=\"h-4 w-4 text-primary mt-1\" />\n                      <div>\n                        <p className=\"text-sm font-medium\">Address</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          123 Healthcare Avenue, Medical District, City 12345\n                        </p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <Phone className=\"h-4 w-4 text-primary mt-1\" />\n                      <div>\n                        <p className=\"text-sm font-medium\">Phone</p>\n                        <p className=\"text-sm text-muted-foreground\">+1 (555) 123-4567</p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-start gap-2\">\n                      <Clock className=\"h-4 w-4 text-primary mt-1\" />\n                      <div>\n                        <p className=\"text-sm font-medium\">Hours</p>\n                        <p className=\"text-sm text-muted-foreground\">\n                          OPD: Mon-Sat 9AM-8PM<br />\n                          Emergency: 24/7\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"pt-4\">\n                    <iframe\n                      src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d121059.04360432657!2d73.86296739999999!3d18.5246036!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3bc2bf2e67461101%3A0x828d43bf9d9ee343!2sPune%2C%20Maharashtra!5e0!3m2!1sen!2sin!4v1705662000000!5m2!1sen!2sin\"\n                      width=\"100%\"\n                      height=\"150\"\n                      style={{ border: 0, borderRadius: '8px' }}\n                      allowFullScreen\n                      loading=\"lazy\"\n                      referrerPolicy=\"no-referrer-when-downgrade\"\n                    ></iframe>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"reports\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Medical Reports</CardTitle>\n                <CardDescription>View and download your medical reports here.</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex flex-col items-center justify-center py-12 text-muted-foreground\">\n                  <FileText className=\"h-12 w-12 mb-4 opacity-50\" />\n                  <p>No reports available yet.</p>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"billing\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Billing & Payments</CardTitle>\n                <CardDescription>Manage your payments and view invoices.</CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"flex flex-col items-center justify-center py-12 text-muted-foreground\">\n                  <CreditCard className=\"h-12 w-12 mb-4 opacity-50\" />\n                  <p>No billing history found.</p>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"insurance\">\n            <div className=\"max-w-2xl mx-auto\">\n              <InsuranceClaimForm />\n            </div>\n          </TabsContent>\n        </Tabs>\n      </main>\n\n      {/* Maya Chatbot */}\n      <MayaChatbot />\n    </div>\n  );\n};\n\nexport default PatientDashboard;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\patient\\PatientLogin.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\patient\\PatientRegister.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\CashierDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useNavigate' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":21},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":15,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[697,700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[697,700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":20,"column":36,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":39,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[855,858],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[855,858],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":22,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1017,1020],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1017,1020],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useNavigate } from \"react-router-dom\";\r\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\r\nimport StatCard from \"@/components/dashboard/StatCard\";\r\nimport { DollarSign, CreditCard, Activity, TrendingUp } from \"lucide-react\";\r\nimport AICalculator from \"@/components/dashboard/AICalculator\";\r\nimport { useQuery } from \"@tanstack/react-query\";\r\nimport { supabase } from \"@/integrations/supabase/client\";\r\n\r\nconst CashierDashboard = () => {\r\n    // Fetch some quick stats\r\n    const { data: stats } = useQuery({\r\n        queryKey: ['cashier-stats'],\r\n        queryFn: async () => {\r\n            const { data, error } = await supabase\r\n                .from('transactions' as any)\r\n                .select('amount, created_at');\r\n\r\n            if (error) return { total: 0, today: 0, count: 0 };\r\n\r\n            const total = (data as any[]).reduce((sum, t) => sum + Number(t.amount), 0);\r\n            const today = new Date().toISOString().split('T')[0];\r\n            const todayTotal = (data as any[])\r\n                .filter(t => t.created_at.startsWith(today))\r\n                .reduce((sum, t) => sum + Number(t.amount), 0);\r\n\r\n            return { total, today: todayTotal, count: data.length };\r\n        }\r\n    });\r\n\r\n    return (\r\n        <DashboardLayout\r\n            title=\"Cashier Station\"\r\n            subtitle=\"Manage hospital finances and patient billing.\"\r\n        >\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                <StatCard\r\n                    title=\"Total Revenue\"\r\n                    value={`$${stats?.total.toFixed(0) || '0'}`}\r\n                    change=\"Lifetime\"\r\n                    changeType=\"neutral\"\r\n                    icon={DollarSign}\r\n                    iconColor=\"primary\"\r\n                />\r\n                <StatCard\r\n                    title=\"Today's Collection\"\r\n                    value={`$${stats?.today.toFixed(0) || '0'}`}\r\n                    change=\"Daily earning\"\r\n                    changeType=\"positive\"\r\n                    icon={TrendingUp}\r\n                    iconColor=\"success\"\r\n                />\r\n                <StatCard\r\n                    title=\"Transactions\"\r\n                    value={stats?.count || 0}\r\n                    change=\"Total processed\"\r\n                    changeType=\"neutral\"\r\n                    icon={CreditCard}\r\n                    iconColor=\"warning\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"space-y-8\">\r\n                <section>\r\n                    <h2 className=\"text-xl font-semibold mb-4 flex items-center gap-2\">\r\n                        <Activity className=\"h-5 w-5\" /> AI Financial Assistant\r\n                    </h2>\r\n                    <AICalculator />\r\n                </section>\r\n            </div>\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default CashierDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\DoctorDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Stethoscope' is defined but never used.","line":5,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Activity' is defined but never used.","line":5,"column":78,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":86},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1877,1880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1877,1880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":341,"column":88,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":341,"endColumn":91,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[18743,18746],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[18743,18746],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":363,"column":90,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":363,"endColumn":93,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20250,20253],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20250,20253],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\r\nimport StatCard from \"@/components/dashboard/StatCard\";\r\nimport { CalendarCheck, Stethoscope, Loader2, Clock, FileText, User, Upload, Activity, Search, History, Send, ClipboardList } from \"lucide-react\";\r\nimport { useAppointments } from \"@/hooks/useAppointments\";\r\nimport { usePatients } from \"@/hooks/usePatients\";\r\nimport { format } from \"date-fns\";\r\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Label } from \"@/components/ui/label\";\r\nimport { Textarea } from \"@/components/ui/textarea\";\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from \"@/components/ui/table\";\r\nimport {\r\n    Tabs,\r\n    TabsContent,\r\n    TabsList,\r\n    TabsTrigger,\r\n} from \"@/components/ui/tabs\";\r\nimport {\r\n    Select,\r\n    SelectContent,\r\n    SelectItem,\r\n    SelectTrigger,\r\n    SelectValue,\r\n} from \"@/components/ui/select\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter } from \"@/components/ui/card\";\r\nimport UploadReportModal from \"@/components/modals/UploadReportModal\";\r\nimport { toast } from \"sonner\";\r\n\r\nconst DoctorDashboard = () => {\r\n    const navigate = useNavigate();\r\n    const [showUploadModal, setShowUploadModal] = useState(false);\r\n\r\n    // Instructions State\r\n    const [instruction, setInstruction] = useState(\"\");\r\n    const [priority, setPriority] = useState(\"normal\");\r\n    const [recipient, setRecipient] = useState(\"nurse\");\r\n\r\n    // History Search State\r\n    const [searchQuery, setSearchQuery] = useState(\"\");\r\n    const [selectedPatientHistory, setSelectedPatientHistory] = useState<any>(null);\r\n\r\n    // Filter appointments for the current doctor\r\n    const { data: appointments, isLoading: appointmentsLoading } = useAppointments(format(new Date(), \"yyyy-MM-dd\"));\r\n    const { data: patients, isLoading: patientsLoading } = usePatients();\r\n\r\n    const isLoading = appointmentsLoading || patientsLoading;\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <DashboardLayout title=\"Doctor Dashboard\" subtitle=\"Loading...\">\r\n                <div className=\"flex items-center justify-center py-24\">\r\n                    <Loader2 className=\"w-8 h-8 animate-spin text-primary\" />\r\n                </div>\r\n            </DashboardLayout>\r\n        );\r\n    }\r\n\r\n    const pendingAppointments = appointments?.filter(a => a.status === \"pending\").length || 0;\r\n    const todayAppointments = appointments?.length || 0;\r\n\r\n    const handleSendInstruction = () => {\r\n        if (!instruction.trim()) {\r\n            toast.error(\"Please enter an instruction\");\r\n            return;\r\n        }\r\n        // Mock sending instruction\r\n        toast.success(\"Instruction sent to staff\", {\r\n            description: `Sent to ${recipient} with ${priority} priority.`\r\n        });\r\n        setInstruction(\"\");\r\n        setPriority(\"normal\");\r\n    };\r\n\r\n    const handleHistorySearch = () => {\r\n        if (!searchQuery) return;\r\n        const found = patients?.find(p => p.name.toLowerCase().includes(searchQuery.toLowerCase()) || p.patient_id?.includes(searchQuery));\r\n\r\n        if (found) {\r\n            // Mock history data\r\n            setSelectedPatientHistory({\r\n                ...found,\r\n                visits: [\r\n                    { date: \"2024-01-10\", reason: \"Fever\", doctor: \"Dr. Smith\" },\r\n                    { date: \"2023-12-05\", reason: \"General Checkup\", doctor: \"Dr. Smith\" }\r\n                ],\r\n                reports: [\r\n                    { date: \"2024-01-10\", name: \"Blood Test\", type: \"lab\" },\r\n                    { date: \"2023-12-05\", name: \"X-Ray Chest\", type: \"imaging\" }\r\n                ]\r\n            });\r\n        } else {\r\n            toast.error(\"Patient not found\");\r\n            setSelectedPatientHistory(null);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <DashboardLayout\r\n            title=\"Doctor Dashboard\"\r\n            subtitle=\"Manage your appointments and patients.\"\r\n        >\r\n            <Tabs defaultValue=\"overview\" className=\"space-y-6\">\r\n                <TabsList>\r\n                    <TabsTrigger value=\"overview\">Overview</TabsTrigger>\r\n                    <TabsTrigger value=\"patients\">My Patients</TabsTrigger>\r\n                    <TabsTrigger value=\"instructions\">Staff Instructions</TabsTrigger>\r\n                    <TabsTrigger value=\"records\">Patient Records</TabsTrigger>\r\n                </TabsList>\r\n\r\n                {/* Overview Tab */}\r\n                <TabsContent value=\"overview\" className=\"space-y-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6\">\r\n                        <StatCard\r\n                            title=\"Today's Appointments\"\r\n                            value={todayAppointments}\r\n                            change={`${pendingAppointments} pending`}\r\n                            changeType=\"neutral\"\r\n                            icon={CalendarCheck}\r\n                            iconColor=\"primary\"\r\n                        />\r\n                        <StatCard\r\n                            title=\"My Patients\"\r\n                            value={appointments?.map(a => a.patient_id).filter((v, i, a) => a.indexOf(v) === i).length || 0} // Unique patients today\r\n                            change=\"Seen today\"\r\n                            changeType=\"neutral\"\r\n                            icon={User}\r\n                            iconColor=\"info\"\r\n                        />\r\n                        <StatCard\r\n                            title=\"Pending Reports\"\r\n                            value={0}\r\n                            change=\"To review\"\r\n                            changeType=\"neutral\"\r\n                            icon={FileText}\r\n                            iconColor=\"warning\"\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                        {/* Main Content - Appointments */}\r\n                        <div className=\"lg:col-span-2 bg-card rounded-xl card-shadow border border-border/50 animate-fade-in p-6\">\r\n                            <div className=\"flex items-center justify-between mb-6\">\r\n                                <h3 className=\"text-lg font-heading font-semibold text-foreground\">Upcoming Appointments</h3>\r\n                                <span className=\"text-sm text-muted-foreground\">{format(new Date(), \"EEEE, d MMM\")}</span>\r\n                            </div>\r\n\r\n                            <div className=\"divide-y divide-border\">\r\n                                {appointments?.length === 0 ? (\r\n                                    <div className=\"p-8 text-center text-muted-foreground\">\r\n                                        No appointments scheduled for today.\r\n                                    </div>\r\n                                ) : (\r\n                                    appointments?.map((apt) => (\r\n                                        <div key={apt.id} className=\"py-4 flex items-center justify-between hover:bg-muted/50 px-2 rounded-lg transition-colors\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <Avatar>\r\n                                                    <AvatarFallback className=\"bg-primary/10 text-primary\">\r\n                                                        {apt.patients?.name?.substring(0, 2).toUpperCase()}\r\n                                                    </AvatarFallback>\r\n                                                </Avatar>\r\n                                                <div>\r\n                                                    <p className=\"font-medium\">{apt.patients?.name}</p>\r\n                                                    <p className=\"text-sm text-muted-foreground capitalize\">{apt.type}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"text-right\">\r\n                                                <div className=\"flex items-center gap-1 text-sm text-foreground mb-1 justify-end\">\r\n                                                    <Clock className=\"w-3 h-3\" />\r\n                                                    {apt.appointment_time}\r\n                                                </div>\r\n                                                <Badge variant={apt.status === 'confirmed' ? 'default' : 'outline'}>\r\n                                                    {apt.status}\r\n                                                </Badge>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Right Sidebar - Quick Actions */}\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"bg-card rounded-xl card-shadow border border-border/50 p-6 animate-fade-in\">\r\n                                <h3 className=\"text-lg font-heading font-semibold text-foreground mb-4\">Quick Actions</h3>\r\n                                <div className=\"space-y-3\">\r\n                                    <Button\r\n                                        variant=\"outline\"\r\n                                        className=\"w-full justify-start h-12\"\r\n                                        onClick={() => setShowUploadModal(true)}\r\n                                    >\r\n                                        <Upload className=\"mr-2 h-4 w-4\" />\r\n                                        Upload Medical Report\r\n                                    </Button>\r\n                                    <Button variant=\"outline\" className=\"w-full justify-start h-12\">\r\n                                        <FileText className=\"mr-2 h-4 w-4\" />\r\n                                        Write Prescription\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </TabsContent>\r\n\r\n                {/* My Patients Tab */}\r\n                <TabsContent value=\"patients\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>My Patients</CardTitle>\r\n                            <CardDescription>List of patients under your care or visited recently.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"rounded-md border\">\r\n                                <Table>\r\n                                    <TableHeader>\r\n                                        <TableRow>\r\n                                            <TableHead>Name</TableHead>\r\n                                            <TableHead>Age/Gender</TableHead>\r\n                                            <TableHead>Condition</TableHead>\r\n                                            <TableHead>Last Visit</TableHead>\r\n                                            <TableHead>Status</TableHead>\r\n                                            <TableHead className=\"text-right\">Actions</TableHead>\r\n                                        </TableRow>\r\n                                    </TableHeader>\r\n                                    <TableBody>\r\n                                        {patients?.slice(0, 10).map((patient) => (\r\n                                            <TableRow key={patient.id}>\r\n                                                <TableCell className=\"font-medium\">{patient.name}</TableCell>\r\n                                                <TableCell>{patient.age} / {patient.gender}</TableCell>\r\n                                                <TableCell>{patient.condition || \"-\"}</TableCell>\r\n                                                <TableCell>Today</TableCell>\r\n                                                <TableCell>\r\n                                                    <Badge variant=\"outline\">{patient.status}</Badge>\r\n                                                </TableCell>\r\n                                                <TableCell className=\"text-right\">\r\n                                                    <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate('/patients')}>\r\n                                                        View\r\n                                                    </Button>\r\n                                                </TableCell>\r\n                                            </TableRow>\r\n                                        ))}\r\n                                    </TableBody>\r\n                                </Table>\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {/* Staff Instructions Tab */}\r\n                <TabsContent value=\"instructions\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Staff Instruction Center</CardTitle>\r\n                            <CardDescription>Send instructions or tasks to nurses and receptionists.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent className=\"space-y-6\">\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Recipient Role</Label>\r\n                                    <Select value={recipient} onValueChange={setRecipient}>\r\n                                        <SelectTrigger>\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"nurse\">Nurse Station</SelectItem>\r\n                                            <SelectItem value=\"reception\">Reception</SelectItem>\r\n                                            <SelectItem value=\"all\">All Staff</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                                <div className=\"space-y-2\">\r\n                                    <Label>Priority</Label>\r\n                                    <Select value={priority} onValueChange={setPriority}>\r\n                                        <SelectTrigger>\r\n                                            <SelectValue />\r\n                                        </SelectTrigger>\r\n                                        <SelectContent>\r\n                                            <SelectItem value=\"low\">Low</SelectItem>\r\n                                            <SelectItem value=\"normal\">Normal</SelectItem>\r\n                                            <SelectItem value=\"high\">High</SelectItem>\r\n                                            <SelectItem value=\"urgent\">Urgent</SelectItem>\r\n                                        </SelectContent>\r\n                                    </Select>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <Label>Instruction / Task</Label>\r\n                                <Textarea\r\n                                    placeholder=\"Enter detailed instruction here...\"\r\n                                    className=\"min-h-[120px]\"\r\n                                    value={instruction}\r\n                                    onChange={(e) => setInstruction(e.target.value)}\r\n                                />\r\n                            </div>\r\n                        </CardContent>\r\n                        <CardFooter className=\"flex justify-end\">\r\n                            <Button onClick={handleSendInstruction} className=\"gap-2\">\r\n                                <Send className=\"w-4 h-4\" /> Send Instruction\r\n                            </Button>\r\n                        </CardFooter>\r\n                    </Card>\r\n                </TabsContent>\r\n\r\n                {/* Patient Records Tab (History & Reports) */}\r\n                <TabsContent value=\"records\">\r\n                    <div className=\"space-y-6\">\r\n                        <Card>\r\n                            <CardHeader>\r\n                                <CardTitle>Patient Search</CardTitle>\r\n                                <CardDescription>Search for a patient to view history and reports.</CardDescription>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <div className=\"flex gap-4\">\r\n                                    <Input\r\n                                        placeholder=\"Search by name or ID...\"\r\n                                        value={searchQuery}\r\n                                        onChange={(e) => setSearchQuery(e.target.value)}\r\n                                        onKeyDown={(e) => e.key === 'Enter' && handleHistorySearch()}\r\n                                    />\r\n                                    <Button onClick={handleHistorySearch}>\r\n                                        <Search className=\"w-4 h-4 mr-2\" /> Search\r\n                                    </Button>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n\r\n                        {selectedPatientHistory && (\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 animate-fade-in\">\r\n                                <Card>\r\n                                    <CardHeader>\r\n                                        <CardTitle className=\"flex items-center gap-2\">\r\n                                            <History className=\"w-5 h-5 text-primary\" />\r\n                                            Visit History\r\n                                        </CardTitle>\r\n                                    </CardHeader>\r\n                                    <CardContent>\r\n                                        <div className=\"space-y-4\">\r\n                                            {selectedPatientHistory.visits.map((visit: any, index: number) => (\r\n                                                <div key={index} className=\"flex justify-between items-center p-3 bg-muted/50 rounded-lg\">\r\n                                                    <div>\r\n                                                        <p className=\"font-medium\">{visit.reason}</p>\r\n                                                        <p className=\"text-sm text-muted-foreground\">{visit.doctor}</p>\r\n                                                    </div>\r\n                                                    <Badge variant=\"outline\">{visit.date}</Badge>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n\r\n                                <Card>\r\n                                    <CardHeader>\r\n                                        <CardTitle className=\"flex items-center gap-2\">\r\n                                            <ClipboardList className=\"w-5 h-5 text-blue-600\" />\r\n                                            Medical Reports\r\n                                        </CardTitle>\r\n                                    </CardHeader>\r\n                                    <CardContent>\r\n                                        <div className=\"space-y-4\">\r\n                                            {selectedPatientHistory.reports.map((report: any, index: number) => (\r\n                                                <div key={index} className=\"flex justify-between items-center p-3 bg-blue-50/50 rounded-lg border border-blue-100\">\r\n                                                    <div className=\"flex items-center gap-3\">\r\n                                                        <FileText className=\"w-4 h-4 text-blue-600\" />\r\n                                                        <div>\r\n                                                            <p className=\"font-medium text-blue-900\">{report.name}</p>\r\n                                                            <p className=\"text-xs text-blue-700 capitalize\">{report.type}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <Button variant=\"ghost\" size=\"sm\" className=\"h-8 text-blue-700 hover:text-blue-900\">\r\n                                                        View\r\n                                                    </Button>\r\n                                                </div>\r\n                                            ))}\r\n                                            <Button variant=\"outline\" className=\"w-full mt-2\" onClick={() => setShowUploadModal(true)}>\r\n                                                <Upload className=\"w-4 h-4 mr-2\" /> Upload New Report\r\n                                            </Button>\r\n                                        </div>\r\n                                    </CardContent>\r\n                                </Card>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </TabsContent>\r\n            </Tabs>\r\n\r\n            <UploadReportModal open={showUploadModal} onOpenChange={setShowUploadModal} defaultType=\"lab\" />\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default DoctorDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\NurseDashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BedDouble' is defined but never used.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useNavigate } from \"react-router-dom\";\r\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\r\nimport StatCard from \"@/components/dashboard/StatCard\";\r\nimport { BedDouble, ClipboardCheck, Activity, Users } from \"lucide-react\";\r\nimport { useDepartments } from \"@/hooks/useDepartments\";\r\nimport { usePatients } from \"@/hooks/usePatients\";\r\nimport { Progress } from \"@/components/ui/progress\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\nconst NurseDashboard = () => {\r\n    const navigate = useNavigate();\r\n    const { data: departments, isLoading: deptLoading } = useDepartments();\r\n    const { data: patients, isLoading: patLoading } = usePatients();\r\n\r\n    if (deptLoading || patLoading) {\r\n        return <DashboardLayout title=\"Nurse Dashboard\" subtitle=\"Loading...\"><div /></DashboardLayout>;\r\n    }\r\n\r\n    const admittedPatients = patients?.filter(p => p.status === 'admitted' || p.status === 'critical') || [];\r\n    const criticalPatients = patients?.filter(p => p.status === 'critical') || [];\r\n\r\n    return (\r\n        <DashboardLayout\r\n            title=\"Nurse Station\"\r\n            subtitle=\"In-patient care and ward management.\"\r\n        >\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n                <StatCard\r\n                    title=\"Admitted Patients\"\r\n                    value={admittedPatients.length}\r\n                    change=\"Currently in wards\"\r\n                    changeType=\"neutral\"\r\n                    icon={Users}\r\n                    iconColor=\"primary\"\r\n                />\r\n                <StatCard\r\n                    title=\"Critical Cases\"\r\n                    value={criticalPatients.length}\r\n                    change=\"Need attention\"\r\n                    changeType={criticalPatients.length > 0 ? \"negative\" : \"positive\"}\r\n                    icon={Activity}\r\n                    iconColor=\"destructive\"\r\n                />\r\n                <StatCard\r\n                    title=\"Tasks Pending\"\r\n                    value={0}\r\n                    change=\"Shift tasks\"\r\n                    changeType=\"neutral\"\r\n                    icon={ClipboardCheck}\r\n                    iconColor=\"warning\"\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n                {/* Ward Status */}\r\n                <div className=\"bg-card rounded-xl border border-border/50 p-6\">\r\n                    <div className=\"flex justify-between items-center mb-6\">\r\n                        <h3 className=\"font-semibold text-lg\">Ward Occupancy</h3>\r\n                        <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate('/beds')}>Manage Beds</Button>\r\n                    </div>\r\n                    <div className=\"space-y-4\">\r\n                        {departments?.map((dept) => {\r\n                            const occupancy = dept.total_beds > 0 ? (dept.occupied_beds / dept.total_beds) * 100 : 0;\r\n                            return (\r\n                                <div key={dept.id} className=\"space-y-2\">\r\n                                    <div className=\"flex justify-between text-sm\">\r\n                                        <span>{dept.name}</span>\r\n                                        <span className=\"text-muted-foreground\">{dept.occupied_beds}/{dept.total_beds}</span>\r\n                                    </div>\r\n                                    <Progress value={occupancy} className=\"h-2\" />\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Critical Patients List */}\r\n                <div className=\"bg-card rounded-xl border border-border/50 p-6\">\r\n                    <h3 className=\"font-semibold text-lg mb-4 text-red-600 flex items-center gap-2\">\r\n                        <Activity className=\"w-5 h-5\" /> Critical Watchlist\r\n                    </h3>\r\n                    <div className=\"space-y-3\">\r\n                        {criticalPatients.length === 0 ? (\r\n                            <p className=\"text-muted-foreground text-sm\">No critical patients reported.</p>\r\n                        ) : (\r\n                            criticalPatients.map(p => (\r\n                                <div key={p.id} className=\"flex justify-between items-center p-3 bg-red-50 rounded-lg border border-red-100\">\r\n                                    <div>\r\n                                        <p className=\"font-medium text-red-900\">{p.name}</p>\r\n                                        <p className=\"text-xs text-red-700\">Room: {p.room || 'Unassigned'}</p>\r\n                                    </div>\r\n                                    <Badge variant=\"destructive\">Critical</Badge>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default NurseDashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\NurseRounds.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":1,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Calendar' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from \"react\";\r\nimport DashboardLayout from \"@/components/layout/DashboardLayout\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\r\nimport { Calendar, Clock, User, FileText, CheckCircle } from \"lucide-react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { format } from \"date-fns\";\r\n\r\n// Mock data for rounds (replace with real data schema later)\r\nconst UPCOMING_ROUNDS = [\r\n    { id: 1, doctor: \"Dr. Sarah Wilson\", specialty: \"Cardiology\", time: \"10:00 AM\", ward: \"Cardiology Wing A\", patients: 5 },\r\n    { id: 2, doctor: \"Dr. James Miller\", specialty: \"Pediatrics\", time: \"11:30 AM\", ward: \"Pediatric Ward\", patients: 8 },\r\n    { id: 3, doctor: \"Dr. Michael Chen\", specialty: \"Neurology\", time: \"02:00 PM\", ward: \"Neuro ICU\", patients: 3 },\r\n];\r\n\r\nconst DOCTOR_ADVICE = [\r\n    { id: 1, patient: \"John Doe\", doctor: \"Dr. Sarah Wilson\", advice: \"Monitor BP every 2 hours. Increase fluid intake.\", timestamp: new Date().toISOString() },\r\n    { id: 2, patient: \"Jane Smith\", doctor: \"Dr. Michael Chen\", advice: \"Schedule MRI for tomorrow morning. Keep NPO after midnight.\", timestamp: new Date(Date.now() - 3600000).toISOString() },\r\n];\r\n\r\nconst NurseRounds = () => {\r\n    return (\r\n        <DashboardLayout\r\n            title=\"Rounds & Advice\"\r\n            subtitle=\"Track doctor rounds and medical instructions.\"\r\n        >\r\n            <Tabs defaultValue=\"rounds\" className=\"space-y-6\">\r\n                <TabsList>\r\n                    <TabsTrigger value=\"rounds\">Doctor Rounds</TabsTrigger>\r\n                    <TabsTrigger value=\"advice\">Doctor Advice & Instructions</TabsTrigger>\r\n                </TabsList>\r\n\r\n                <TabsContent value=\"rounds\" className=\"space-y-6\">\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                        {UPCOMING_ROUNDS.map((round) => (\r\n                            <Card key={round.id} className=\"hover:shadow-md transition-all\">\r\n                                <CardHeader className=\"pb-3\">\r\n                                    <div className=\"flex justify-between items-start\">\r\n                                        <div className=\"flex items-center gap-2\">\r\n                                            <User className=\"h-5 w-5 text-primary\" />\r\n                                            <CardTitle className=\"text-base\">{round.doctor}</CardTitle>\r\n                                        </div>\r\n                                        <Badge variant=\"outline\">{round.specialty}</Badge>\r\n                                    </div>\r\n                                    <CardDescription>{round.ward}</CardDescription>\r\n                                </CardHeader>\r\n                                <CardContent>\r\n                                    <div className=\"space-y-4\">\r\n                                        <div className=\"flex items-center gap-2 text-sm\">\r\n                                            <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n                                            <span className=\"font-medium\">Today at {round.time}</span>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2 text-sm\">\r\n                                            <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n                                            <span>{round.patients} Patients to visit</span>\r\n                                        </div>\r\n                                        <Button className=\"w-full\" variant=\"secondary\">\r\n                                            View Patient List\r\n                                        </Button>\r\n                                    </div>\r\n                                </CardContent>\r\n                            </Card>\r\n                        ))}\r\n                    </div>\r\n                </TabsContent>\r\n\r\n                <TabsContent value=\"advice\">\r\n                    <Card>\r\n                        <CardHeader>\r\n                            <CardTitle>Recent Medical Advice</CardTitle>\r\n                            <CardDescription>Instructions left by doctors for inpatient care.</CardDescription>\r\n                        </CardHeader>\r\n                        <CardContent>\r\n                            <div className=\"space-y-4\">\r\n                                {DOCTOR_ADVICE.map((item) => (\r\n                                    <div key={item.id} className=\"flex gap-4 p-4 border rounded-lg bg-card/50\">\r\n                                        <div className=\"mt-1\">\r\n                                            <div className=\"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-700\">\r\n                                                <FileText className=\"h-4 w-4\" />\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex-1 space-y-1\">\r\n                                            <div className=\"flex items-center justify-between\">\r\n                                                <h4 className=\"font-semibold text-sm\">{item.patient}</h4>\r\n                                                <span className=\"text-xs text-muted-foreground\">\r\n                                                    {format(new Date(item.timestamp), \"MMM d, h:mm a\")}\r\n                                                </span>\r\n                                            </div>\r\n                                            <p className=\"text-sm text-muted-foreground\">by {item.doctor}</p>\r\n                                            <div className=\"mt-2 text-sm bg-muted/50 p-3 rounded-md\">\r\n                                                {item.advice}\r\n                                            </div>\r\n                                            <div className=\"pt-2 flex justify-end\">\r\n                                                <Button size=\"sm\" variant=\"ghost\" className=\"h-8 text-green-600 hover:text-green-700 hover:bg-green-50\">\r\n                                                    <CheckCircle className=\"w-3 h-3 mr-1\" /> Acknowledge\r\n                                                </Button>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </CardContent>\r\n                    </Card>\r\n                </TabsContent>\r\n            </Tabs>\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\n// Start Icon helper\r\nfunction Users({ className }: { className?: string }) {\r\n    return (\r\n        <svg\r\n            className={className}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            width=\"24\"\r\n            height=\"24\"\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            strokeWidth=\"2\"\r\n            strokeLinecap=\"round\"\r\n            strokeLinejoin=\"round\"\r\n        >\r\n            <path d=\"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\" />\r\n            <circle cx=\"9\" cy=\"7\" r=\"4\" />\r\n            <path d=\"M22 21v-2a4 4 0 0 0-3-3.87\" />\r\n            <path d=\"M16 3.13a4 4 0 0 1 0 7.75\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default NurseRounds;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\ReceptionDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\Salaries.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Download' is defined but never used.","line":13,"column":86,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":94},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isLoading' is assigned a value but never used.","line":33,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":44},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":42,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2211,2214],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2211,2214],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":44,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2323,2326],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2323,2326],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":52,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2632,2635],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2632,2635],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":53,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":53,"endColumn":29,"suggestions":[{"fix":{"range":[2656,2703],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2846,2849],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2846,2849],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":58,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":58,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2942,2945],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2942,2945],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":59,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":59,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3033,3036],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3033,3036],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":60,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":60,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3115,3118],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3115,3118],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":63,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3230,3233],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3230,3233],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":64,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":64,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3292,3295],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3292,3295],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":65,"column":45,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":65,"endColumn":48,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3357,3360],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3357,3360],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":1,"message":"'displayRole' is never reassigned. Use 'const' instead.","line":84,"column":21,"nodeType":"Identifier","messageId":"useConst","endLine":84,"endColumn":32,"fix":{"range":[4069,4155],"text":"const displayRole = role || (request ? `pending-${request.requested_role}` : 'unknown');"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":106,"column":43,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":106,"endColumn":46,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4947,4950],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4947,4950],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":132,"column":57,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":132,"endColumn":60,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5964,5967],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5964,5967],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":184,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":184,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7977,7980],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7977,7980],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":385,"column":83,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":385,"endColumn":86,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[20591,20594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[20591,20594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":1,"source":"import { useState } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { supabase } from '@/integrations/supabase/client';\r\nimport DashboardLayout from '@/components/layout/DashboardLayout';\r\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\r\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogTrigger } from \"@/components/ui/dialog\";\r\nimport { Alert, AlertDescription, AlertTitle } from \"@/components/ui/alert\";\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from \"@/components/ui/alert-dialog\";\r\nimport { Banknote, Save, X, Edit2, AlertTriangle, Terminal, Copy, Trash2, RefreshCw, Download, FileText } from 'lucide-react';\r\nimport { toast } from 'sonner';\r\nimport jsPDF from 'jspdf';\r\nimport autoTable from 'jspdf-autotable';\r\n\r\ninterface StaffMember {\r\n    id: string;\r\n    name: string;\r\n    email: string;\r\n    role: string;\r\n    salary: number;\r\n    salary_record_id?: string;\r\n}\r\n\r\nconst Salaries = () => {\r\n    const queryClient = useQueryClient();\r\n    const [editingId, setEditingId] = useState<string | null>(null);\r\n    const [editAmount, setEditAmount] = useState<string>('');\r\n    const [tableMissing, setTableMissing] = useState(false);\r\n\r\n    const { data: staffList = [], isLoading } = useQuery({\r\n        queryKey: ['staff-salaries'],\r\n        queryFn: async () => {\r\n            // 1. Fetch Users & Roles\r\n            const { data: profiles } = await supabase.from('profiles').select('*');\r\n            const { data: roles } = await supabase.from('user_roles').select('*');\r\n            const { data: requests } = await supabase.from('staff_approval_requests').select('*');\r\n\r\n            // 2. Fetch Salaries (Handle error if table doesn't exist)\r\n            let salaries: any[] = [];\r\n            try {\r\n                const { data, error } = await supabase.from('staff_salaries' as any).select('*');\r\n                if (error) {\r\n                    if (error.code === '42P01') { // undefined_table\r\n                        setTableMissing(true);\r\n                    }\r\n                    throw error;\r\n                }\r\n                salaries = data || [];\r\n            } catch (err: any) {\r\n                console.warn(\"Could not fetch salaries:\", err);\r\n                if (err.code === '42P01') setTableMissing(true);\r\n            }\r\n\r\n            const roleMap = new Map((roles || []).map((r: any) => [r.user_id, r.role]));\r\n            const profileMap = new Map((profiles || []).map((p: any) => [p.user_id, p]));\r\n            const requestMap = new Map((requests || []).map((r: any) => [r.user_id, r]));\r\n            const salaryMap = new Map(salaries.map((s: any) => [s.user_id, s]));\r\n\r\n            const allUserIds = new Set([\r\n                ...(profiles || []).map((p: any) => p.user_id),\r\n                ...(roles || []).map((r: any) => r.user_id),\r\n                ...(requests || []).map((r: any) => r.user_id)\r\n            ]);\r\n\r\n            const staff: StaffMember[] = [];\r\n\r\n            allUserIds.forEach(userId => {\r\n                const role = roleMap.get(userId);\r\n                const request = requestMap.get(userId);\r\n\r\n                // Filter for staff only (has role or request)\r\n                if (!role && !request) return;\r\n                if (role === 'patient') return;\r\n\r\n                const profile = profileMap.get(userId);\r\n                const salaryRecord = salaryMap.get(userId);\r\n\r\n                const name = profile?.full_name || request?.full_name || 'Unknown Staff';\r\n                const email = profile?.email || request?.email || 'No Email';\r\n\r\n                let displayRole = role || (request ? `pending-${request.requested_role}` : 'unknown');\r\n\r\n                staff.push({\r\n                    id: userId,\r\n                    name,\r\n                    email,\r\n                    role: displayRole,\r\n                    salary: salaryRecord?.salary || 0,\r\n                    salary_record_id: salaryRecord?.id\r\n                });\r\n            });\r\n\r\n            return staff;\r\n        },\r\n    });\r\n\r\n    const updateSalaryMutation = useMutation({\r\n        mutationFn: async ({ userId, salary }: { userId: string; salary: number }) => {\r\n            // Upsert salary\r\n            // We need to know if we are inserting or updating, but upsert with unique key works best\r\n            // Since we defined user_id as unique, we can use upsert\r\n            const { error } = await supabase\r\n                .from('staff_salaries' as any)\r\n                .upsert({\r\n                    user_id: userId,\r\n                    salary: salary,\r\n                    updated_at: new Date().toISOString()\r\n                }, { onConflict: 'user_id' });\r\n\r\n            if (error) throw error;\r\n        },\r\n        onSuccess: () => {\r\n            toast.success('Salary updated successfully');\r\n            setEditingId(null);\r\n            queryClient.invalidateQueries({ queryKey: ['staff-salaries'] });\r\n        },\r\n        onError: (error: Error) => {\r\n            toast.error('Failed to update salary: ' + error.message);\r\n        },\r\n    });\r\n\r\n    const deleteStaffMutation = useMutation({\r\n        mutationFn: async (userId: string) => {\r\n            // Delete from multiple tables to remove staff access\r\n            // Note: This does not delete from auth.users (requires secure RPC), but removes all staff privileges\r\n\r\n            // 1. Delete Salary Record\r\n            if (!tableMissing) {\r\n                await supabase.from('staff_salaries' as any).delete().eq('user_id', userId);\r\n            }\r\n\r\n            // 2. Delete Role (Revokes access)\r\n            await supabase.from('user_roles').delete().eq('user_id', userId);\r\n\r\n            // 3. Delete Request\r\n            await supabase.from('staff_approval_requests').delete().eq('user_id', userId);\r\n\r\n            // 4. (Optional) We could delete profile, but usually good to keep for history if needed.\r\n            // For \"Delete from database\" requests, we usually assume wiping their staff existence.\r\n            // Let's delete profile too to be thorough as per user request\r\n            await supabase.from('profiles').delete().eq('user_id', userId);\r\n        },\r\n        onSuccess: () => {\r\n            toast.success('Staff member removed successfully');\r\n            queryClient.invalidateQueries({ queryKey: ['staff-salaries'] });\r\n            queryClient.invalidateQueries({ queryKey: ['admin-user-directory'] });\r\n        },\r\n        onError: (error: Error) => {\r\n            toast.error('Failed to remove staff member: ' + error.message);\r\n        }\r\n    });\r\n\r\n    const handleEdit = (staff: StaffMember) => {\r\n        setEditingId(staff.id);\r\n        setEditAmount(staff.salary.toString());\r\n    };\r\n\r\n    const handleSave = (userId: string) => {\r\n        updateSalaryMutation.mutate({ userId, salary: parseFloat(editAmount) || 0 });\r\n    };\r\n\r\n    const handleExportPDF = () => {\r\n        if (!staffList.length) {\r\n            toast.warning(\"No data to export\");\r\n            return;\r\n        }\r\n\r\n        const doc = new jsPDF();\r\n\r\n        // Add Title\r\n        doc.setFontSize(18);\r\n        doc.setTextColor(0, 128, 0); // Green color\r\n        doc.text(\"Star Hospital - Staff Directory\", 14, 22);\r\n\r\n        doc.setFontSize(11);\r\n        doc.setTextColor(100);\r\n        doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 14, 30);\r\n\r\n        // Define Table Columns and Data\r\n        const tableColumn = [\"Name\", \"Email\", \"Role\", \"Monthly Salary\"];\r\n        const tableRows: any[] = [];\r\n\r\n        staffList.forEach((staff) => {\r\n            const staffData = [\r\n                staff.name,\r\n                staff.email,\r\n                staff.role.toUpperCase(),\r\n                `Rs. ${staff.salary.toLocaleString()}`\r\n            ];\r\n            tableRows.push(staffData);\r\n        });\r\n\r\n        // Generate Table\r\n        autoTable(doc, {\r\n            head: [tableColumn],\r\n            body: tableRows,\r\n            startY: 40,\r\n            theme: 'grid',\r\n            headStyles: { fillColor: [22, 163, 74] }, // Green-600\r\n        });\r\n\r\n        // Save PDF\r\n        doc.save(\"star_hospital_staff_list.pdf\");\r\n        toast.success(\"Staff list exported to PDF\");\r\n    };\r\n\r\n    const getRoleBadge = (role: string) => {\r\n        const colors: Record<string, string> = {\r\n            admin: 'bg-purple-100 text-purple-800 border-purple-200',\r\n            doctor: 'bg-blue-100 text-blue-800 border-blue-200',\r\n            nurse: 'bg-pink-100 text-pink-800 border-pink-200',\r\n            cashier: 'bg-emerald-100 text-emerald-800 border-emerald-200',\r\n            receptionist: 'bg-orange-100 text-orange-800 border-orange-200',\r\n        };\r\n        const baseRole = role.replace('pending-', '') as string;\r\n        const color = colors[baseRole] || 'bg-gray-100 text-gray-800 border-gray-200';\r\n        return <Badge variant=\"outline\" className={color}>{role.toUpperCase()}</Badge>;\r\n    };\r\n\r\n    return (\r\n        <DashboardLayout title=\"Staff Salaries\" subtitle=\"Manage salaries for all staff members\">\r\n            {tableMissing && (\r\n                <Alert variant=\"destructive\" className=\"mb-6 bg-yellow-50 border-yellow-200 text-yellow-800\">\r\n                    <AlertTriangle className=\"h-4 w-4 text-yellow-600\" />\r\n                    <AlertTitle>Salary Database Missing</AlertTitle>\r\n                    <AlertDescription className=\"flex items-center justify-between\">\r\n                        <span>\r\n                            The \"staff_salaries\" table does not exist. You cannot save salaries until this table is created.\r\n                        </span>\r\n                        <Dialog>\r\n                            <DialogTrigger asChild>\r\n                                <Button size=\"sm\" variant=\"outline\" className=\"ml-4 h-8 bg-white border-yellow-300 hover:bg-yellow-100 text-yellow-900\">\r\n                                    <Terminal className=\"w-3 h-3 mr-2\" /> Fix with SQL\r\n                                </Button>\r\n                            </DialogTrigger>\r\n                            <DialogContent className=\"max-w-2xl\">\r\n                                <DialogHeader>\r\n                                    <DialogTitle>Create Salaries Table</DialogTitle>\r\n                                    <DialogDescription>\r\n                                        Run this SQL in your Supabase Dashboard to create the necessary table.\r\n                                    </DialogDescription>\r\n                                </DialogHeader>\r\n                                <div className=\"space-y-4\">\r\n                                    <div className=\"bg-slate-950 text-slate-50 p-4 rounded-md font-mono text-xs overflow-x-auto relative group\">\r\n                                        <pre>{`CREATE TABLE IF NOT EXISTS public.staff_salaries (\r\n    id uuid DEFAULT gen_random_uuid() PRIMARY KEY,\r\n    user_id uuid REFERENCES auth.users(id) NOT NULL UNIQUE,\r\n    salary numeric DEFAULT 0,\r\n    created_at timestamptz DEFAULT now(),\r\n    updated_at timestamptz DEFAULT now()\r\n);\r\n\r\nALTER TABLE public.staff_salaries ENABLE ROW LEVEL SECURITY;\r\n\r\nCREATE POLICY \"Admins can manage salaries\" ON public.staff_salaries\r\n    FOR ALL\r\n    USING (\r\n      EXISTS (\r\n        SELECT 1 FROM public.user_roles \r\n        WHERE user_id = auth.uid() AND role = 'admin'\r\n      )\r\n    );`}</pre>\r\n                                        <Button\r\n                                            size=\"sm\"\r\n                                            className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                                            onClick={() => navigator.clipboard.writeText(`CREATE TABLE IF NOT EXISTS public.staff_salaries...`)}\r\n                                        >\r\n                                            <Copy className=\"w-3 h-3\" /> Copy\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </DialogContent>\r\n                        </Dialog>\r\n                    </AlertDescription>\r\n                </Alert>\r\n            )}\r\n\r\n            <Card>\r\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-4\">\r\n                    <div className=\"space-y-1\">\r\n                        <CardTitle className=\"flex items-center gap-2\">\r\n                            <Banknote className=\"h-6 w-6 text-green-600\" />\r\n                            Staff Payroll\r\n                        </CardTitle>\r\n                        <CardDescription>\r\n                            Total Monthly Payroll: â‚¹{staffList.reduce((sum, s) => sum + s.salary, 0).toLocaleString()}\r\n                        </CardDescription>\r\n                    </div>\r\n                    <Button onClick={handleExportPDF} variant=\"outline\" className=\"gap-2 border-green-200 text-green-700 hover:bg-green-50\">\r\n                        <FileText className=\"h-4 w-4\" /> Export PDF\r\n                    </Button>\r\n                </CardHeader>\r\n                <CardContent>\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow>\r\n                                <TableHead>Staff Name</TableHead>\r\n                                <TableHead>Role</TableHead>\r\n                                <TableHead>Monthly Salary</TableHead>\r\n                                <TableHead className=\"w-[120px] text-right\">Actions</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {staffList.length === 0 ? (\r\n                                <TableRow>\r\n                                    <TableCell colSpan={4} className=\"text-center py-8 text-muted-foreground\">\r\n                                        No staff members found.\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ) : (\r\n                                staffList.map((staff) => (\r\n                                    <TableRow key={staff.id}>\r\n                                        <TableCell>\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span className=\"font-medium\">{staff.name}</span>\r\n                                                <span className=\"text-xs text-muted-foreground\">{staff.email}</span>\r\n                                            </div>\r\n                                        </TableCell>\r\n                                        <TableCell>{getRoleBadge(staff.role)}</TableCell>\r\n                                        <TableCell className=\"text-right\">\r\n                                            {editingId === staff.id ? (\r\n                                                <Input\r\n                                                    type=\"number\"\r\n                                                    value={editAmount}\r\n                                                    onChange={(e) => setEditAmount(e.target.value)}\r\n                                                    className=\"w-32\"\r\n                                                    placeholder=\"â‚¹ 0\"\r\n                                                />\r\n                                            ) : (\r\n                                                <span className={staff.salary > 0 ? \"font-medium\" : \"text-muted-foreground italic\"}>\r\n                                                    {staff.salary > 0 ? `â‚¹${staff.salary.toLocaleString()}` : 'Not Set'}\r\n                                                </span>\r\n                                            )}\r\n                                        </TableCell>\r\n                                        <TableCell className=\"text-right\">\r\n                                            {editingId === staff.id ? (\r\n                                                <div className=\"flex items-center justify-end gap-2\">\r\n                                                    <Button size=\"sm\" variant=\"ghost\" onClick={() => handleSave(staff.id)} className=\"h-8 w-8 p-0 text-green-600\">\r\n                                                        <Save className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                    <Button size=\"sm\" variant=\"ghost\" onClick={() => setEditingId(null)} className=\"h-8 w-8 p-0 text-destructive\">\r\n                                                        <X className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div className=\"flex items-center justify-end gap-2\">\r\n                                                    <Dialog>\r\n                                                        <DialogTrigger asChild>\r\n                                                            <Button size=\"sm\" variant=\"ghost\" className=\"h-8 w-8 p-0 text-blue-600 hover:text-blue-700 hover:bg-blue-50\" title=\"Manage Credentials\">\r\n                                                                <RefreshCw className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                        </DialogTrigger>\r\n                                                        <DialogContent>\r\n                                                            <DialogHeader>\r\n                                                                <DialogTitle>Reset Staff Password</DialogTitle>\r\n                                                                <DialogDescription>\r\n                                                                    Set a new password for <strong>{staff.name}</strong>.\r\n                                                                    <br />\r\n                                                                    <span className=\"text-red-500 text-xs\">This will immediately invalidate their old password.</span>\r\n                                                                </DialogDescription>\r\n                                                            </DialogHeader>\r\n                                                            <form\r\n                                                                onSubmit={async (e) => {\r\n                                                                    e.preventDefault();\r\n                                                                    const formData = new FormData(e.currentTarget);\r\n                                                                    const newPass = formData.get('newPassword') as string;\r\n\r\n                                                                    if (!newPass || newPass.length < 6) {\r\n                                                                        toast.error(\"Password must be at least 6 characters\");\r\n                                                                        return;\r\n                                                                    }\r\n\r\n                                                                    try {\r\n                                                                        const { error } = await supabase.rpc('admin_reset_password', {\r\n                                                                            target_user_id: staff.id,\r\n                                                                            new_password: newPass\r\n                                                                        });\r\n\r\n                                                                        if (error) throw error;\r\n                                                                        toast.success(`Password updated for ${staff.name}`);\r\n                                                                        (e.target as HTMLFormElement).reset();\r\n                                                                    } catch (err: any) {\r\n                                                                        toast.error(\"Failed to reset: \" + err.message);\r\n                                                                    }\r\n                                                                }}\r\n                                                                className=\"space-y-4 pt-4\"\r\n                                                            >\r\n                                                                <div className=\"space-y-2\">\r\n                                                                    <label htmlFor=\"staffNewPassword\" className=\"text-sm font-medium\">New Password</label>\r\n                                                                    <Input\r\n                                                                        id=\"staffNewPassword\"\r\n                                                                        name=\"newPassword\"\r\n                                                                        type=\"text\"\r\n                                                                        placeholder=\"Enter new password\"\r\n                                                                        minLength={6}\r\n                                                                        required\r\n                                                                    />\r\n                                                                </div>\r\n                                                                <Button type=\"submit\" className=\"w-full bg-blue-600 hover:bg-blue-700 text-white\">\r\n                                                                    Update Password\r\n                                                                </Button>\r\n                                                            </form>\r\n                                                        </DialogContent>\r\n                                                    </Dialog>\r\n\r\n                                                    <Button size=\"sm\" variant=\"ghost\" onClick={() => handleEdit(staff)} className=\"h-8 w-8 p-0\" disabled={tableMissing}>\r\n                                                        <Edit2 className=\"h-4 w-4\" />\r\n                                                    </Button>\r\n\r\n                                                    <AlertDialog>\r\n                                                        <AlertDialogTrigger asChild>\r\n                                                            <Button size=\"sm\" variant=\"ghost\" className=\"h-8 w-8 p-0 text-destructive hover:bg-destructive/10 hover:text-destructive\">\r\n                                                                <Trash2 className=\"h-4 w-4\" />\r\n                                                            </Button>\r\n                                                        </AlertDialogTrigger>\r\n                                                        <AlertDialogContent>\r\n                                                            <AlertDialogHeader>\r\n                                                                <AlertDialogTitle>Remove Staff Member?</AlertDialogTitle>\r\n                                                                <AlertDialogDescription>\r\n                                                                    This will remove <strong>{staff.name}</strong> from the staff directory and revoke their access.\r\n                                                                    This action cannot be undone.\r\n                                                                </AlertDialogDescription>\r\n                                                            </AlertDialogHeader>\r\n                                                            <AlertDialogFooter>\r\n                                                                <AlertDialogCancel>Cancel</AlertDialogCancel>\r\n                                                                <AlertDialogAction\r\n                                                                    onClick={() => deleteStaffMutation.mutate(staff.id)}\r\n                                                                    className=\"bg-destructive hover:bg-destructive/90\"\r\n                                                                >\r\n                                                                    Remove Staff\r\n                                                                </AlertDialogAction>\r\n                                                            </AlertDialogFooter>\r\n                                                        </AlertDialogContent>\r\n                                                    </AlertDialog>\r\n                                                </div>\r\n                                            )}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </CardContent>\r\n            </Card>\r\n        </DashboardLayout>\r\n    );\r\n};\r\n\r\nexport default Salaries;\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\StaffApprovals.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":143,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":143,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":143,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4956,4959],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4956,4959],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { supabase } from '@/integrations/supabase/client';\nimport { useAuth } from '@/contexts/AuthContext';\nimport DashboardLayout from '@/components/layout/DashboardLayout';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { toast } from 'sonner';\nimport { format } from 'date-fns';\nimport { UserCheck, UserX, Clock, Search, Shield, FileQuestion, CheckCircle, XCircle } from 'lucide-react';\n\ninterface ApprovalRequest {\n  id: string;\n  user_id: string;\n  email: string;\n  full_name: string;\n  requested_role: 'admin' | 'doctor' | 'nurse' | 'receptionist' | 'cashier';\n  status: string;\n  created_at: string;\n}\n\ninterface ChangeRequest {\n  id: string;\n  title: string;\n  message: string;\n  created_at: string;\n  is_read: boolean;\n}\n\nconst StaffApprovals = () => {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [rejectDialogOpen, setRejectDialogOpen] = useState(false);\n  const [selectedRequest, setSelectedRequest] = useState<ApprovalRequest | null>(null);\n  const [rejectionReason, setRejectionReason] = useState('');\n\n  // Fetch approval requests\n  const { data: requests = [], isLoading } = useQuery({\n    queryKey: ['staff-approval-requests'],\n    queryFn: async () => {\n      const { data, error } = await supabase\n        .from('staff_approval_requests')\n        .select('*')\n        .order('created_at', { ascending: false });\n      if (error) throw error;\n      return data as ApprovalRequest[];\n    },\n  });\n\n  // Fetch change requests (notifications)\n  const { data: changeRequests = [], isLoading: isChangeLoading } = useQuery({\n    queryKey: ['change-requests'],\n    queryFn: async () => {\n      if (!user) return [];\n      const { data, error } = await supabase\n        .from('notifications')\n        .select('*')\n        .eq('user_id', user.id) // Get notifications for current admin\n        .eq('type', 'permission_request')\n        .order('created_at', { ascending: false });\n\n      if (error) throw error; // Log error but don't break page?\n      return data as ChangeRequest[];\n    },\n    enabled: !!user\n  });\n\n  // Approve mutation\n  const approveMutation = useMutation({\n    mutationFn: async (request: ApprovalRequest) => {\n      // First create the user role\n      const { error: roleError } = await supabase.from('user_roles').insert({\n        user_id: request.user_id,\n        role: request.requested_role,\n      });\n      if (roleError) throw roleError;\n\n      // Then update the approval request status\n      const { error: updateError } = await supabase\n        .from('staff_approval_requests')\n        .update({\n          status: 'approved',\n          reviewed_by: user?.id,\n          reviewed_at: new Date().toISOString(),\n        })\n        .eq('id', request.id);\n      if (updateError) throw updateError;\n    },\n    onSuccess: () => {\n      toast.success('Staff access approved!');\n      queryClient.invalidateQueries({ queryKey: ['staff-approval-requests'] });\n    },\n    onError: (error: Error) => {\n      toast.error(error.message || 'Failed to approve request');\n    },\n  });\n\n  // Reject mutation\n  const rejectMutation = useMutation({\n    mutationFn: async ({ request, reason }: { request: ApprovalRequest; reason: string }) => {\n      const { error } = await supabase\n        .from('staff_approval_requests')\n        .update({\n          status: 'rejected',\n          reviewed_by: user?.id,\n          reviewed_at: new Date().toISOString(),\n          rejection_reason: reason,\n        })\n        .eq('id', request.id);\n      if (error) throw error;\n    },\n    onSuccess: () => {\n      toast.success('Request rejected');\n      setRejectDialogOpen(false);\n      setRejectionReason('');\n      setSelectedRequest(null);\n      queryClient.invalidateQueries({ queryKey: ['staff-approval-requests'] });\n    },\n    onError: (error: Error) => {\n      toast.error(error.message || 'Failed to reject request');\n    },\n  });\n\n  // Resolve Change Request (Delete notification)\n  const resolveRequestMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const { error } = await supabase\n        .from('notifications')\n        .delete()\n        .eq('id', id);\n      if (error) throw error;\n    },\n    onSuccess: () => {\n      toast.success(\"Request processed\");\n      queryClient.invalidateQueries({ queryKey: ['change-requests'] });\n    },\n    onError: (error: any) => {\n      toast.error(\"Failed to process request\");\n    }\n  });\n\n  const filteredRequests = requests.filter(\n    (req) =>\n      req.full_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      req.email.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const pendingRequests = filteredRequests.filter((r) => r.status === 'pending');\n  const processedRequests = filteredRequests.filter((r) => r.status !== 'pending');\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'approved':\n        return <Badge className=\"bg-green-100 text-green-800\">Approved</Badge>;\n      case 'rejected':\n        return <Badge className=\"bg-red-100 text-red-800\">Rejected</Badge>;\n      default:\n        return <Badge className=\"bg-yellow-100 text-yellow-800\">Pending</Badge>;\n    }\n  };\n\n  const getRoleBadge = (role: string) => {\n    const colors: Record<string, string> = {\n      admin: 'bg-purple-100 text-purple-800',\n      doctor: 'bg-blue-100 text-blue-800',\n      nurse: 'bg-pink-100 text-pink-800',\n      receptionist: 'bg-gray-100 text-gray-800',\n      cashier: 'bg-emerald-100 text-emerald-800',\n    };\n    return <Badge className={colors[role] || 'bg-gray-100 text-gray-800'}>{role}</Badge>;\n  };\n\n  return (\n    <DashboardLayout title=\"Staff Approvals\" subtitle=\"Manage staff access and requests\">\n      <div className=\"space-y-6\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-3xl font-bold flex items-center gap-2\">\n              <Shield className=\"h-8 w-8\" />\n              Staff Approvals & Requests\n            </h1>\n            <p className=\"text-muted-foreground\">Manage access and review change requests</p>\n          </div>\n        </div>\n\n        <Tabs defaultValue=\"approvals\" className=\"w-full space-y-6\">\n          <TabsList>\n            <TabsTrigger value=\"approvals\">Access Approvals</TabsTrigger>\n            <TabsTrigger value=\"requests\">Change Requests</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"approvals\" className=\"space-y-6\">\n            {/* Search */}\n            <div className=\"relative max-w-md\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search by name or email...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n\n            {/* Pending Requests */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Clock className=\"h-5 w-5 text-yellow-600\" />\n                  Pending Requests ({pendingRequests.length})\n                </CardTitle>\n                <CardDescription>Requests awaiting your approval</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {isLoading ? (\n                  <div className=\"flex justify-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n                  </div>\n                ) : pendingRequests.length === 0 ? (\n                  <p className=\"text-muted-foreground text-center py-8\">No pending requests</p>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {pendingRequests.map((request) => (\n                      <div\n                        key={request.id}\n                        className=\"flex items-center justify-between p-4 border rounded-lg\"\n                      >\n                        <div className=\"space-y-1\">\n                          <div className=\"font-medium\">{request.full_name}</div>\n                          <div className=\"text-sm text-muted-foreground\">{request.email}</div>\n                          <div className=\"flex items-center gap-2\">\n                            {getRoleBadge(request.requested_role)}\n                            <span className=\"text-xs text-muted-foreground\">\n                              Requested {format(new Date(request.created_at), 'MMM d, yyyy')}\n                            </span>\n                          </div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button\n                            size=\"sm\"\n                            onClick={() => approveMutation.mutate(request)}\n                            disabled={approveMutation.isPending}\n                            className=\"bg-green-600 hover:bg-green-700\"\n                          >\n                            <UserCheck className=\"h-4 w-4 mr-1\" />\n                            Approve\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"destructive\"\n                            onClick={() => {\n                              setSelectedRequest(request);\n                              setRejectDialogOpen(true);\n                            }}\n                          >\n                            <UserX className=\"h-4 w-4 mr-1\" />\n                            Reject\n                          </Button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Processed Requests */}\n            <Card>\n              <CardHeader>\n                <CardTitle>Processed Requests ({processedRequests.length})</CardTitle>\n                <CardDescription>Previously reviewed requests</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {processedRequests.length === 0 ? (\n                  <p className=\"text-muted-foreground text-center py-8\">No processed requests</p>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {processedRequests.map((request) => (\n                      <div\n                        key={request.id}\n                        className=\"flex items-center justify-between p-4 border rounded-lg\"\n                      >\n                        <div className=\"space-y-1\">\n                          <div className=\"font-medium\">{request.full_name}</div>\n                          <div className=\"text-sm text-muted-foreground\">{request.email}</div>\n                          <div className=\"flex items-center gap-2\">\n                            {getRoleBadge(request.requested_role)}\n                            {getStatusBadge(request.status)}\n                          </div>\n                        </div>\n                        <div className=\"text-sm text-muted-foreground\">\n                          {format(new Date(request.created_at), 'MMM d, yyyy')}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"requests\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <FileQuestion className=\"h-5 w-5 text-blue-600\" />\n                  Operations Change Requests\n                </CardTitle>\n                <CardDescription>Requests from staff for restricted actions (e.g. Doctor Schedule Changes)</CardDescription>\n              </CardHeader>\n              <CardContent>\n                {isChangeLoading ? (\n                  <div className=\"flex justify-center py-8\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary\"></div>\n                  </div>\n                ) : changeRequests.length === 0 ? (\n                  <div className=\"text-center py-12 text-muted-foreground bg-muted/20 rounded-lg\">\n                    <FileQuestion className=\"mx-auto h-12 w-12 opacity-20 mb-3\" />\n                    <p>No active change requests.</p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {changeRequests.map((req) => (\n                      <div key={req.id} className=\"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center p-4 border rounded-lg bg-card shadow-sm\">\n                        <div className=\"space-y-1 flex-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <h4 className=\"font-semibold text-foreground\">{req.title}</h4>\n                            <Badge variant=\"outline\" className=\"text-xs\">{format(new Date(req.created_at), 'MMM d, h:mm a')}</Badge>\n                          </div>\n                          <p className=\"text-sm text-foreground/80\">{req.message}</p>\n                        </div>\n                        <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n                          <Button\n                            size=\"sm\"\n                            variant=\"default\"\n                            onClick={() => resolveRequestMutation.mutate(req.id)}\n                            className=\"flex-1 sm:flex-none bg-green-600 hover:bg-green-700\"\n                          >\n                            <CheckCircle className=\"w-4 h-4 mr-2\" />\n                            Done\n                          </Button>\n                          <Button\n                            size=\"sm\"\n                            variant=\"outline\"\n                            onClick={() => resolveRequestMutation.mutate(req.id)}\n                            className=\"flex-1 sm:flex-none text-muted-foreground hover:text-foreground\"\n                          >\n                            <XCircle className=\"w-4 h-4 mr-2\" />\n                            Dismiss\n                          </Button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n\n        {/* Reject Dialog */}\n        <Dialog open={rejectDialogOpen} onOpenChange={setRejectDialogOpen}>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Reject Access Request</DialogTitle>\n              <DialogDescription>\n                Please provide a reason for rejecting {selectedRequest?.full_name}'s request.\n              </DialogDescription>\n            </DialogHeader>\n            <Textarea\n              placeholder=\"Enter rejection reason (optional)\"\n              value={rejectionReason}\n              onChange={(e) => setRejectionReason(e.target.value)}\n            />\n            <DialogFooter>\n              <Button variant=\"outline\" onClick={() => setRejectDialogOpen(false)}>\n                Cancel\n              </Button>\n              <Button\n                variant=\"destructive\"\n                onClick={() => {\n                  if (selectedRequest) {\n                    rejectMutation.mutate({ request: selectedRequest, reason: rejectionReason });\n                  }\n                }}\n                disabled={rejectMutation.isPending}\n              >\n                Reject Request\n              </Button>\n            </DialogFooter>\n          </DialogContent>\n        </Dialog>\n      </div>\n    </DashboardLayout>\n  );\n};\n\nexport default StaffApprovals;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\StaffLogin.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Heart' is defined but never used.","line":10,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Stethoscope' is defined but never used.","line":10,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":10,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":57,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":57,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1786,1789],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1786,1789],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { toast } from 'sonner';\nimport { Heart, ArrowLeft, Stethoscope, Eye, EyeOff } from 'lucide-react';\n\nconst StaffLogin = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const { signIn } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!email.trim() || !password.trim()) {\n      toast.error('Please fill in all fields');\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await signIn(email, password);\n\n    if (error) {\n      setLoading(false);\n      toast.error(error.message || 'Failed to sign in');\n      return;\n    }\n\n    // Check if user has staff role\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) {\n      setLoading(false);\n      toast.error('Authentication failed');\n      return;\n    }\n\n    // Check for approved staff role\n    const { data: roleData } = await supabase\n      .from('user_roles')\n      .select('role')\n      .eq('user_id', user.id)\n      .maybeSingle();\n\n    if (roleData) {\n      setLoading(false);\n      toast.success('Welcome back!');\n\n      // Redirect based on role\n      if (roleData.role === 'cashier' as any) {\n        navigate('/staff/dashboard/cashier');\n      } else if (roleData.role === 'nurse') {\n        navigate('/staff/dashboard/nurse');\n      } else if (roleData.role === 'doctor') {\n        navigate('/staff/dashboard/doctor');\n      } else if (roleData.role === 'receptionist') {\n        navigate('/staff/dashboard/reception');\n      } else {\n        navigate('/dashboard'); // Default fallback\n      }\n      return;\n    }\n\n    // Check if they have a pending approval request\n    const { data: approvalData } = await supabase\n      .from('staff_approval_requests')\n      .select('status')\n      .eq('user_id', user.id)\n      .maybeSingle();\n\n    setLoading(false);\n\n    if (approvalData) {\n      if (approvalData.status === 'pending') {\n        toast.info('Your staff access request is pending approval.');\n        navigate('/staff/pending');\n        return;\n      } else if (approvalData.status === 'rejected') {\n        toast.error('Your staff access request was rejected.');\n        await supabase.auth.signOut();\n        return;\n      }\n    }\n\n    // User is not staff - redirect to patient portal\n    toast.info('You do not have staff access. Redirecting to patient portal...');\n    navigate('/patient/dashboard');\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <Link to=\"/\" className=\"flex items-center gap-2 text-muted-foreground hover:text-green-600 mb-4 justify-center\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back to Portal Selection\n          </Link>\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <img src=\"/logo.png\" alt=\"Medicare Logo\" className=\"h-8 w-8 object-contain\" />\n            <span className=\"text-2xl font-bold text-green-600\">Staff Portal</span>\n          </div>\n          <CardTitle className=\"text-2xl\">Staff Sign In</CardTitle>\n          <CardDescription>\n            Access the Hospital Management System\n          </CardDescription>\n        </CardHeader>\n        <form onSubmit={handleSubmit}>\n          <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"Enter your staff email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                autoComplete=\"email\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <div className=\"relative\">\n                <Input\n                  id=\"password\"\n                  type={showPassword ? 'text' : 'password'}\n                  placeholder=\"Enter your password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  required\n                  autoComplete=\"current-password\"\n                  className=\"pr-10\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                >\n                  {showPassword ? <EyeOff className=\"h-4 w-4\" /> : <Eye className=\"h-4 w-4\" />}\n                </button>\n              </div>\n            </div>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Button type=\"submit\" className=\"w-full bg-green-600 hover:bg-green-700\" disabled={loading}>\n              {loading ? 'Signing in...' : 'Sign In'}\n            </Button>\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Need staff access?{' '}\n              <Link to=\"/staff/register\" className=\"text-green-600 hover:underline\">\n                Request access here\n              </Link>\n            </p>\n          </CardFooter>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\nexport default StaffLogin;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\StaffPending.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\pages\\staff\\StaffRegister.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Stethoscope' is defined but never used.","line":12,"column":21,"nodeType":null,"messageId":"unusedVar","endLine":12,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":75,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":75,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2586,2589],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2586,2589],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":81,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":81,"endColumn":23,"suggestions":[{"fix":{"range":[2843,2902],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":94,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":94,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3424,3427],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3424,3427],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":99,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":99,"endColumn":22,"suggestions":[{"fix":{"range":[3502,3566],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { supabase } from '@/integrations/supabase/client';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { toast } from 'sonner';\nimport { ArrowLeft, Stethoscope, Info } from 'lucide-react';\n\nconst StaffRegister = () => {\n  const [fullName, setFullName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [requestedRole, setRequestedRole] = useState<'doctor' | 'nurse' | 'receptionist' | 'cashier'>('receptionist');\n  const [loading, setLoading] = useState(false);\n  const { signUp } = useAuth();\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!fullName.trim() || !email.trim() || !password.trim()) {\n      toast.error('Please fill in all required fields');\n      return;\n    }\n\n    if (password !== confirmPassword) {\n      toast.error('Passwords do not match');\n      return;\n    }\n\n    if (password.length < 6) {\n      toast.error('Password must be at least 6 characters');\n      return;\n    }\n\n    setLoading(true);\n    const { error } = await signUp(email, password, fullName);\n\n    if (error) {\n      setLoading(false);\n      toast.error(error.message || 'Failed to register');\n      return;\n    }\n\n    // Sign in to create the approval request\n    const { error: signInError } = await supabase.auth.signInWithPassword({\n      email,\n      password,\n    });\n\n    if (signInError) {\n      setLoading(false);\n      toast.success('Account created! Please sign in to complete your access request.');\n      navigate('/staff/login');\n      return;\n    }\n\n    // Create staff approval request\n    const { data: { user } } = await supabase.auth.getUser();\n    if (user) {\n      let requestError = null;\n\n      try {\n        // Try inserting with proper role\n        const { error } = await supabase.from('staff_approval_requests').insert({\n          user_id: user.id,\n          email: email,\n          full_name: fullName,\n          requested_role: requestedRole as any,\n        });\n        requestError = error;\n\n        // If 'cashier' fails (likely due to enum constraint), retry as receptionist with marker\n        if (error && requestedRole === 'cashier' && error.message?.includes('invalid input value')) {\n          console.warn(\"Cashier role not in DB Enum, falling back.\");\n          const { error: fallbackError } = await supabase.from('staff_approval_requests').insert({\n            user_id: user.id,\n            email: email,\n            full_name: `${fullName} (REQUESTING CASHIER)`,\n            requested_role: 'receptionist',\n          });\n          requestError = fallbackError;\n\n          if (!fallbackError) {\n            toast.info(\"Request submitted. Note: Cashier role requires admin database update, handled as Receptionist temporarily.\");\n          }\n        }\n      } catch (err: any) {\n        requestError = err;\n      }\n\n      if (requestError) {\n        console.error('Error creating approval request:', requestError);\n        setLoading(false);\n        toast.error('Failed to submit access request: ' + requestError.message);\n        return;\n      }\n    }\n\n    setLoading(false);\n    toast.success('Access request submitted! An administrator will review your request.');\n    navigate('/staff/pending');\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-emerald-100 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <Link to=\"/\" className=\"flex items-center gap-2 text-muted-foreground hover:text-green-600 mb-4 justify-center\">\n            <ArrowLeft className=\"h-4 w-4\" />\n            Back to Portal Selection\n          </Link>\n          <div className=\"flex items-center justify-center gap-2 mb-2\">\n            <img src=\"/logo.png\" alt=\"Medicare Logo\" className=\"h-8 w-8 object-contain\" />\n            <span className=\"text-2xl font-bold text-green-600\">Staff Portal</span>\n          </div>\n          <CardTitle className=\"text-2xl\">Request Staff Access</CardTitle>\n          <CardDescription>\n            Submit a request to access the Hospital Management System\n          </CardDescription>\n        </CardHeader>\n        <form onSubmit={handleSubmit}>\n          <CardContent className=\"space-y-4\">\n            <Alert>\n              <Info className=\"h-4 w-4\" />\n              <AlertDescription>\n                Staff access requires administrator approval. You will be notified once your request is reviewed.\n              </AlertDescription>\n            </Alert>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"fullName\">Full Name *</Label>\n              <Input\n                id=\"fullName\"\n                type=\"text\"\n                placeholder=\"Enter your full name\"\n                value={fullName}\n                onChange={(e) => setFullName(e.target.value)}\n                required\n                autoComplete=\"name\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email *</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"Enter your work email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                autoComplete=\"email\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"role\">Requested Role *</Label>\n              <Select value={requestedRole} onValueChange={(value: 'doctor' | 'nurse' | 'receptionist') => setRequestedRole(value)}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"doctor\">Doctor</SelectItem>\n                  <SelectItem value=\"nurse\">Nurse</SelectItem>\n                  <SelectItem value=\"receptionist\">Receptionist</SelectItem>\n                  <SelectItem value=\"cashier\">Cashier</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password *</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Create a password (min 6 characters)\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                autoComplete=\"new-password\"\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"confirmPassword\">Confirm Password *</Label>\n              <Input\n                id=\"confirmPassword\"\n                type=\"password\"\n                placeholder=\"Confirm your password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                required\n                autoComplete=\"new-password\"\n              />\n            </div>\n          </CardContent>\n          <CardFooter className=\"flex flex-col gap-4\">\n            <Button type=\"submit\" className=\"w-full bg-green-600 hover:bg-green-700\" disabled={loading}>\n              {loading ? 'Submitting request...' : 'Submit Access Request'}\n            </Button>\n            <p className=\"text-sm text-muted-foreground text-center\">\n              Already have staff access?{' '}\n              <Link to=\"/staff/login\" className=\"text-green-600 hover:underline\">\n                Sign in here\n              </Link>\n            </p>\n          </CardFooter>\n        </form>\n      </Card>\n    </div>\n  );\n};\n\nexport default StaffRegister;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\src\\vite-env.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\supabase\\functions\\maya-chat\\index.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":182,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":182,"endColumn":18,"suggestions":[{"fix":{"range":[5264,5305],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import \"https://deno.land/x/xhr@0.1.0/mod.ts\";\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2.39.3?target=deno\";\n\n// Deno env typings\ndeclare const Deno: {\n  env: {\n    get(key: string): string | undefined;\n  };\n  serve(handler: (req: Request) => Promise<Response> | Response): void;\n};\n\nconst corsHeaders = {\n  \"Access-Control-Allow-Origin\": \"*\",\n  \"Access-Control-Allow-Headers\": \"authorization, x-client-info, apikey, content-type\",\n};\n\n// ===== Types =====\ninterface Message {\n  role: \"system\" | \"user\" | \"assistant\";\n  content: string;\n}\n\ninterface RequestBody {\n  messages: Message[];\n  sessionId: string;\n}\n\n// ===== Validation Constants =====\nconst MAX_MESSAGE_LENGTH = 1000;\nconst MAX_MESSAGES = 20;\nconst SESSION_ID_PATTERN = /^[a-zA-Z0-9-_]{10,100}$/;\n\n// ===== Validation =====\nfunction validateRequest(\n  body: unknown\n): { valid: true; data: RequestBody } | { valid: false; error: string } {\n  if (!body || typeof body !== \"object\") {\n    return { valid: false, error: \"Invalid request body\" };\n  }\n\n  const { messages, sessionId } = body as Record<string, unknown>;\n\n  if (typeof sessionId !== \"string\" || !SESSION_ID_PATTERN.test(sessionId)) {\n    return { valid: false, error: \"Invalid session ID format\" };\n  }\n\n  if (!Array.isArray(messages) || messages.length === 0) {\n    return { valid: false, error: \"Messages must be a non-empty array\" };\n  }\n\n  if (messages.length > MAX_MESSAGES) {\n    return { valid: false, error: `Maximum ${MAX_MESSAGES} messages allowed` };\n  }\n\n  for (const msg of messages) {\n    if (!msg || typeof msg !== \"object\") {\n      return { valid: false, error: \"Invalid message format\" };\n    }\n\n    const { role, content } = msg as Record<string, unknown>;\n\n    if (![\"system\", \"user\", \"assistant\"].includes(role as string)) {\n      return { valid: false, error: \"Invalid message role\" };\n    }\n\n    if (typeof content !== \"string\" || content.length === 0) {\n      return { valid: false, error: \"Message content must be a non-empty string\" };\n    }\n\n    if (content.length > MAX_MESSAGE_LENGTH) {\n      return {\n        valid: false,\n        error: `Message content must be under ${MAX_MESSAGE_LENGTH} characters`,\n      };\n    }\n  }\n\n  return {\n    valid: true,\n    data: {\n      messages: messages as Message[],\n      sessionId: sessionId as string,\n    },\n  };\n}\n\n// ===== Sanitization =====\nfunction sanitizeContent(content: string): string {\n  return content\n    .replace(/ignore\\s*(all\\s*)?(previous\\s*)?instructions/gi, \"\")\n    .replace(/you\\s*are\\s*now/gi, \"\")\n    .replace(/pretend\\s*(to\\s*be|you\\s*are)/gi, \"\")\n    .trim();\n}\n\n// ===== Server =====\nDeno.serve(async (req: Request) => {\n  if (req.method === \"OPTIONS\") {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  try {\n    const authHeader = req.headers.get(\"Authorization\");\n    if (!authHeader) {\n      return new Response(\n        JSON.stringify({ error: \"Missing authorization header\" }),\n        { status: 401, headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    const supabase = createClient(\n      Deno.env.get(\"SUPABASE_URL\") ?? \"\",\n      Deno.env.get(\"SUPABASE_ANON_KEY\") ?? \"\",\n      { global: { headers: { Authorization: authHeader } } }\n    );\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\n    if (authError || !user) {\n      return new Response(\n        JSON.stringify({ error: \"Unauthorized\" }),\n        { status: 401, headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    const body = await req.json();\n    const validation = validateRequest(body);\n\n    if (!validation.valid) {\n      return new Response(\n        JSON.stringify({ error: validation.error }),\n        { status: 400, headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    const sanitizedMessages = validation.data.messages.map((msg) => ({\n      ...msg,\n      content: msg.role === \"user\" ? sanitizeContent(msg.content) : msg.content,\n    }));\n\n    const systemMessage: Message = {\n      role: \"system\",\n      content: `You are Maya, an advanced AI health assistant for the MediCare Hospital Management System.\n\nRules:\n- Be professional, warm, and clear\n- NEVER diagnose medical conditions\n- For emergencies, advise calling +1 (313) 540 9338\n- Guide users to appropriate sections of the portal\n`,\n    };\n\n    const response = await fetch(\"https://ai.gateway.lovable.dev/v1/chat/completions\", {\n      method: \"POST\",\n      headers: {\n        Authorization: `Bearer ${Deno.env.get(\"LOVABLE_API_KEY\")}`,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        model: \"google/gemini-2.0-flash-exp\",\n        messages: [systemMessage, ...sanitizedMessages],\n        temperature: 0.7,\n        max_tokens: 500,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(await response.text());\n    }\n\n    const data = await response.json();\n    const assistantMessage = data?.choices?.[0]?.message?.content;\n\n    if (!assistantMessage) {\n      throw new Error(\"Invalid AI response\");\n    }\n\n    return new Response(\n      JSON.stringify({ message: assistantMessage }),\n      { headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n    );\n  } catch (error) {\n    console.error(\"maya-chat error:\", error);\n    return new Response(\n      JSON.stringify({ error: \"Internal server error\" }),\n      { status: 500, headers: { ...corsHeaders, \"Content-Type\": \"application/json\" } }\n    );\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\supabase\\functions\\vapi-appointment-call\\index.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":30,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":30,"endColumn":20,"suggestions":[{"fix":{"range":[974,1019],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":20,"suggestions":[{"fix":{"range":[1164,1217],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":46,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":46,"endColumn":19,"suggestions":[{"fix":{"range":[1560,1620],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":19,"suggestions":[{"fix":{"range":[2161,2220],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":68,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":68,"endColumn":16,"suggestions":[{"fix":{"range":[2408,2462],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":77,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":77,"endColumn":20,"suggestions":[{"fix":{"range":[2703,2759],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":87,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":87,"endColumn":19,"suggestions":[{"fix":{"range":[3112,3183],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":95,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":95,"endColumn":16,"suggestions":[{"fix":{"range":[3452,3537],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":138,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":138,"endColumn":16,"suggestions":[{"fix":{"range":[4951,5051],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":175,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":175,"endColumn":21,"suggestions":[{"fix":{"range":[6188,6244],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":188,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":188,"endColumn":16,"suggestions":[{"fix":{"range":[6590,6665],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":196,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":196,"endColumn":20,"suggestions":[{"fix":{"range":[6872,6931],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":237,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":237,"endColumn":16,"suggestions":[{"fix":{"range":[9231,9444],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":246,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":246,"endColumn":16,"suggestions":[{"fix":{"range":[9450,9532],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":319,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":319,"endColumn":20,"suggestions":[{"fix":{"range":[12344,12409],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":324,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":324,"endColumn":16,"suggestions":[{"fix":{"range":[12519,12593],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":335,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":335,"endColumn":21,"suggestions":[{"fix":{"range":[12954,13020],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":349,"column":5,"nodeType":"MemberExpression","messageId":"unexpected","endLine":349,"endColumn":18,"suggestions":[{"fix":{"range":[13361,13417],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.168.0/http/server.ts\";\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2\";\n\nconst corsHeaders = {\n  'Access-Control-Allow-Origin': '*',\n  'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',\n};\n\ninterface AppointmentCallRequest {\n  appointmentId: string;\n  action: 'confirm' | 'reminder' | 'cancel';\n}\n\n// Valid staff roles that can initiate calls\nconst STAFF_ROLES = ['admin', 'doctor', 'nurse', 'receptionist'];\n\nserve(async (req: Request) => {\n  // Handle CORS preflight requests\n  if (req.method === 'OPTIONS') {\n    return new Response(null, { headers: corsHeaders });\n  }\n\n  try {\n    const VAPI_API_KEY = Deno.env.get('VAPI_API_KEY');\n    const SUPABASE_URL = Deno.env.get('SUPABASE_URL');\n    const SUPABASE_ANON_KEY = Deno.env.get('SUPABASE_ANON_KEY');\n    const SUPABASE_SERVICE_ROLE_KEY = Deno.env.get('SUPABASE_SERVICE_ROLE_KEY');\n\n    if (!VAPI_API_KEY) {\n      console.error('VAPI_API_KEY not configured');\n      throw new Error('Service configuration error');\n    }\n\n    if (!SUPABASE_URL || !SUPABASE_ANON_KEY || !SUPABASE_SERVICE_ROLE_KEY) {\n      console.error('Supabase credentials not configured');\n      throw new Error('Service configuration error');\n    }\n\n    // ============================================\n    // SECURITY: Authorization Check\n    // ============================================\n\n    // Get the authorization header from the request\n    const authHeader = req.headers.get('Authorization');\n    if (!authHeader) {\n      console.warn('Unauthorized access attempt: No auth header');\n      return new Response(\n        JSON.stringify({ error: 'Unauthorized' }),\n        { status: 401, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    // Create a user-context client to verify the caller's identity\n    const userClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {\n      global: { headers: { Authorization: authHeader } }\n    });\n\n    // Get the authenticated user\n    const { data: { user }, error: userError } = await userClient.auth.getUser();\n    if (userError || !user) {\n      console.warn('Unauthorized access attempt: Invalid token');\n      return new Response(\n        JSON.stringify({ error: 'Unauthorized' }),\n        { status: 401, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    console.log(`Auth check passed for user: ${user.id}`);\n\n    // Check if user has a staff role using the user's context\n    const { data: userRoles, error: rolesError } = await userClient\n      .from('user_roles')\n      .select('role')\n      .eq('user_id', user.id);\n\n    if (rolesError) {\n      console.error('Error fetching user roles:', rolesError);\n      return new Response(\n        JSON.stringify({ error: 'Authorization check failed' }),\n        { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    // Verify user has at least one staff role\n    const hasStaffRole = userRoles?.some(r => STAFF_ROLES.includes(r.role));\n    if (!hasStaffRole) {\n      console.warn(`Access denied for user ${user.id}: No staff role found`);\n      return new Response(\n        JSON.stringify({ error: 'Forbidden: Staff access required' }),\n        { status: 403, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    const userRole = userRoles?.map(r => r.role).join(', ');\n    console.log(`Staff authorization confirmed. User ${user.id} has roles: ${userRole}`);\n\n    // ============================================\n    // Input Validation\n    // ============================================\n\n    let requestBody: AppointmentCallRequest;\n    try {\n      requestBody = await req.json();\n    } catch {\n      return new Response(\n        JSON.stringify({ error: 'Invalid request body' }),\n        { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    const { appointmentId, action } = requestBody;\n\n    // Validate required fields\n    if (!appointmentId || !action) {\n      return new Response(\n        JSON.stringify({ error: 'Missing required fields' }),\n        { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    // Validate appointmentId is a valid UUID format\n    const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n    if (!uuidRegex.test(appointmentId)) {\n      return new Response(\n        JSON.stringify({ error: 'Invalid request' }),\n        { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    // Validate action is one of allowed values\n    if (!['confirm', 'reminder', 'cancel'].includes(action)) {\n      return new Response(\n        JSON.stringify({ error: 'Invalid action' }),\n        { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    console.log(`Processing ${action} call for appointment: ${appointmentId} by staff user ${user.id}`);\n\n    // ============================================\n    // Fetch Appointment (using service role after auth)\n    // ============================================\n\n    // Now that we've verified the user is staff, use service role for data access\n    const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);\n\n    // Fetch appointment details - try patient_appointments first\n    let appointment;\n    let appointmentType = 'patient';\n\n    const { data: patientAppointment } = await supabase\n      .from('patient_appointments')\n      .select(`\n        *,\n        doctor:doctors(name, specialty),\n        department:departments(name)\n      `)\n      .eq('id', appointmentId)\n      .single();\n\n    if (!patientAppointment) {\n      // Try regular appointments table\n      const { data: regularAppointment } = await supabase\n        .from('appointments')\n        .select(`\n          *,\n          patient:patients(name, phone),\n          doctor:doctors(name, specialty)\n        `)\n        .eq('id', appointmentId)\n        .single();\n\n      if (!regularAppointment) {\n        // Return generic error to prevent enumeration\n        console.warn(`Appointment not found: ${appointmentId}`);\n        return new Response(\n          JSON.stringify({ error: 'Unable to process request' }),\n          { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n        );\n      }\n\n      appointment = regularAppointment;\n      appointmentType = 'regular';\n    } else {\n      appointment = patientAppointment;\n    }\n\n    console.log('Appointment found:', { appointmentType, id: appointment.id });\n\n    // Get phone number based on appointment type\n    const phoneNumber = appointmentType === 'patient'\n      ? appointment.patient_phone\n      : appointment.patient?.phone;\n\n    if (!phoneNumber) {\n      console.error('No phone number available for appointment');\n      return new Response(\n        JSON.stringify({ error: 'Unable to process request: Missing contact information' }),\n        { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n      );\n    }\n\n    // Get patient and doctor names\n    const patientName = appointmentType === 'patient'\n      ? appointment.patient_name\n      : appointment.patient?.name || 'Patient';\n\n    const doctorName = appointment.doctor?.name || 'your doctor';\n    const specialty = appointment.doctor?.specialty || '';\n    const departmentName = appointment.department?.name || '';\n\n    // Get appointment date/time\n    const appointmentDate = appointmentType === 'patient'\n      ? appointment.preferred_date\n      : appointment.appointment_date;\n    const appointmentTime = appointmentType === 'patient'\n      ? appointment.preferred_time\n      : appointment.appointment_time;\n\n    // Build the call message based on action\n    let callMessage = '';\n    switch (action) {\n      case 'confirm':\n        callMessage = `Hello ${patientName}, this is Star Hospital calling to confirm your appointment with ${doctorName}${specialty ? `, ${specialty}` : ''}${departmentName ? ` in the ${departmentName} department` : ''}, scheduled for ${appointmentDate}${appointmentTime ? ` at ${appointmentTime}` : ''}. Please press 1 to confirm your appointment, or press 2 if you need to reschedule. Thank you for choosing Star Hospital.`;\n        break;\n      case 'reminder':\n        callMessage = `Hello ${patientName}, this is a friendly reminder from Star Hospital about your upcoming appointment with ${doctorName}${specialty ? `, ${specialty}` : ''}, scheduled for ${appointmentDate}${appointmentTime ? ` at ${appointmentTime}` : ''}. Please arrive 15 minutes early. If you have any questions, please contact us. Thank you!`;\n        break;\n      case 'cancel':\n        callMessage = `Hello ${patientName}, this is Star Hospital. We regret to inform you that your appointment with ${doctorName} scheduled for ${appointmentDate} has been cancelled. Please contact us to reschedule at your earliest convenience. We apologize for any inconvenience. Thank you.`;\n        break;\n    }\n\n    // ============================================\n    // Audit Log\n    // ============================================\n    console.log('AUDIT: Call initiated', {\n      staffUserId: user.id,\n      staffRole: userRole,\n      appointmentId: appointment.id,\n      action,\n      patientName,\n      timestamp: new Date().toISOString()\n    });\n\n    console.log('Initiating Vapi call to:', phoneNumber.replace(/\\d(?=\\d{4})/g, '*'));\n\n    const WEBHOOK_URL = `${SUPABASE_URL}/functions/v1/vapi-webhook`;\n\n    // Make the Vapi API call\n    const vapiResponse = await fetch('https://api.vapi.ai/call/phone', {\n      method: 'POST',\n      headers: {\n        'Authorization': `Bearer ${VAPI_API_KEY}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        phoneNumberId: undefined, // Will use Vapi's default number\n        customer: {\n          number: phoneNumber,\n          name: patientName,\n        },\n        assistant: {\n          firstMessage: callMessage,\n          serverUrl: WEBHOOK_URL,\n          model: {\n            provider: 'openai',\n            model: 'gpt-4o-mini',\n            tools: [\n              {\n                type: \"function\",\n                function: {\n                  name: \"confirmAppointment\",\n                  description: \"Confirms the appointment when the user says yes/confirms.\",\n                  parameters: {\n                    type: \"object\",\n                    properties: {\n                      appointmentId: {\n                        type: \"string\",\n                        description: \"The ID of the appointment to confirm.\"\n                      }\n                    },\n                    required: [\"appointmentId\"]\n                  }\n                }\n              }\n            ],\n            messages: [\n              {\n                role: 'system',\n                content: `You are a professional hospital receptionist for Star Hospital named Maya. You are making a ${action} call for an appointment. \n                \n                CONTEXT: Appointment ID: ${appointmentId}.\n                \n                IMPORTANT: \n                1. If the patient confirms (says yes, okay, confirm, etc.), you MUST explicitly call the 'confirmAppointment' tool with the Appointment ID provided above.\n                2. You must detect the language the user is speaking (English, Hindi, or Marathi) and respond IN THAT SAME LANGUAGE.\n                - If the user speaks Hindi, reply in Hindi.\n                - If the user speaks Marathi, reply in Marathi.\n                - If the user speaks English, reply in English.\n                \n                Be polite, clear, and helpful. If they want to reschedule, let them know a staff member will contact them. Keep responses brief and professional.`\n              }\n            ]\n          },\n          voice: {\n            provider: 'playht',\n            voiceId: 'jennifer'\n          },\n          endCallMessage: 'Thank you for choosing Star Hospital. Have a great day!',\n          endCallPhrases: ['goodbye', 'bye', 'thank you', 'thanks'],\n        },\n        maxDuration: 120, // 2 minutes max\n      }),\n    });\n\n    if (!vapiResponse.ok) {\n      const errorText = await vapiResponse.text();\n      console.error('Vapi API error:', vapiResponse.status, errorText);\n      throw new Error('Failed to initiate call');\n    }\n\n    const vapiData = await vapiResponse.json();\n    console.log('Vapi call initiated successfully:', { callId: vapiData.id });\n\n    // Update appointment status if confirming\n    if (action === 'confirm') {\n      const table = appointmentType === 'patient' ? 'patient_appointments' : 'appointments';\n      const { error: updateError } = await supabase\n        .from(table)\n        .update({ status: 'call_initiated' })\n        .eq('id', appointmentId);\n\n      if (updateError) {\n        console.warn('Failed to update appointment status:', updateError);\n      }\n    }\n\n    return new Response(\n      JSON.stringify({\n        success: true,\n        callId: vapiData.id,\n        message: `${action.charAt(0).toUpperCase() + action.slice(1)} call initiated successfully`,\n      }),\n      { headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n    );\n\n  } catch (error: unknown) {\n    console.error('Error in vapi-appointment-call:', error);\n    // Return generic error to prevent information disclosure\n    return new Response(\n      JSON.stringify({ error: 'An error occurred processing your request' }),\n      { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\n    );\n  }\n});\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\supabase\\functions\\vapi-callback-request\\index.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":30,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":30,"endColumn":26,"suggestions":[{"fix":{"range":[984,1029],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":35,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":35,"endColumn":26,"suggestions":[{"fix":{"range":[1199,1252],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":46,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":46,"endColumn":25,"suggestions":[{"fix":{"range":[1646,1706],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'userError' is assigned a value but never used.","line":59,"column":40,"nodeType":null,"messageId":"unusedVar","endLine":59,"endColumn":49},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":66,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":66,"endColumn":24,"suggestions":[{"fix":{"range":[2418,2472],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":84,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":84,"endColumn":28,"suggestions":[{"fix":{"range":[3343,3388],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":87,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":87,"endColumn":24,"suggestions":[{"fix":{"range":[3435,3485],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":94,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":94,"endColumn":25,"suggestions":[{"fix":{"range":[3670,3743],"text":""},"messageId":"removeConsole","data":{"propertyName":"warn"},"desc":"Remove the console.warn()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":101,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":101,"endColumn":20,"suggestions":[{"fix":{"range":[4018,4104],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":133,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":133,"endColumn":30,"suggestions":[{"fix":{"range":[5237,5281],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":157,"column":17,"nodeType":"MemberExpression","messageId":"unexpected","endLine":157,"endColumn":30,"suggestions":[{"fix":{"range":[6318,6377],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":164,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":164,"endColumn":24,"suggestions":[{"fix":{"range":[6685,6749],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":181,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":181,"endColumn":20,"suggestions":[{"fix":{"range":[7372,7436],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":208,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":208,"endColumn":20,"suggestions":[{"fix":{"range":[8643,8682],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":244,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":244,"endColumn":26,"suggestions":[{"fix":{"range":[10027,10092],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":249,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":249,"endColumn":20,"suggestions":[{"fix":{"range":[10234,10308],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":263,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":263,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10766,10769],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10766,10769],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":264,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":264,"endColumn":22,"suggestions":[{"fix":{"range":[10782,10838],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":18,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { serve } from \"https://deno.land/std@0.168.0/http/server.ts\";\r\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2\";\r\n\r\nconst corsHeaders = {\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',\r\n};\r\n\r\ninterface CallbackRequest {\r\n    callbackId: string;\r\n}\r\n\r\n// Valid staff roles that can initiate calls\r\nconst STAFF_ROLES = ['admin', 'doctor', 'nurse', 'receptionist'];\r\n\r\nserve(async (req) => {\r\n    // Handle CORS preflight requests\r\n    if (req.method === 'OPTIONS') {\r\n        return new Response(null, { headers: corsHeaders });\r\n    }\r\n\r\n    try {\r\n        const VAPI_API_KEY = Deno.env.get('VAPI_API_KEY');\r\n        const SUPABASE_URL = Deno.env.get('SUPABASE_URL');\r\n        const SUPABASE_ANON_KEY = Deno.env.get('SUPABASE_ANON_KEY');\r\n        const SUPABASE_SERVICE_ROLE_KEY = Deno.env.get('SUPABASE_SERVICE_ROLE_KEY');\r\n\r\n        if (!VAPI_API_KEY) {\r\n            console.error('VAPI_API_KEY not configured');\r\n            throw new Error('Service configuration error');\r\n        }\r\n\r\n        if (!SUPABASE_URL || !SUPABASE_ANON_KEY || !SUPABASE_SERVICE_ROLE_KEY) {\r\n            console.error('Supabase credentials not configured');\r\n            throw new Error('Service configuration error');\r\n        }\r\n\r\n        // ============================================\r\n        // SECURITY: Authorization Check\r\n        // ============================================\r\n\r\n        // Get the authorization header from the request\r\n        const authHeader = req.headers.get('Authorization');\r\n        if (!authHeader) {\r\n            console.warn('Unauthorized access attempt: No auth header');\r\n            return new Response(\r\n                JSON.stringify({ error: 'Unauthorized' }),\r\n                { status: 401, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n            );\r\n        }\r\n\r\n        // Create a user-context client to verify the caller's identity\r\n        const userClient = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {\r\n            global: { headers: { Authorization: authHeader } }\r\n        });\r\n\r\n        // Get the authenticated user\r\n        const { data: { user }, error: userError } = await userClient.auth.getUser();\r\n\r\n        let isStaff = false;\r\n        let userId = 'public-anon';\r\n\r\n        if (user) {\r\n            userId = user.id;\r\n            console.log(`Auth check passed for user: ${user.id}`);\r\n\r\n            // Check if user has a staff role using the user's context\r\n            const { data: userRoles, error: rolesError } = await userClient\r\n                .from('user_roles')\r\n                .select('role')\r\n                .eq('user_id', user.id);\r\n\r\n            if (!rolesError && userRoles) {\r\n                isStaff = userRoles.some(r => STAFF_ROLES.includes(r.role));\r\n            }\r\n\r\n            if (!isStaff) {\r\n                // If logged in but not staff - technically patients shouldn't accept callbacks? \r\n                // Actually, if a patient triggers it for themselves, maybe okay?\r\n                // But for now, let's strictly restrict \"Staff\" actions to Staff, \r\n                // and \"Public\" actions (no user) are allowed for the landing page.\r\n                // Ideally we'd separate these, but for this task:\r\n                console.log(`User ${user.id} is not staff.`);\r\n            }\r\n        } else {\r\n            console.log('Public anonymous request received.');\r\n        }\r\n\r\n        // We allow if:\r\n        // 1. User is Staff (Admin Panel usage)\r\n        // 2. No User (Public Landing Page usage)\r\n        if (user && !isStaff) {\r\n            console.warn(`Access denied for authenticated non-staff user ${userId}`);\r\n            return new Response(\r\n                JSON.stringify({ error: 'Forbidden: Staff access required for authenticated users' }),\r\n                { status: 403, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n            );\r\n        }\r\n\r\n        console.log(`Processing request for ${userId} (Staff: ${isStaff}, Public: ${!user})`);\r\n\r\n        // ============================================\r\n        // Input Validation\r\n        // ============================================\r\n\r\n        let requestBody: CallbackRequest & { name?: string, phone?: string, email?: string, reason?: string, preferred_time?: string };\r\n        try {\r\n            requestBody = await req.json();\r\n        } catch {\r\n            return new Response(\r\n                JSON.stringify({ error: 'Invalid request body' }),\r\n                { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n            );\r\n        }\r\n\r\n        const { callbackId } = requestBody;\r\n\r\n        // Use service role for data access\r\n        const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);\r\n\r\n        let callbackData;\r\n\r\n        // Scenario 1: callbackId provided (Existing record)\r\n        if (callbackId) {\r\n            const { data, error } = await supabase\r\n                .from('callback_requests')\r\n                .select('*')\r\n                .eq('id', callbackId)\r\n                .single();\r\n\r\n            if (error || !data) {\r\n                console.error('Callback not found:', error);\r\n                return new Response(\r\n                    JSON.stringify({ error: 'Callback request not found' }),\r\n                    { status: 404, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n                );\r\n            }\r\n            callbackData = data;\r\n\r\n            // Scenario 2: Direct submission (Insert new record)\r\n        } else if (requestBody.name && requestBody.phone) {\r\n            const { data, error } = await supabase\r\n                .from('callback_requests')\r\n                .insert({\r\n                    name: requestBody.name,\r\n                    phone: requestBody.phone,\r\n                    email: requestBody.email,\r\n                    reason: requestBody.reason,\r\n                    preferred_time: requestBody.preferred_time,\r\n                    // If user is authenticated, we could pass userId, but for now let's keep it simple or pass it in body\r\n                })\r\n                .select()\r\n                .single();\r\n\r\n            if (error) {\r\n                console.error('Failed to create callback request:', error);\r\n                return new Response(\r\n                    JSON.stringify({ error: 'Failed to create callback request' }),\r\n                    { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n                );\r\n            }\r\n            callbackData = data;\r\n            console.log(`Created new callback request: ${callbackData.id}`);\r\n        } else {\r\n            return new Response(\r\n                JSON.stringify({ error: 'Missing callbackId OR (name and phone)' }),\r\n                { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n            );\r\n        }\r\n\r\n        const { name, phone: phoneNumber, reason } = callbackData;\r\n\r\n        if (!phoneNumber) {\r\n            return new Response(\r\n                JSON.stringify({ error: 'Missing phone number in callback request' }),\r\n                { status: 400, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n            );\r\n        }\r\n\r\n        console.log(`Processing callback for ${name} (${phoneNumber})`);\r\n\r\n        // ============================================\r\n        // Make Vapi Call\r\n        // ============================================\r\n\r\n        const prompt = `You are Maya, the AI receptionist for Star Hospital (Medicare).\r\nYou are calling a patient named ${name} who requested a callback.\r\nHospital Info: Star Hospital.\r\nReason for callback: ${reason || 'General Inquiry'}.\r\n\r\nTask:\r\n1. Introduce yourself warmly as Maya from Star Hospital.\r\n2. Mention that you are calling because they requested a callback.\r\n3. Ask how you can assist them today.\r\n4. Listen to their query and answer relevant questions about appointments, reports, or general info.\r\n5. If they need to speak to a human, apologize and say a staff member will call them shortly.\r\n\r\n\r\nLanguages:\r\nIMPORTANT: You must detect the language the user is speaking (English, Hindi, or Marathi) and respond IN THAT SAME LANGUAGE.\r\n- If the user speaks Hindi, reply in Hindi.\r\n- If the user speaks Marathi, reply in Marathi.\r\n- If the user speaks English, reply in English.\r\nDo not just translate, but adopt the persona appropriate for that language. Start in English but switch IMMEDIATELY if they speak Hindi or Marathi.\r\n`;\r\n\r\n        console.log('Initiating Vapi call...');\r\n\r\n        const vapiResponse = await fetch('https://api.vapi.ai/call/phone', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': `Bearer ${VAPI_API_KEY}`,\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                phoneNumberId: undefined, // Uses default\r\n                customer: {\r\n                    number: phoneNumber,\r\n                    name: name,\r\n                },\r\n                assistant: {\r\n                    firstMessage: `Namaste ${name}, this is Maya calling from Star Hospital. We received your request for a callback. How can I help you today?`,\r\n                    model: {\r\n                        provider: 'openai',\r\n                        model: 'gpt-4o-mini',\r\n                        messages: [\r\n                            {\r\n                                role: 'system',\r\n                                content: prompt\r\n                            }\r\n                        ]\r\n                    },\r\n                    voice: {\r\n                        provider: 'playht',\r\n                        voiceId: 'jennifer'\r\n                    },\r\n                },\r\n            }),\r\n        });\r\n\r\n        if (!vapiResponse.ok) {\r\n            const errorText = await vapiResponse.text();\r\n            console.error('Vapi API error:', vapiResponse.status, errorText);\r\n            throw new Error('Failed to initiate call via Vapi');\r\n        }\r\n\r\n        const vapiData = await vapiResponse.json();\r\n        console.log('Vapi call initiated successfully:', { callId: vapiData.id });\r\n\r\n        // Update status to processing or completed? leaving as is for now or maybe 'processing'\r\n        // Let's just log it.\r\n\r\n        return new Response(\r\n            JSON.stringify({\r\n                success: true,\r\n                callId: vapiData.id,\r\n                message: 'Callback initiated successfully',\r\n            }),\r\n            { headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n        );\r\n\r\n    } catch (error: any) {\r\n        console.error('Error in vapi-callback-request:', error);\r\n        return new Response(\r\n            JSON.stringify({ error: error.message || 'An internal error occurred' }),\r\n            { status: 500, headers: { ...corsHeaders, 'Content-Type': 'application/json' } }\r\n        );\r\n    }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\supabase\\functions\\vapi-webhook\\index.ts","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":27,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":27,"endColumn":20,"suggestions":[{"fix":{"range":[995,1048],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":40,"column":21,"nodeType":"MemberExpression","messageId":"unexpected","endLine":40,"endColumn":32,"suggestions":[{"fix":{"range":[1592,1641],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":29,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":40,"suggestions":[{"fix":{"range":[1936,1992],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":33,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":44,"suggestions":[{"fix":{"range":[2644,2693],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":85,"column":37,"nodeType":"MemberExpression","messageId":"unexpected","endLine":85,"endColumn":48,"suggestions":[{"fix":{"range":[4067,4108],"text":""},"messageId":"removeConsole","data":{"propertyName":"log"},"desc":"Remove the console.log()."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":1,"message":"Unexpected any. Specify a different type.","line":152,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":152,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7507,7510],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7507,7510],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":153,"column":9,"nodeType":"MemberExpression","messageId":"unexpected","endLine":153,"endColumn":22,"suggestions":[{"fix":{"range":[7523,7571],"text":""},"messageId":"removeConsole","data":{"propertyName":"error"},"desc":"Remove the console.error()."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { serve } from \"https://deno.land/std@0.168.0/http/server.ts\";\r\nimport { createClient } from \"https://esm.sh/@supabase/supabase-js@2\";\r\n\r\nconst corsHeaders = {\r\n    'Access-Control-Allow-Origin': '*',\r\n    'Access-Control-Allow-Headers': 'authorization, x-client-info, apikey, content-type',\r\n};\r\n\r\nserve(async (req) => {\r\n    if (req.method === 'OPTIONS') {\r\n        return new Response(null, { headers: corsHeaders });\r\n    }\r\n\r\n    try {\r\n        const SUPABASE_URL = Deno.env.get('SUPABASE_URL');\r\n        const SUPABASE_SERVICE_ROLE_KEY = Deno.env.get('SUPABASE_SERVICE_ROLE_KEY');\r\n\r\n        if (!SUPABASE_URL || !SUPABASE_SERVICE_ROLE_KEY) {\r\n            throw new Error('Missing Supabase credentials');\r\n        }\r\n\r\n        const supabase = createClient(SUPABASE_URL, SUPABASE_SERVICE_ROLE_KEY);\r\n\r\n        const body = await req.json();\r\n        // Log the type of event to help with debugging\r\n        const messageType = body.message?.type || body.type || 'unknown';\r\n        console.log(`Received Vapi webhook: ${messageType}`);\r\n\r\n        // Handle Tool Calls (Function Calls)\r\n        // Vapi sends a POST request with the tool calls when the assistant invokes a function\r\n        if (messageType === 'tool-calls' || body.toolCalls) {\r\n            const toolCalls = body.message?.toolCalls || body.toolCalls || [];\r\n            const results = [];\r\n\r\n            for (const toolCall of toolCalls) {\r\n                const { id, function: func } = toolCall;\r\n\r\n                if (func) {\r\n                    const { name, arguments: args } = func;\r\n                    console.log(`Processing function call: ${name}`);\r\n\r\n                    const parsedArgs = typeof args === 'string' ? JSON.parse(args) : args;\r\n\r\n                    if (name === 'confirmAppointment') {\r\n                        const { appointmentId } = parsedArgs;\r\n\r\n                        if (appointmentId) {\r\n                            console.log(`Confirming appointment: ${appointmentId}`);\r\n\r\n                            // 1. Try updating patient_appointments\r\n                            const { error: patientAppError, data: patientAppData } = await supabase\r\n                                .from('patient_appointments')\r\n                                .update({ status: 'confirmed' })\r\n                                .eq('id', appointmentId)\r\n                                .select()\r\n                                .single();\r\n\r\n                            let success = false;\r\n                            if (!patientAppError && patientAppData) {\r\n                                success = true;\r\n                                console.log('Confirmed in patient_appointments');\r\n\r\n                                // Insert Notification for the user\r\n                                if (patientAppData.user_id) {\r\n                                    await supabase.from('notifications').insert({\r\n                                        title: 'Appointment Confirmed',\r\n                                        message: `Your appointment has been confirmed via call.`,\r\n                                        type: 'success',\r\n                                        user_id: patientAppData.user_id,\r\n                                        entity_type: 'appointment',\r\n                                        entity_id: appointmentId\r\n                                    });\r\n                                }\r\n                            } else {\r\n                                // 2. Try updating regular appointments\r\n                                const { error: appError, data: appData } = await supabase\r\n                                    .from('appointments')\r\n                                    .update({ status: 'confirmed' })\r\n                                    .eq('id', appointmentId)\r\n                                    .select()\r\n                                    .single();\r\n\r\n                                if (!appError && appData) {\r\n                                    success = true;\r\n                                    console.log('Confirmed in appointments');\r\n\r\n                                    // Try to find linked user for notification\r\n                                    if (appData.patient_id) {\r\n                                        const { data: patientAccount } = await supabase\r\n                                            .from('patient_accounts')\r\n                                            .select('user_id')\r\n                                            .eq('patient_id', appData.patient_id)\r\n                                            .single();\r\n\r\n                                        if (patientAccount && patientAccount.user_id) {\r\n                                            await supabase.from('notifications').insert({\r\n                                                title: 'Appointment Confirmed',\r\n                                                message: `Your appointment has been confirmed via call.`,\r\n                                                type: 'success',\r\n                                                user_id: patientAccount.user_id,\r\n                                                entity_type: 'appointment',\r\n                                                entity_id: appointmentId\r\n                                            });\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n\r\n                            if (success) {\r\n                                results.push({\r\n                                    toolCallId: id,\r\n                                    result: \"Appointment confirmed successfully. Database updated.\",\r\n                                });\r\n                            } else {\r\n                                results.push({\r\n                                    toolCallId: id,\r\n                                    result: \"Could not find appointment with that ID to confirm.\",\r\n                                });\r\n                            }\r\n                        } else {\r\n                            results.push({\r\n                                toolCallId: id,\r\n                                result: \"Error: Missing appointmentId\",\r\n                            });\r\n                        }\r\n                    } else if (name === 'rescheduleAppointment') {\r\n                        // Basic handling for reschedule - just log for now or create a callback request\r\n                        // For now, let's just acknowledge it so the AI knows\r\n                        results.push({\r\n                            toolCallId: id,\r\n                            result: \"Reschedule request noted. A staff member will call back.\",\r\n                        });\r\n                        // Ideally we'd create a callback_request here\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Vapi expects a response with the results of the tool calls\r\n            // Structure: { results: [ { toolCallId: \"...\", result: \"...\" } ] }\r\n            // Or for Vapi's Server URL: { results: ... }\r\n\r\n            return new Response(JSON.stringify({ results }), {\r\n                headers: { ...corsHeaders, 'Content-Type': 'application/json' }\r\n            });\r\n        }\r\n\r\n        return new Response(JSON.stringify({ received: true }), {\r\n            headers: { ...corsHeaders, 'Content-Type': 'application/json' },\r\n        });\r\n\r\n    } catch (error: any) {\r\n        console.error('Error handling webhook:', error);\r\n        return new Response(JSON.stringify({ error: error.message }), {\r\n            status: 500,\r\n            headers: { ...corsHeaders, 'Content-Type': 'application/json' },\r\n        });\r\n    }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\tailwind.config.ts","messages":[{"ruleId":"@typescript-eslint/no-require-imports","severity":2,"message":"A `require()` style import is forbidden.","line":90,"column":13,"nodeType":"CallExpression","messageId":"noRequireImports","endLine":90,"endColumn":43}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./pages/**/*.{ts,tsx}\", \"./components/**/*.{ts,tsx}\", \"./app/**/*.{ts,tsx}\", \"./src/**/*.{ts,tsx}\"],\n  prefix: \"\",\n  theme: {\n    container: {\n      center: true,\n      padding: \"2rem\",\n      screens: {\n        \"2xl\": \"1400px\",\n      },\n    },\n    extend: {\n      colors: {\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        sidebar: {\n          DEFAULT: \"hsl(var(--sidebar-background))\",\n          foreground: \"hsl(var(--sidebar-foreground))\",\n          primary: \"hsl(var(--sidebar-primary))\",\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\n          accent: \"hsl(var(--sidebar-accent))\",\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\n          border: \"hsl(var(--sidebar-border))\",\n          ring: \"hsl(var(--sidebar-ring))\",\n        },\n      },\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\")],\n} satisfies Config;\n","usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"D:\\starhospital-main\\vite.config.ts.timestamp-1768826092361-78347c6ad59458.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]